'use strict';define(['jquery','block_ases/bootstrap','block_ases/sweetalert','block_ases/jqueryui','block_ases/select2','block_ases/_ases_api.js'],function(a){return{init:function init(){function g(h){for(var j=h.indexOf('?'),k='',l=j;l<h.length;l++)k+=h[l];return k.replace(/#[a-zA-z]+_[a-zA-z]+/i,'')}a('#dphpforms-redirect-new-form').click(function(){window.location.href='dphpforms_form_builder.php'+g(window.location.href)}),a('#dphpforms-redirect-adm-alias').click(function(){window.location.href='dphpforms_alias_editor.php'+g(window.location.href)}),a('#dphpforms-redirect-adm-forms').click(function(){window.location.href='dphpforms_form_editor.php'+g(window.location.href)}),a('#dphpforms-redirect-new-pregu').click(function(){window.location.href='dphpforms_form_creator_pregunta.php'+g(window.location.href)+'&form_id='+a(this).attr('data-form-id')}),a('#dphpforms-redirect-adm-disparadores').click(function(){window.location.href='dphpforms_form_editor_comportamientos.php'+g(window.location.href)+'&form_id='+a(this).attr('data-form-id')}),a('.btn-editor-form').click(function(){window.location.href='dphpforms_form_editor_preguntas.php'+g(window.location.href)+'&form_id='+a(this).attr('data-form-id')}),a('.btn-editor-permiso').click(function(){window.location.href='dphpforms_form_editor_permiso.php'+g(window.location.href)+'&permiso_id='+a(this).attr('data-permiso-id')}),a('.btn-editor-pregunta').click(function(){window.location.href='dphpforms_form_editor_pregunta.php'+g(window.location.href)+'&pregunta_id='+a(this).attr('data-pregunta-id')}),a('#actualizar-permiso').click(function(){var h=a(this).attr('data-permiso-id');swal({html:!0,title:'Confirmaci\xF3n',text:'<strong>Nota importante!</strong>: Est\xE1 actualizando este permiso, \xBFdesea continuar?',type:'warning',showCancelButton:!0,confirmButtonText:'S\xED, Actualizar!'},function(j){j&&a.ajax({method:'POST',url:'../managers/dphpforms/dphpforms_form_updater.php',contentType:'application/json',dataType:'text',data:JSON.stringify({'function':'update_permiso',permiso_id:h,permisos:a('#permisos').val()}),success:function success(k){k=JSON.parse(k),0==k.status?alert('Actualizado'):-1==k.status&&alert('Permiso vacio o inexistente')},error:function error(k,l,m){alert('Informe de este error'),console.log('some error '+l+' '+m),console.log(k)}})})}),a('#actualizar-enunciado').click(function(){var h=a(this).attr('data-pregunta-id');swal({html:!0,title:'Confirmaci\xF3n',text:'<strong>Nota importante!</strong>: Est\xE1 actualizando el enunciado, \xBFdesea continuar?',type:'warning',showCancelButton:!0,confirmButtonText:'S\xED, Actualizar!'},function(j){j&&a.ajax({method:'POST',url:'../managers/dphpforms/dphpforms_form_updater.php',contentType:'application/json',dataType:'text',data:JSON.stringify({'function':'update_pregunta_enunciado',pregunta_id:h,enunciado:a('#enunciado').val()}),success:function success(k){k=JSON.parse(k),0==k.status?alert('Actualizado'):-1==k.status&&alert('Pregunta inexistente')},error:function error(k,l,m){alert('Informe de este error'),console.log('some error '+l+' '+m),console.log(k)}})})}),a('#actualizar-atributos').click(function(){var h=a(this).attr('data-pregunta-id');swal({html:!0,title:'Confirmaci\xF3n',text:'<strong>Nota importante!</strong>: Est\xE1 actualizando los atributos, \xBFdesea continuar?',type:'warning',showCancelButton:!0,confirmButtonText:'S\xED, Actualizar!'},function(j){j&&a.ajax({method:'POST',url:'../managers/dphpforms/dphpforms_form_updater.php',contentType:'application/json',dataType:'text',data:JSON.stringify({'function':'update_pregunta_atributos',pregunta_id:h,atributos:a('#atributos').val()}),success:function success(k){k=JSON.parse(k),0==k.status?alert('Actualizado'):-1==k.status&&alert('Pregunta inexistente')},error:function error(k,l,m){alert('Informe de este error'),console.log('some error '+l+' '+m),console.log(k)}})})}),a('#actualizar-opciones').click(function(){var h=a(this).attr('data-pregunta-id');swal({html:!0,title:'Confirmaci\xF3n',text:'<strong>Nota importante!</strong>: Est\xE1 las opciones de esta pregunta, \xBFdesea continuar?',type:'warning',showCancelButton:!0,confirmButtonText:'S\xED, Actualizar!'},function(j){j&&a.ajax({method:'POST',url:'../managers/dphpforms/dphpforms_form_updater.php',contentType:'application/json',dataType:'text',data:JSON.stringify({'function':'update_pregunta_opciones',pregunta_id:h,opciones:a('#opciones').val()}),success:function success(k){k=JSON.parse(k),console.log(k),0==k.status?alert('Actualizado'):-1==k.status&&alert('Pregunta inexistente')},error:function error(k,l,m){alert('Informe de este error'),console.log('some error '+l+' '+m),console.log(k)}})})}),a('#registrar-pregunta').click(function(){var h=a(this).attr('data-form-id');swal({html:!0,title:'Confirmaci\xF3n',text:'<strong>Nota importante!</strong>: Est\xE1 registrando una nueva pregunta en el formulario, \xBFdesea continuar?',type:'warning',showCancelButton:!0,confirmButtonText:'S\xED, Crear!'},function(j){j&&a.ajax({method:'POST',url:'../managers/dphpforms/dphpforms_form_updater.php',contentType:'application/json',dataType:'text',data:JSON.stringify({'function':'create_pregunta',form_id:h,json_pregunta:a('#json_pregunta').val()}),success:function success(k){k=JSON.parse(k),console.log(k),0==k.status?(alert('Creada'),a('#json_pregunta').val('')):-1==k.status&&alert('Formulario inexistente o JSON-pregunta vacio')},error:function error(k,l,m){alert('Informe de este error'),console.log('some error '+l+' '+m),console.log(k)}})})}),a('#actualizar-orden').click(function(){var h=a(this).attr('data-form-id');console.log('FormID: '+h),swal({html:!0,title:'Confirmaci\xF3n',text:'<strong>Nota importante!</strong>: Est\xE1 actualizando el orden de las pregunta, \xBFdesea continuar?',type:'warning',showCancelButton:!0,confirmButtonText:'S\xED, Actualizar!'},function(j){j&&a.ajax({method:'POST',url:'../managers/dphpforms/dphpforms_form_updater.php',contentType:'application/json',dataType:'text',data:JSON.stringify({'function':'update_positions',form_id:h,ordenamiento:a('#ordenamiento').val()}),success:function success(k){console.log(k)},error:function error(k,l,m){alert('Informe de este error'),console.log('some error '+l+' '+m),console.log(k)}})})}),a('.btn-remove-form').click(function(){var h=a(this).attr('data-form-name'),j=a(this).attr('data-form-id');swal({html:!0,title:'Confirmaci\xF3n',text:'<strong>Nota importante!</strong>: Est\xE1 eliminando el formulario <strong><i>'+h+'</i></strong>, \xBFdesea continuar?, tenga en consideraci\xF3n que los alias asociados a las preguntas del formulario no ser\xE1n eliminados.',type:'warning',showCancelButton:!0,confirmButtonText:'S\xED, Eliminar!'},function(k){k&&a.get('../managers/dphpforms/dphpforms_form_updater.php?function=delete_form&id_form='+j,function(l){var m=l;0==m.status?swal({title:'Informaci\xF3n',text:'Eliminado',type:'success'},function(){window.location.href=window.location.href}):-1==m.status&&swal('Error!',m.message,'error')})})}),a('.btn-remove-alias').click(function(){var h=a(this).attr('data-form-alias'),j=a(this).attr('data-form-id');swal({html:!0,title:'Confirmaci\xF3n',text:'<strong>Nota importante!</strong>: Est\xE1 eliminando el alias <strong><i>'+h+'</i></strong>, \xBFdesea continuar?, tenga en consideraci\xF3n que cualquier consulta que haga uso de este alias dejar\xE1 de funcionar.',type:'warning',showCancelButton:!0,confirmButtonText:'S\xED, Eliminar!'},function(k){k&&a.get('../managers/dphpforms/dphpforms_form_updater.php?function=delete_alias&id_alias='+j,function(l){var m=l;0==m.status?swal({title:'Informaci\xF3n',text:'Eliminado',type:'success'},function(){window.location.href=window.location.href}):-1==m.status&&swal('Error!',m.message,'error')})})}),a('#actualizar-disparadores').click(function(){var h=a(this).attr('data-disparadores-id');swal({html:!0,title:'Confirmaci\xF3n',text:'<strong>Nota importante!</strong>: Est\xE1 actualizando este disparador de comportamientos, \xBFdesea continuar?',type:'warning',showCancelButton:!0,confirmButtonText:'S\xED, Actualizar!'},function(j){j&&a.ajax({method:'POST',url:'../managers/dphpforms/dphpforms_form_updater.php',contentType:'application/json',dataType:'text',data:JSON.stringify({'function':'update_disparadores',disparadores_id:h,disparadores:a('#disparadores-'+h).val()}),success:function success(k){k=JSON.parse(k),0==k.status?alert('Actualizado'):-1==k.status&&alert('Bloque de disparadores inexistente')},error:function error(k,l,m){alert('Informe de este error'),console.log('some error '+l+' '+m),console.log(k)}})})}),a('#cargar-afectaciones').click(function(){var h=parseInt(a('#alias-list option:selected').data('id')),j=parseInt(a('#form-info').data('id'));a.ajax({method:'POST',url:'../managers/dphpforms/v2/dphpforms_api.php',contentType:'application/json',dataType:'json',data:JSON.stringify({'function':'get_records_reverse_new_field_update',params:[h,j]}),success:function success(k){a('#salida-afectaciones').text(k.data_response)},error:function error(k,l,m){alert('Informe de este error'),console.log('some error '+l+' '+m),console.log(k)}})}),a('#aplicar-accion').click(function(){var h=parseInt(a('#alias-list option:selected').data('id')),j=parseInt(a('#form-info').data('id')),k=a('#mantenimiento-valor-por-defecto').val();a.ajax({method:'POST',url:'../managers/dphpforms/v2/dphpforms_api.php',contentType:'application/json',dataType:'json',data:JSON.stringify({'function':'reverse_new_field_update',params:[j,h,k]}),success:function success(l){a('#salida-afectaciones').text(l.data_response)},error:function error(l,m,n){alert('Informe de este error'),console.log('some error '+m+' '+n),console.log(l)}})}),a('#verificacion').change(function(){console.log(a(this).is(':checked')),!0==a(this).is(':checked')?a('#aplicar-accion').show():a('#aplicar-accion').hide()}),a('#add_rule').click(function(){var h=parseInt(a('#preg_a_id').val()),j=parseInt(a('#rule_id').val()),k=parseInt(a('#preg_b_id').val()),l=parseInt(a('#form-info').data('id'));console.log('entra'),a.ajax({method:'POST',url:'../managers/dphpforms/v2/dphpforms_api.php',contentType:'application/json',dataType:'json',data:JSON.stringify({'function':'add_new_form_rule',params:[l,h,j,k]}),success:function success(){alert('Registrada')},error:function error(m,n,o){alert('Error registrando'),console.log('some error '+n+' '+o),console.log(m)}})})}}});