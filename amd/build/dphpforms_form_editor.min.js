define ("block_ases/dphpforms_form_editor",["jquery","block_ases/bootstrap","block_ases/sweetalert","block_ases/jqueryui","block_ases/select2"],function(a){return{init:function init(){function b(a){for(var b=a.indexOf("?"),c="",d=b;d<a.length;d++){c+=a[d]}return c.replace(/#[a-zA-z]+_[a-zA-z]+/i,"")}a("#dphpforms-redirect-new-form").click(function(){window.location.href="dphpforms_form_builder.php"+b(window.location.href)});a("#dphpforms-redirect-adm-alias").click(function(){window.location.href="dphpforms_alias_editor.php"+b(window.location.href)});a("#dphpforms-redirect-adm-forms").click(function(){window.location.href="dphpforms_form_editor.php"+b(window.location.href)});a("#dphpforms-redirect-new-pregu").click(function(){window.location.href="dphpforms_form_creator_pregunta.php"+b(window.location.href)+"&form_id="+a(this).attr("data-form-id")});a("#dphpforms-redirect-adm-disparadores").click(function(){window.location.href="dphpforms_form_editor_comportamientos.php"+b(window.location.href)+"&form_id="+a(this).attr("data-form-id")});a(".btn-editor-form").click(function(){window.location.href="dphpforms_form_editor_preguntas.php"+b(window.location.href)+"&form_id="+a(this).attr("data-form-id")});a(".btn-editor-permiso").click(function(){window.location.href="dphpforms_form_editor_permiso.php"+b(window.location.href)+"&permiso_id="+a(this).attr("data-permiso-id")});a(".btn-editor-pregunta").click(function(){window.location.href="dphpforms_form_editor_pregunta.php"+b(window.location.href)+"&pregunta_id="+a(this).attr("data-pregunta-id")});a("#actualizar-permiso").click(function(){var b=a(this).attr("data-permiso-id");swal({html:!0,title:"Confirmaci\xF3n",text:"<strong>Nota importante!</strong>: Est\xE1 actualizando este permiso, \xBFdesea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"S\xED, Actualizar!"},function(c){if(c){a.ajax({method:"POST",url:"../managers/dphpforms/dphpforms_form_updater.php",contentType:"application/json",dataType:"text",data:JSON.stringify({function:"update_permiso",permiso_id:b,permisos:a("#permisos").val()}),success:function success(a){a=JSON.parse(a);if(0==a.status){alert("Actualizado")}else if(-1==a.status){alert("Permiso vacio o inexistente")}},error:function error(a,b,c){alert("Informe de este error");console.log("some error "+b+" "+c);console.log(a)}})}})});a("#actualizar-enunciado").click(function(){var b=a(this).attr("data-pregunta-id");swal({html:!0,title:"Confirmaci\xF3n",text:"<strong>Nota importante!</strong>: Est\xE1 actualizando el enunciado, \xBFdesea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"S\xED, Actualizar!"},function(c){if(c){a.ajax({method:"POST",url:"../managers/dphpforms/dphpforms_form_updater.php",contentType:"application/json",dataType:"text",data:JSON.stringify({function:"update_pregunta_enunciado",pregunta_id:b,enunciado:a("#enunciado").val()}),success:function success(a){a=JSON.parse(a);if(0==a.status){alert("Actualizado")}else if(-1==a.status){alert("Pregunta inexistente")}},error:function error(a,b,c){alert("Informe de este error");console.log("some error "+b+" "+c);console.log(a)}})}})});a("#actualizar-atributos").click(function(){var b=a(this).attr("data-pregunta-id");swal({html:!0,title:"Confirmaci\xF3n",text:"<strong>Nota importante!</strong>: Est\xE1 actualizando los atributos, \xBFdesea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"S\xED, Actualizar!"},function(c){if(c){a.ajax({method:"POST",url:"../managers/dphpforms/dphpforms_form_updater.php",contentType:"application/json",dataType:"text",data:JSON.stringify({function:"update_pregunta_atributos",pregunta_id:b,atributos:a("#atributos").val()}),success:function success(a){a=JSON.parse(a);if(0==a.status){alert("Actualizado")}else if(-1==a.status){alert("Pregunta inexistente")}},error:function error(a,b,c){alert("Informe de este error");console.log("some error "+b+" "+c);console.log(a)}})}})});a("#actualizar-opciones").click(function(){var b=a(this).attr("data-pregunta-id");swal({html:!0,title:"Confirmaci\xF3n",text:"<strong>Nota importante!</strong>: Est\xE1 las opciones de esta pregunta, \xBFdesea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"S\xED, Actualizar!"},function(c){if(c){a.ajax({method:"POST",url:"../managers/dphpforms/dphpforms_form_updater.php",contentType:"application/json",dataType:"text",data:JSON.stringify({function:"update_pregunta_opciones",pregunta_id:b,opciones:a("#opciones").val()}),success:function success(a){a=JSON.parse(a);console.log(a);if(0==a.status){alert("Actualizado")}else if(-1==a.status){alert("Pregunta inexistente")}},error:function error(a,b,c){alert("Informe de este error");console.log("some error "+b+" "+c);console.log(a)}})}})});a("#registrar-pregunta").click(function(){var b=a(this).attr("data-form-id");swal({html:!0,title:"Confirmaci\xF3n",text:"<strong>Nota importante!</strong>: Est\xE1 registrando una nueva pregunta en el formulario, \xBFdesea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"S\xED, Crear!"},function(c){if(c){a.ajax({method:"POST",url:"../managers/dphpforms/dphpforms_form_updater.php",contentType:"application/json",dataType:"text",data:JSON.stringify({function:"create_pregunta",form_id:b,json_pregunta:a("#json_pregunta").val()}),success:function success(b){b=JSON.parse(b);console.log(b);if(0==b.status){alert("Creada");a("#json_pregunta").val("")}else if(-1==b.status){alert("Formulario inexistente o JSON-pregunta vacio")}},error:function error(a,b,c){alert("Informe de este error");console.log("some error "+b+" "+c);console.log(a)}})}})});a("#actualizar-orden").click(function(){var b=a(this).attr("data-form-id");console.log("FormID: "+b);swal({html:!0,title:"Confirmaci\xF3n",text:"<strong>Nota importante!</strong>: Est\xE1 actualizando el orden de las pregunta, \xBFdesea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"S\xED, Actualizar!"},function(c){if(c){a.ajax({method:"POST",url:"../managers/dphpforms/dphpforms_form_updater.php",contentType:"application/json",dataType:"text",data:JSON.stringify({function:"update_positions",form_id:b,ordenamiento:a("#ordenamiento").val()}),success:function success(a){console.log(a)},error:function error(a,b,c){alert("Informe de este error");console.log("some error "+b+" "+c);console.log(a)}})}})});a(".btn-remove-form").click(function(){var b=a(this).attr("data-form-name"),c=a(this).attr("data-form-id");swal({html:!0,title:"Confirmaci\xF3n",text:"<strong>Nota importante!</strong>: Est\xE1 eliminando el formulario <strong><i>"+b+"</i></strong>, \xBFdesea continuar?, tenga en consideraci\xF3n que los alias asociados a las preguntas del formulario no ser\xE1n eliminados.",type:"warning",showCancelButton:!0,confirmButtonText:"S\xED, Eliminar!"},function(b){if(b){a.get("../managers/dphpforms/dphpforms_form_updater.php?function=delete_form&id_form="+c,function(a){var b=a;if(0==b.status){swal({title:"Informaci\xF3n",text:"Eliminado",type:"success"},function(){window.location.href=window.location.href})}else if(-1==b.status){swal("Error!",b.message,"error")}})}})});a(".btn-remove-alias").click(function(){var b=a(this).attr("data-form-alias"),c=a(this).attr("data-form-id");swal({html:!0,title:"Confirmaci\xF3n",text:"<strong>Nota importante!</strong>: Est\xE1 eliminando el alias <strong><i>"+b+"</i></strong>, \xBFdesea continuar?, tenga en consideraci\xF3n que cualquier consulta que haga uso de este alias dejar\xE1 de funcionar.",type:"warning",showCancelButton:!0,confirmButtonText:"S\xED, Eliminar!"},function(b){if(b){a.get("../managers/dphpforms/dphpforms_form_updater.php?function=delete_alias&id_alias="+c,function(a){var b=a;if(0==b.status){swal({title:"Informaci\xF3n",text:"Eliminado",type:"success"},function(){window.location.href=window.location.href})}else if(-1==b.status){swal("Error!",b.message,"error")}})}})});a("#actualizar-disparadores").click(function(){var b=a(this).attr("data-disparadores-id");swal({html:!0,title:"Confirmaci\xF3n",text:"<strong>Nota importante!</strong>: Est\xE1 actualizando este disparador de comportamientos, \xBFdesea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"S\xED, Actualizar!"},function(c){if(c){a.ajax({method:"POST",url:"../managers/dphpforms/dphpforms_form_updater.php",contentType:"application/json",dataType:"text",data:JSON.stringify({function:"update_disparadores",disparadores_id:b,disparadores:a("#disparadores-"+b).val()}),success:function success(a){a=JSON.parse(a);if(0==a.status){alert("Actualizado")}else if(-1==a.status){alert("Bloque de disparadores inexistente")}},error:function error(a,b,c){alert("Informe de este error");console.log("some error "+b+" "+c);console.log(a)}})}})});a("#cargar-afectaciones").click(function(){var b=parseInt(a("#alias-list option:selected").data("id")),c=parseInt(a("#form-info").data("id"));a.ajax({method:"POST",url:"../managers/dphpforms/v2/dphpforms_api.php",contentType:"application/json",dataType:"json",data:JSON.stringify({function:"get_records_reverse_new_field_update",params:[b,c]}),success:function success(b){a("#salida-afectaciones").text(b.data_response)},error:function error(a,b,c){alert("Informe de este error");console.log("some error "+b+" "+c);console.log(a)}})});a("#aplicar-accion").click(function(){var b=parseInt(a("#alias-list option:selected").data("id")),c=parseInt(a("#form-info").data("id")),d=a("#mantenimiento-valor-por-defecto").val();a.ajax({method:"POST",url:"../managers/dphpforms/v2/dphpforms_api.php",contentType:"application/json",dataType:"json",data:JSON.stringify({function:"reverse_new_field_update",params:[c,b,d]}),success:function success(b){a("#salida-afectaciones").text(b.data_response)},error:function error(a,b,c){alert("Informe de este error");console.log("some error "+b+" "+c);console.log(a)}})});a("#verificacion").change(function(){console.log(a(this).is(":checked"));if(!0==a(this).is(":checked")){a("#aplicar-accion").show()}else{a("#aplicar-accion").hide()}});a("#add_rule").click(function(){var b=parseInt(a("#preg_a_id").val()),c=parseInt(a("#rule_id").val()),d=parseInt(a("#preg_b_id").val()),e=parseInt(a("#form-info").data("id"));console.log("entra");a.ajax({method:"POST",url:"../managers/dphpforms/v2/dphpforms_api.php",contentType:"application/json",dataType:"json",data:JSON.stringify({function:"add_new_form_rule",params:[e,b,c,d]}),success:function success(){alert("Registrada")},error:function error(a,b,c){alert("Error registrando");console.log("some error "+b+" "+c);console.log(a)}})})}}});
//# sourceMappingURL=dphpforms_form_editor.min.js.map
