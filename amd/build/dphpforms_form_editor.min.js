define(["jquery","block_ases/bootstrap","block_ases/sweetalert","block_ases/jqueryui","block_ases/select2"],function(t,o,a,e,r){return{init:function(){function o(t){for(var o="",a=t.indexOf("?");a<t.length;a++)o+=t[a];return o.replace(/#[a-zA-z]+_[a-zA-z]+/i,"")}t("#dphpforms-redirect-new-form").click(function(){window.location.href="dphpforms_form_builder.php"+o(window.location.href)}),t("#dphpforms-redirect-adm-alias").click(function(){window.location.href="dphpforms_alias_editor.php"+o(window.location.href)}),t("#dphpforms-redirect-adm-forms").click(function(){window.location.href="dphpforms_form_editor.php"+o(window.location.href)}),t("#dphpforms-redirect-new-pregu").click(function(){window.location.href="dphpforms_form_creator_pregunta.php"+o(window.location.href)+"&form_id="+t(this).attr("data-form-id")}),t("#dphpforms-redirect-adm-disparadores").click(function(){window.location.href="dphpforms_form_editor_comportamientos.php"+o(window.location.href)+"&form_id="+t(this).attr("data-form-id")}),t(".btn-editor-form").click(function(){window.location.href="dphpforms_form_editor_preguntas.php"+o(window.location.href)+"&form_id="+t(this).attr("data-form-id")}),t(".btn-editor-permiso").click(function(){window.location.href="dphpforms_form_editor_permiso.php"+o(window.location.href)+"&permiso_id="+t(this).attr("data-permiso-id")}),t(".btn-editor-pregunta").click(function(){window.location.href="dphpforms_form_editor_pregunta.php"+o(window.location.href)+"&pregunta_id="+t(this).attr("data-pregunta-id")}),t("#actualizar-permiso").click(function(){var o=t(this).attr("data-permiso-id");swal({html:!0,title:"Confirmación",text:"<strong>Nota importante!</strong>: Está actualizando este permiso, ¿desea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, Actualizar!"},function(a){a&&t.ajax({method:"POST",url:"../managers/dphpforms/dphpforms_form_updater.php",contentType:"application/json",dataType:"text",data:JSON.stringify({function:"update_permiso",permiso_id:o,permisos:t("#permisos").val()}),success:function(t){0==(t=JSON.parse(t)).status?alert("Actualizado"):-1==t.status&&alert("Permiso vacio o inexistente")},error:function(t,o,a){alert("Informe de este error"),console.log("some error "+o+" "+a),console.log(t)}})})}),t("#actualizar-enunciado").click(function(){var o=t(this).attr("data-pregunta-id");swal({html:!0,title:"Confirmación",text:"<strong>Nota importante!</strong>: Está actualizando el enunciado, ¿desea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, Actualizar!"},function(a){a&&t.ajax({method:"POST",url:"../managers/dphpforms/dphpforms_form_updater.php",contentType:"application/json",dataType:"text",data:JSON.stringify({function:"update_pregunta_enunciado",pregunta_id:o,enunciado:t("#enunciado").val()}),success:function(t){0==(t=JSON.parse(t)).status?alert("Actualizado"):-1==t.status&&alert("Pregunta inexistente")},error:function(t,o,a){alert("Informe de este error"),console.log("some error "+o+" "+a),console.log(t)}})})}),t("#actualizar-atributos").click(function(){var o=t(this).attr("data-pregunta-id");swal({html:!0,title:"Confirmación",text:"<strong>Nota importante!</strong>: Está actualizando los atributos, ¿desea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, Actualizar!"},function(a){a&&t.ajax({method:"POST",url:"../managers/dphpforms/dphpforms_form_updater.php",contentType:"application/json",dataType:"text",data:JSON.stringify({function:"update_pregunta_atributos",pregunta_id:o,atributos:t("#atributos").val()}),success:function(t){0==(t=JSON.parse(t)).status?alert("Actualizado"):-1==t.status&&alert("Pregunta inexistente")},error:function(t,o,a){alert("Informe de este error"),console.log("some error "+o+" "+a),console.log(t)}})})}),t("#actualizar-opciones").click(function(){var o=t(this).attr("data-pregunta-id");swal({html:!0,title:"Confirmación",text:"<strong>Nota importante!</strong>: Está las opciones de esta pregunta, ¿desea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, Actualizar!"},function(a){a&&t.ajax({method:"POST",url:"../managers/dphpforms/dphpforms_form_updater.php",contentType:"application/json",dataType:"text",data:JSON.stringify({function:"update_pregunta_opciones",pregunta_id:o,opciones:t("#opciones").val()}),success:function(t){t=JSON.parse(t),console.log(t),0==t.status?alert("Actualizado"):-1==t.status&&alert("Pregunta inexistente")},error:function(t,o,a){alert("Informe de este error"),console.log("some error "+o+" "+a),console.log(t)}})})}),t("#registrar-pregunta").click(function(){var o=t(this).attr("data-form-id");swal({html:!0,title:"Confirmación",text:"<strong>Nota importante!</strong>: Está registrando una nueva pregunta en el formulario, ¿desea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, Crear!"},function(a){a&&t.ajax({method:"POST",url:"../managers/dphpforms/dphpforms_form_updater.php",contentType:"application/json",dataType:"text",data:JSON.stringify({function:"create_pregunta",form_id:o,json_pregunta:t("#json_pregunta").val()}),success:function(o){o=JSON.parse(o),console.log(o),0==o.status?(alert("Creada"),t("#json_pregunta").val("")):-1==o.status&&alert("Formulario inexistente o JSON-pregunta vacio")},error:function(t,o,a){alert("Informe de este error"),console.log("some error "+o+" "+a),console.log(t)}})})}),t("#actualizar-orden").click(function(){var o=t(this).attr("data-form-id");console.log("FormID: "+o),swal({html:!0,title:"Confirmación",text:"<strong>Nota importante!</strong>: Está actualizando el orden de las pregunta, ¿desea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, Actualizar!"},function(a){a&&t.ajax({method:"POST",url:"../managers/dphpforms/dphpforms_form_updater.php",contentType:"application/json",dataType:"text",data:JSON.stringify({function:"update_positions",form_id:o,ordenamiento:t("#ordenamiento").val()}),success:function(t){console.log(t)},error:function(t,o,a){alert("Informe de este error"),console.log("some error "+o+" "+a),console.log(t)}})})}),t(".btn-remove-form").click(function(){var o=t(this).attr("data-form-name"),a=t(this).attr("data-form-id");swal({html:!0,title:"Confirmación",text:"<strong>Nota importante!</strong>: Está eliminando el formulario <strong><i>"+o+"</i></strong>, ¿desea continuar?, tenga en consideración que los alias asociados a las preguntas del formulario no serán eliminados.",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, Eliminar!"},function(o){o&&t.get("../managers/dphpforms/dphpforms_form_updater.php?function=delete_form&id_form="+a,function(t){var o=t;0==o.status?swal({title:"Información",text:"Eliminado",type:"success"},function(){window.location.href=window.location.href}):-1==o.status&&swal("Error!",o.message,"error")})})}),t(".btn-remove-alias").click(function(){var o=t(this).attr("data-form-alias"),a=t(this).attr("data-form-id");swal({html:!0,title:"Confirmación",text:"<strong>Nota importante!</strong>: Está eliminando el alias <strong><i>"+o+"</i></strong>, ¿desea continuar?, tenga en consideración que cualquier consulta que haga uso de este alias dejará de funcionar.",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, Eliminar!"},function(o){o&&t.get("../managers/dphpforms/dphpforms_form_updater.php?function=delete_alias&id_alias="+a,function(t){var o=t;0==o.status?swal({title:"Información",text:"Eliminado",type:"success"},function(){window.location.href=window.location.href}):-1==o.status&&swal("Error!",o.message,"error")})})}),t("#actualizar-disparadores").click(function(){var o=t(this).attr("data-disparadores-id");swal({html:!0,title:"Confirmación",text:"<strong>Nota importante!</strong>: Está actualizando este disparador de comportamientos, ¿desea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, Actualizar!"},function(a){a&&t.ajax({method:"POST",url:"../managers/dphpforms/dphpforms_form_updater.php",contentType:"application/json",dataType:"text",data:JSON.stringify({function:"update_disparadores",disparadores_id:o,disparadores:t("#disparadores-"+o).val()}),success:function(t){0==(t=JSON.parse(t)).status?alert("Actualizado"):-1==t.status&&alert("Bloque de disparadores inexistente")},error:function(t,o,a){alert("Informe de este error"),console.log("some error "+o+" "+a),console.log(t)}})})}),t("#cargar-afectaciones").click(function(){let o=parseInt(t("#alias-list option:selected").data("id")),a=parseInt(t("#form-info").data("id"));t.ajax({method:"POST",url:"../managers/dphpforms/v2/dphpforms_api.php",contentType:"application/json",dataType:"json",data:JSON.stringify({function:"get_records_reverse_new_field_update",params:[o,a]}),success:function(o){t("#salida-afectaciones").text(o.data_response)},error:function(t,o,a){alert("Informe de este error"),console.log("some error "+o+" "+a),console.log(t)}})}),t("#aplicar-accion").click(function(){let o=parseInt(t("#alias-list option:selected").data("id")),a=parseInt(t("#form-info").data("id")),e=t("#mantenimiento-valor-por-defecto").val();t.ajax({method:"POST",url:"../managers/dphpforms/v2/dphpforms_api.php",contentType:"application/json",dataType:"json",data:JSON.stringify({function:"reverse_new_field_update",params:[a,o,e]}),success:function(o){t("#salida-afectaciones").text(o.data_response)},error:function(t,o,a){alert("Informe de este error"),console.log("some error "+o+" "+a),console.log(t)}})}),t("#verificacion").change(function(){console.log(t(this).is(":checked")),1==t(this).is(":checked")?t("#aplicar-accion").show():t("#aplicar-accion").hide()}),t("#add_rule").click(function(){let o=parseInt(t("#preg_a_id").val()),a=parseInt(t("#rule_id").val()),e=parseInt(t("#preg_b_id").val()),r=parseInt(t("#form-info").data("id"));console.log("entra"),t.ajax({method:"POST",url:"../managers/dphpforms/v2/dphpforms_api.php",contentType:"application/json",dataType:"json",data:JSON.stringify({function:"add_new_form_rule",params:[r,o,a,e]}),success:function(t){alert("Registrada")},error:function(t,o,a){alert("Error registrando"),console.log("some error "+o+" "+a),console.log(t)}})})}}});