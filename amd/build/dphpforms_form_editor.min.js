define(["jquery","block_ases/bootstrap","block_ases/sweetalert","block_ases/jqueryui","block_ases/select2"],function(a,b,c,d,e){return{init:function(){function b(a){for(var b=a.indexOf("?"),c="",d=b;d<a.length;d++)c+=a[d];return c.replace(/#[a-zA-z]+_[a-zA-z]+/i,"")}a("#dphpforms-redirect-new-form").click(function(){window.location.href="dphpforms_form_builder.php"+b(window.location.href)}),a("#dphpforms-redirect-adm-alias").click(function(){window.location.href="dphpforms_alias_editor.php"+b(window.location.href)}),a("#dphpforms-redirect-adm-forms").click(function(){window.location.href="dphpforms_form_editor.php"+b(window.location.href)}),a("#dphpforms-redirect-new-pregu").click(function(){window.location.href="dphpforms_form_creator_pregunta.php"+b(window.location.href)+"&form_id="+a(this).attr("data-form-id")}),a(".btn-editor-form").click(function(){window.location.href="dphpforms_form_editor_preguntas.php"+b(window.location.href)+"&form_id="+a(this).attr("data-form-id")}),a(".btn-editor-permiso").click(function(){window.location.href="dphpforms_form_editor_permiso.php"+b(window.location.href)+"&permiso_id="+a(this).attr("data-permiso-id")}),a(".btn-editor-pregunta").click(function(){window.location.href="dphpforms_form_editor_pregunta.php"+b(window.location.href)+"&pregunta_id="+a(this).attr("data-pregunta-id")}),a("#actualizar-permiso").click(function(){var b=a(this).attr("data-permiso-id");swal({html:!0,title:"Confirmación",text:"<strong>Nota importante!</strong>: Está actualizando este permiso, ¿desea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, Actualizar!"},function(c){c&&a.ajax({method:"POST",url:"../managers/dphpforms/dphpforms_form_updater.php",contentType:"application/json",dataType:"text",data:JSON.stringify({"function":"update_permiso",permiso_id:b,permisos:a("#permisos").val()}),success:function(a){a=JSON.parse(a),0==a.status?alert("Actualizado"):a.status==-1&&alert("Permiso vacio o inexistente")},error:function(a,b,c){alert("Informe de este error"),console.log("some error "+b+" "+c),console.log(a)}})})}),a("#actualizar-enunciado").click(function(){var b=a(this).attr("data-pregunta-id");swal({html:!0,title:"Confirmación",text:"<strong>Nota importante!</strong>: Está actualizando el enunciado, ¿desea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, Actualizar!"},function(c){c&&a.ajax({method:"POST",url:"../managers/dphpforms/dphpforms_form_updater.php",contentType:"application/json",dataType:"text",data:JSON.stringify({"function":"update_pregunta_enunciado",pregunta_id:b,enunciado:a("#enunciado").val()}),success:function(a){a=JSON.parse(a),0==a.status?alert("Actualizado"):a.status==-1&&alert("Pregunta inexistente")},error:function(a,b,c){alert("Informe de este error"),console.log("some error "+b+" "+c),console.log(a)}})})}),a("#actualizar-atributos").click(function(){var b=a(this).attr("data-pregunta-id");swal({html:!0,title:"Confirmación",text:"<strong>Nota importante!</strong>: Está actualizando los atributos, ¿desea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, Actualizar!"},function(c){c&&a.ajax({method:"POST",url:"../managers/dphpforms/dphpforms_form_updater.php",contentType:"application/json",dataType:"text",data:JSON.stringify({"function":"update_pregunta_atributos",pregunta_id:b,atributos:a("#atributos").val()}),success:function(a){a=JSON.parse(a),0==a.status?alert("Actualizado"):a.status==-1&&alert("Pregunta inexistente")},error:function(a,b,c){alert("Informe de este error"),console.log("some error "+b+" "+c),console.log(a)}})})}),a("#actualizar-opciones").click(function(){var b=a(this).attr("data-pregunta-id");swal({html:!0,title:"Confirmación",text:"<strong>Nota importante!</strong>: Está las opciones de esta pregunta, ¿desea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, Actualizar!"},function(c){c&&a.ajax({method:"POST",url:"../managers/dphpforms/dphpforms_form_updater.php",contentType:"application/json",dataType:"text",data:JSON.stringify({"function":"update_pregunta_opciones",pregunta_id:b,opciones:a("#opciones").val()}),success:function(a){a=JSON.parse(a),console.log(a),0==a.status?alert("Actualizado"):a.status==-1&&alert("Pregunta inexistente")},error:function(a,b,c){alert("Informe de este error"),console.log("some error "+b+" "+c),console.log(a)}})})}),a("#registrar-pregunta").click(function(){var b=a(this).attr("data-form-id");swal({html:!0,title:"Confirmación",text:"<strong>Nota importante!</strong>: Está registrando una nueva pregunta en el formulario, ¿desea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, Crear!"},function(c){c&&a.ajax({method:"POST",url:"../managers/dphpforms/dphpforms_form_updater.php",contentType:"application/json",dataType:"text",data:JSON.stringify({"function":"create_pregunta",form_id:b,json_pregunta:a("#json_pregunta").val()}),success:function(b){b=JSON.parse(b),console.log(b),0==b.status?(alert("Creada"),a("#json_pregunta").val("")):b.status==-1&&alert("Formulario inexistente o JSON-pregunta vacio")},error:function(a,b,c){alert("Informe de este error"),console.log("some error "+b+" "+c),console.log(a)}})})}),a("#actualizar-orden").click(function(){var b=a(this).attr("data-form-id");console.log("FormID: "+b),swal({html:!0,title:"Confirmación",text:"<strong>Nota importante!</strong>: Está actualizando el orden de las pregunta, ¿desea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, Actualizar!"},function(c){c&&a.ajax({method:"POST",url:"../managers/dphpforms/dphpforms_form_updater.php",contentType:"application/json",dataType:"text",data:JSON.stringify({"function":"update_positions",form_id:b,ordenamiento:a("#ordenamiento").val()}),success:function(a){console.log(a)},error:function(a,b,c){alert("Informe de este error"),console.log("some error "+b+" "+c),console.log(a)}})})}),a(".btn-remove-form").click(function(){var b=a(this).attr("data-form-name"),c=a(this).attr("data-form-id");swal({html:!0,title:"Confirmación",text:"<strong>Nota importante!</strong>: Está eliminando el formulario <strong><i>"+b+"</i></strong>, ¿desea continuar?, tenga en consideración que los alias asociados a las preguntas del formulario no serán eliminados.",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, Eliminar!"},function(b){b&&a.get("../managers/dphpforms/dphpforms_form_updater.php?function=delete_form&id_form="+c,function(a){var b=a;0==b.status?swal({title:"Información",text:"Eliminado",type:"success"},function(){window.location.href=window.location.href}):b.status==-1&&swal("Error!",b.message,"error")})})}),a(".btn-remove-alias").click(function(){var b=a(this).attr("data-form-alias"),c=a(this).attr("data-form-id");swal({html:!0,title:"Confirmación",text:"<strong>Nota importante!</strong>: Está eliminando el alias <strong><i>"+b+"</i></strong>, ¿desea continuar?, tenga en consideración que cualquier consulta que haga uso de este alias dejará de funcionar.",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, Eliminar!"},function(b){b&&a.get("../managers/dphpforms/dphpforms_form_updater.php?function=delete_alias&id_alias="+c,function(a){var b=a;0==b.status?swal({title:"Información",text:"Eliminado",type:"success"},function(){window.location.href=window.location.href}):b.status==-1&&swal("Error!",b.message,"error")})})})}}});