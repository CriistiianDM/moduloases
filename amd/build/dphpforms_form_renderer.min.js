'use strict';define(['jquery','block_ases/bootstrap','block_ases/sweetalert','block_ases/jqueryui','block_ases/select2','block_ases/loading_indicator','block_ases/jquery.scrollTo'],function(b,c,d,f,g,h){return{init:function init(){function l(){return b('#dphpforms_ases_student_code').attr('data-info')}function m(){return b('#dphpforms_block_instance').attr('data-info')}function n(){var v=p('.seg_geo_nivel_riesgo'),w=b('.seg_geo_observaciones').find('textarea').val();if('3'==v){var y={'function':'send_email_dphpforms',student_code:l(),risks:[{name:'Geogr\xE1fico',risk_lvl:v,observation:w}],date:b('.fecha').find('input').val(),url:window.location.href};console.log(JSON.stringify(y)),b.ajax({type:'POST',data:JSON.stringify(y),url:'../managers/pilos_tracking/send_risk_email.php',success:function success(A){console.log(A)},dataType:'text',cache:'false',error:function error(A){console.log(A)}})}}function o(){var v=p('.puntuacion_riesgo_individual'),w=b('.comentarios_individual').find('textarea').val();var y=p('.puntuacion_riesgo_familiar'),A=b('.comentarios_familiar').find('textarea').val(),B=p('.puntuacion_riesgo_academico'),C=b('.comentarios_academico').find('textarea').val(),D=p('.puntuacion_riesgo_economico'),E=b('.comentarios_economico').find('textarea').val(),F=p('.puntuacion_vida_uni'),G=b('.comentarios_vida_uni').find('textarea').val();if('3'==v||'3'==y||'3'==B||'3'==D||'3'==F){var H={'function':'send_email_dphpforms',student_code:l(),risks:[{name:'Individual',risk_lvl:v,observation:w},{name:'Familiar',risk_lvl:y,observation:A},{name:'Acad\xE9mico',risk_lvl:B,observation:C},{name:'Econ\xF3mico',risk_lvl:D,observation:E},{name:'Vida Universitaria',risk_lvl:F,observation:G}],date:b('.fecha').find('input').val(),url:window.location.href};console.log(JSON.stringify(H)),b.ajax({type:'POST',data:JSON.stringify(H),url:'../managers/pilos_tracking/send_risk_email.php',success:function success(I){console.log(I)},dataType:'text',cache:'false',error:function error(I){console.log(I)}})}}function p(u){var v=0;return b(u).find('.opcionesRadio').find('div').each(function(){b(this).find('label').find('input').is(':checked')&&(v=b(this).find('label').find('input').val())}),v}function q(u,v){if('primer_acercamiento'==u&&'insert'==v);else if('primer_acercamiento'==u&&'update'==v);else if('inasistencia'==u&&'insert'==v);else if('inasistencia'==u&&'update'==v){var w=b('.dphpforms-record').find('.in_revisado_profesional').find('.checkbox').find('input[type=checkbox]').prop('checked'),y=b('.dphpforms-record').find('.in_revisado_practicante').find('.checkbox').find('input[type=checkbox]').prop('checked'),A=b('#dphpforms_role_support').attr('data-info');w&&'sistemas'!=A&&(b('.btn-dphpforms-delete-record').remove(),b('.btn-dphpforms-update').remove()),'dir_socioeducativo'==A&&(b('.btn-dphpforms-delete-record').remove(),b('.btn-dphpforms-update').remove())}else if('seguimiento_pares'==u&&'insert'==v);else if('seguimiento_pares'==u&&'update'==v){var w=b('.dphpforms-record').find('.revisado_profesional').find('.checkbox').find('input[type=checkbox]').prop('checked'),y=b('.dphpforms-record').find('.revisado_practicante').find('.checkbox').find('input[type=checkbox]').prop('checked'),A=b('#dphpforms_role_support').attr('data-info');w&&'sistemas'!=A&&(b('.btn-dphpforms-delete-record').remove(),b('.btn-dphpforms-update').remove()),'dir_socioeducativo'==A&&(b('.btn-dphpforms-delete-record').remove(),b('.btn-dphpforms-update').remove())}else if('seguimiento_geografico_'==u&&'insert'==v)b('.seg_geo_origen').find('input').prop('disabled',!1);else if('seguimiento_geografico_'==u&&'update'==v);else if('seguimiento_grupal_'==u&&'insert'==v){var B=b('modal_v2_edit_groupal_tracking').find('input:checked').length,C='',D='';b('#modal_v2_groupal_tracking').find('form').find('.oculto.id_estudiante').find('input').val(''),b('#modal_v2_edit_groupal_tracking').find('form').find('.oculto.id_estudiante').find('input').val(''),b('#modal_v2_edit_groupal_tracking').find('input:checked').each(function(){var F=b(this).parent().parent().find('>:first-child').text(),G=F.split('-');C+=G[0]+','}),b('#modal_v2_groupal_tracking').find('input:checked').each(function(){var F=b(this).parent().parent().find('>:first-child').text(),G=F.split('-');D+=G[0]+','}),b('#modal_v2_edit_groupal_tracking').find('form').find('.oculto.id_estudiante').find('input').val(C.slice(0,-1)),b('#modal_v2_groupal_tracking').find('form').find('.oculto.id_estudiante').find('input').val(D.slice(0,-1))}else'seguimiento_grupal'==u&&'update'==v&&b('#modal_v2_edit_groupal_tracking').find('.btn-dphpforms-delete-record').remove()}function r(u){students_code=u.split(','),console.log('.id_estudiante :'+students_code);var v=[];b('#list_students_attendance_1 > tbody  > tr').each(function(){var y=b(this).children('td').first().html().split('-');v.push(y[0])}),console.log('lista total de id_estudiantes :'+v),console.log('lista de estudiantes seleccin : '+students_code),b.each(students_code,function(w,y){var A=v.indexOf(y);if(-1!=A){var B=b('#list_students_attendance_1 tbody>tr:eq(\''+A+'\')'),C=B.find('td').eq(3).children('input');b('input[type=checkbox][value=\''+C.val()+'\']').prop('checked',!0)}})}function s(u,v){b('.div').removeClass('regla_incumplida'),b('#body_editor').html(''),h.show(),b.get('../managers/dphpforms/dphpforms_forms_core.php?form_id=&record_id='+v,function(w){if(h.hide(),'seguimiento_grupal'==u){b('#modal_v2_edit_groupal_tracking').find('#body_editor').html(''),b('#modal_v2_edit_groupal_tracking').find('#body_editor').append(w);var y=b('#modal_v2_edit_groupal_tracking').find('form').find('.oculto.id_estudiante').find('input').val();t(y)}else{b('#body_editor').append(w);var A=b('#dphpforms_role_support').attr('data-info'),Q=b('#custom_metadata').data('view-name');'report_trackings'==Q&&('sistemas'==A||'profesional_ps'==A||'practicante_ps'==A)&&b('.dphpforms.dphpforms-record.dphpforms-updater').append('<br><br><div class="div-observation col-xs-12 col-sm-12 col-md-12 col-lg-12 comentarios_vida_uni">Observaciones de Practicante/profesional:<br> <textarea id="observation_text" class="form-control " name="observation_text" maxlength="5000"></textarea><br><a id="send_observation" class="btn btn-sm btn-danger btn-dphpforms-univalle btn-dphpforms-send-observation">Enviar observaci\xF3n</a></div>'),b('button.btn.btn-sm.btn-danger.btn-dphpforms-univalle').attr('id','button')}var B=b('#list_grupal_seg_consult').clone().prop('id','list_grupal_seg_consult_1');b('#modal_v2_edit_groupal_tracking').find('form').find('h1').after(B),b('#list_grupal_seg_consult_1 > #list_students_attendance').prop('id','list_students_attendance_1'),b('#list_grupal_seg_consult_1  input[type=checkbox]').prop('checked',!1);var C=b('#modal_v2_edit_groupal_tracking').find('form').find('.oculto.id_estudiante').find('input');void 0!=C.val()&&r(C.val()),b('#permissions_informationr').html('');var D=b('.dphpforms-record').find('.revisado_profesional').find('.checkbox').find('input[type=checkbox]').prop('checked'),E=b('.dphpforms-record').find('.revisado_practicante').find('.checkbox').find('input[type=checkbox]').prop('checked');(D||E)&&b('.dphpforms-record').find('.btn-dphpforms-delete-record').remove();for(var F=JSON.parse(b('#permissions_information').text()),G=0;G<F.behaviors_permissions.length;G++){for(var K,H=F.behaviors_permissions[G].behaviors[0],I=H.behaviors_accessibility,J=0;J<I.length;J++)K=I[J].disabled,'true'==K?K=!0:'false'==K&&(K=!1),b('.dphpforms-record').find('#'+I[J].id).prop('disabled',K),b('.dphpforms-record').find('.'+I[J]['class']).prop('disabled',K);for(var L=H.behaviors_fields_to_remove,J=0;J<L.length;J++)b('.dphpforms-record').find('#'+L[J].id).remove(),b('.dphpforms-record').find('.'+L[J]['class']).remove();for(var M=H.limpiar_to_eliminate,J=0;J<M.length;J++)b('.dphpforms-record').find('.'+M[J]['class']+'.limpiar ').remove()}b('#permissions_informationr').html('');var N=w.indexOf('primer_acercamiento_');-1!=N&&q('primer_acercamiento','update');var O=w.indexOf('seguimiento_de_pares_');-1!=O&&q('seguimiento_pares','update');var P=w.indexOf('inasistencia');-1!=P&&q('inasistencia','update');var P=w.indexOf('seguimiento_grupal');-1!=P&&q('seguimiento_grupal','update')})}function t(u){h.show(),b.ajax({type:'POST',data:{students:u,type:'consult_students_name'},url:'../../../blocks/ases/managers/pilos_tracking/pilos_tracking_report.php',async:!1,success:function success(v){if(h.hide(),''!=v){b('#modal_v2_edit_groupal_tracking').find('#students').remove(),b('#modal_v2_edit_groupal_tracking').find('form').find('h1').after('<hr style="border-color:red"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 estudiantes" id="students"><h3>Estudiantes asistentes:</h3><br>'+v+'<br>')}},dataType:'text',cache:'false',error:function error(){alert('Error al consultar nombres de los estudiantes pertenecientes a un seguimiento grupal'),h.hide()}})}b('input[type=date]').keypress(function(u){u.preventDefault()}),b(document).on('click','.btn-dphpforms-close',function(){b(this).closest('div[class="mymodal"]').fadeOut(300)}),b('.outside').click(function(){var u=b(this);swal({title:'Confirmaci\xF3n de salida',text:'',type:'warning',showCancelButton:!0,confirmButtonText:'Salir'},function(v){v&&(b(u).parent('.mymodal').fadeOut(300),console.log(b(this).parent('.mymodal')))})}),b(document).ready(function(){b('.seg_geo_origen').find('input').prop('disabled',!0)}),b(document).on('change',b('.seg_geo_vive_zona_riesgo').find('label').find('input'),function(){b('.seg_geo_vive_zona_riesgo').find('label').find('input').prop('checked')?b('.seg_geo_origen').find('input').prop('disabled',!1):(b('.seg_geo_origen').find('input').prop('disabled',!0),b('.seg_geo_origen').find('input').prop('checked',!1))}),b('.seg_geo_vive_zona_riesgo').find('label').find('input').change(function(){b('.seg_geo_vive_zona_riesgo').find('label').find('input').prop('checked')?b('.seg_geo_origen').find('input').prop('disabled',!1):(b('.seg_geo_origen').find('input').prop('disabled',!0),b('.seg_geo_origen').find('input').prop('checked',!1))}),b('#button_actualizar_primer_acercamiento').click(function(){b('div').removeClass('regla_incumplida'),b.get('../managers/dphpforms/dphpforms_forms_core.php?form_id=primer_acercamiento&record_id='+b(this).attr('data-record-id'),function(u){b('#primer_acercamiento_form').html(''),b('#primer_acercamiento_form').append(u),b('#modal_primer_acercamiento').fadeIn(300);var v=b('#modal_primer_acercamiento').find('.pa_id_creado_por').find('input').val();b.get('../managers/user_management/api_user.php?function=get_user_information&arg='+v,function(w){var y=w.firstname+' '+w.lastname;b('#modal_primer_acercamiento').find('h1').after('<hr style="border-color:#444;"><h3>Registrado por: <strong>'+y+'</strong></h3>');var A=b('.dphpforms-record .btn-dphpforms-univalle').length;2==A?b('.dphpforms-record .btn-dphpforms-univalle:eq(0)').css({'margin-left':b('.dphpforms-updater').width()/2-72+'px'}):3==A&&b('.dphpforms-record .btn-dphpforms-univalle:eq(0)').css({'margin-left':b('.dphpforms-updater').width()/2-72-30+'px'})})})}),b('#button_update_geographic_track').click(function(){b('div').removeClass('regla_incumplida'),b.get('../managers/dphpforms/dphpforms_forms_core.php?form_id=seguimiento_geografico&record_id='+b(this).attr('data-record-id'),function(u){b('#seguimiento_geografico_form').html(''),b('#seguimiento_geografico_form').append(u),b('#modal_seguimiento_geografico').fadeIn(300),b('.seg_geo_vive_zona_riesgo').find('label').find('input').prop('checked')?b('.seg_geo_origen').find('input').prop('disabled',!1):(b('.seg_geo_origen').find('input').prop('disabled',!0),b('.seg_geo_origen').find('input').prop('checked',!1));var v=b('.dphpforms-record .btn-dphpforms-univalle').length;2==v&&b('.dphpforms-record .btn-dphpforms-univalle:eq(0)').css({'margin-left':b('.dphpforms-updater').width()/2-72+'px'}),3==v&&b('.dphpforms-record .btn-dphpforms-univalle:eq(0)').css({'margin-left':b('.dphpforms-updater').width()/2-72-30+'px'})})});b(document).on('click','.btn.btn-danger.btn-univalle.btn-card',function(){var u=b(this).attr('data-container'),v=b('#'+u).height();if(0==v)b(this).find('span').not('.protected').removeClass('glyphicon-chevron-left'),b(this).find('span').not('.protected').addClass('glyphicon-chevron-down'),b(this).find('.open-close-icon').removeClass('glyphicon-chevron-left'),b(this).find('.open-close-icon').addClass('glyphicon-chevron-down');else{for(;0>v;)v=b('#'+u).height();b(this).find('span').not('.protected').removeClass('glyphicon-chevron-down'),b(this).find('span').not('.protected').addClass('glyphicon-chevron-left'),b(this).find('.open-close-icon').removeClass('glyphicon-chevron-down'),b(this).find('.open-close-icon').addClass('glyphicon-chevron-left')}}),b('#button_add_v2_track').on('click',function(){b('div').removeClass('regla_incumplida'),b('#modal_v2_peer_tracking').fadeIn(300),b('.id_estudiante').find('input').val(l());var u=b('#current_user_id').val();b('.id_creado_por').find('input').val(u),b('.id_instancia').find('input').val(m()),b('.id_monitor').find('input').val(b('#dphpforms_monitor_id').data('info')),b('.id_practicante').find('input').val(b('#dphpforms_practicing_id').data('info')),b('.id_profesional').find('input').val(b('#dphpforms_professional_id').data('info')),b('.username').find('input').val(b('#dphpforms_username').data('info'))}),b('.btn-inasistencia').on('click',function(){var u=b(this).attr('data-info');if('inasistencia'==u){b('#modal_inasistencia').fadeOut(300),b('#modal_v2_peer_tracking').fadeIn(300),b('.id_estudiante').find('input').val(l());var v=b('#current_user_id').val();b('.id_creado_por').find('input').val(v),b('.id_instancia').find('input').val(m()),b('.id_monitor').find('input').val(b('#dphpforms_monitor_id').data('info')),b('.id_practicante').find('input').val(b('#dphpforms_practicing_id').data('info')),b('.id_profesional').find('input').val(b('#dphpforms_professional_id').data('info')),b('.username').find('input').val(b('#dphpforms_username').data('info'))}else{b('#modal_v2_peer_tracking').fadeOut(300),b('#modal_inasistencia').fadeIn(300),b('.in_id_estudiante').find('input').val(l());var v=b('#current_user_id').val();b('.in_id_creado_por').find('input').val(v),b('.in_id_instancia').find('input').val(m()),b('.in_id_monitor').find('input').val(b('#dphpforms_monitor_id').data('info')),b('.in_id_practicante').find('input').val(b('#dphpforms_practicing_id').data('info')),b('.in_id_profesional').find('input').val(b('#dphpforms_professional_id').data('info')),b('.in_username').find('input').val(b('#dphpforms_username').data('info'))}}),b('#button_add_groupal_track').on('click',function(){b('#modal_v2_edit_groupal_tracking').find('#body_editor').html(''),b('div').removeClass('regla_incumplida'),b('#modal_v2_groupal_tracking').fadeIn(300);var u=b('#current_user_id').val();b('.id_creado_por').find('input').val(u),b('.id_estudiante').find('input').val('-'),b('#list_grupal_seg_consult  input[type=checkbox]').prop('checked',!1)}),b('#button_primer_acercamiento').on('click',function(){b('div').removeClass('regla_incumplida'),b('#modal_primer_acercamiento').fadeIn(300),b('.primer_acerca_id_estudiante_field').find('input').val(l());var u=b('#current_user_id').val();b('.primer_acerca_id_creado_por_field').find('input').val(u)}),b('#button_add_geographic_track').on('click',function(){b('div').removeClass('regla_incumplida'),b('#modal_seguimiento_geografico').fadeIn(300),b('.seg_geo_id_estudiante').find('input').val(l());var u=b('#current_user_id').val();b('.seg_geo_id_creado_por').find('input').val(u),b('.seg_geo_vive_zona_riesgo').find('label').find('input').prop('checked')?b('.seg_geo_origen').find('input').prop('disabled',!1):(b('.seg_geo_origen').find('input').prop('disabled',!0),b('.seg_geo_origen').find('input').prop('checked',!1))}),b('.mymodal-close').click(function(){b(this).parent().parent().parent().parent().fadeOut(300),b('#list_grupal_seg_consult_1').remove()}),b(document).on('click','.dphpforms-peer-record',function(){if(!b(this).attr('disabled')){var u=b(this).attr('data-record-id');s('seguimiento_pares',u),b('#modal_v2_edit_peer_tracking').fadeIn(300)}}),b(document).on('click','.dphpforms-groupal-record',function(){if(!b(this).attr('disabled')){var u=b(this).attr('data-record-id');s('seguimiento_grupal',u),b('#modal_v2_edit_groupal_tracking').fadeIn(300)}}),b('.limpiar').click(function(){b(this).parent().find('.opcionesRadio').find('div').each(function(){b(this).find('label').find('input').prop('checked',!1)})}),b(document).on('click','.limpiar',function(){b(this).parent().find('.opcionesRadio').find('div').each(function(){b(this).find('label').find('input').prop('checked',!1)})}),b(document).on('submit','.dphpforms',function(u){u.preventDefault();var v=b(this).attr('id').indexOf('seguimiento_geografico_'),w=b(this).attr('id').indexOf('seguimiento_grupal_');-1!=v&&q('seguimiento_geografico_','insert'),-1!=w&&(b('#modal_v2_edit_groupal_tracking').find('form').find('.oculto.id_estudiante').find('input').val(''),q('seguimiento_grupal_','insert')),b('.seg_geo_origen').find('input').prop('disabled',!1),b(':disabled').prop('disabled',!1);var y=new FormData(this),A=b(this),B=A.attr('action');'procesador.php'==A.attr('action')&&(B='../managers/dphpforms/procesador.php');var C=b('#dphpforms_record_id').val();b(A).find('button').prop('disabled',!0),b(A).find('a').attr('disabled',!0),h.show(),b.ajax({type:'POST',url:B,data:y,cache:!1,contentType:!1,processData:!1,success:function success(D){h.hide();var E=JSON.parse(D);if(0==E.status){b.get('../managers/pilos_tracking/api_pilos_tracking.php?function=update_last_user_risk&arg='+l()+'&rid='+C,function(Q){console.log(Q)});var F='';if('Stored'==E.message){F='Almacenado, se va a descargar una copia de seguridad, por favor cons\xE9rvela, informar si no se genera la copia.';var M=E.data,N=null,O=null;b.ajax({url:'../managers/dphpforms/dphpforms_get_record.php?record_id='+M,dataType:'json',async:!1,success:function success(Q){O=Q,N=JSON.stringify(Q)}});var P=b('#dphpforms_fullname').data('info')+' - '+O.record.alias+' - Fecha '+O.record.fecha_hora_registro+'.json',G=new Blob([N],{type:'.json'});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(G,P);else{var H=document.createElement('a'),I=URL.createObjectURL(G);H.href=I,H.download=P,document.body.appendChild(H),H.click(),setTimeout(function(){document.body.removeChild(H),window.URL.revokeObjectURL(I)},0)}}else'Updated'==E.message&&(F='Actualizado, las fechas e \xEDconos se actualizar\xE1n al recargar la p\xE1gina. ');o(),n(),swal({title:'Informaci\xF3n',text:F,type:'success'},function(){'Updated'==E.message?(b('#dphpforms-peer-record-'+b('#dphpforms_record_id').val()).stop().animate({backgroundColor:'rgb(175, 255, 173)'},400).animate({backgroundColor:'#f5f5f5'},4e3),b('#body_editor').html('')):(b('.dphpforms-response').trigger('reset'),b('#body_editor').html(''))}),b('#modal_v2_edit_peer_tracking').fadeOut(300),b('#modal_v2_peer_tracking').fadeOut(300),b('#modal_primer_acercamiento').fadeOut(300),b('#modal_seguimiento_geografico').fadeOut(300),b(A).find('button').prop('disabled',!1),b(A).find('a').attr('disabled',!1)}else if(-6==E.status){b(A).find('button').prop('disabled',!1),b(A).find('a').attr('disabled',!1);var F='';if('The value of the field is out of range'==E.message){var J=E.data.id;b('div').removeClass('regla_incumplida'),b('.div-'+J).addClass('regla_incumplida'),F='Ups!, el campo marcado en rojo tiene una fecha por fuera del siguiente rango: '+E.data.min+' hasta '+E.data.max}b('#modal_v2_edit_peer_tracking').scrollTo('.div-'+J,{duration:1500,offset:-150}),b('#modal_v2_peer_tracking').scrollTo('.div-'+J,{duration:1500,offset:-150}),b('#modal_primer_acercamiento').scrollTo('.div-'+J,{duration:1500,offset:-150}),b('#modal_seguimiento_geografico').scrollTo('.div-'+J,{duration:1500,offset:-150}),b('#modal_v2_groupal_tracking').scrollTo('.div-'+J,{duration:1500,offset:-150}),swal('Alerta',F,'warning')}else if(-5==E.status){b(A).find('button').prop('disabled',!1),b(A).find('a').attr('disabled',!1);var F='';if('The field is static and can not be changed'==E.message){var J=E.data;b('div').removeClass('regla_incumplida'),b('.div-'+J).addClass('regla_incumplida'),F='Ups!, el campo marcado en rojo est\xE1 definido como est\xE1tico y por lo tanto debe mantener el mismo valor, si no logra ver el campo marcado en rojo informe de este incidente.'}b('#modal_v2_edit_peer_tracking').scrollTo('.div-'+J,{duration:1500,offset:-150}),b('#modal_v2_peer_tracking').scrollTo('.div-'+J,{duration:1500,offset:-150}),b('#modal_primer_acercamiento').scrollTo('.div-'+J,{duration:1500,offset:-150}),b('#modal_seguimiento_geografico').scrollTo('.div-'+J,{duration:1500,offset:-150}),b('#modal_v2_groupal_tracking').scrollTo('.div-'+J,{duration:1500,offset:-150}),swal('Alerta',F,'warning')}else if(-4==E.status){b(A).find('button').prop('disabled',!1),b(A).find('a').attr('disabled',!1);var F='';if('Field does not match with the regular expression'==E.message){var J=E.data.id;b('div').removeClass('regla_incumplida'),b('.div-'+J).addClass('regla_incumplida'),F='Ups!, el campo marcado en rojo no cumple con el patr\xF3n esperado('+E.data.human_readable+'). Ejemplo: '+E.data.example}b('#modal_v2_edit_peer_tracking').scrollTo('.div-'+J,{duration:1500,offset:-150}),b('#modal_v2_peer_tracking').scrollTo('.div-'+J,{duration:1500,offset:-150}),b('#modal_primer_acercamiento').scrollTo('.div-'+J,{duration:1500,offset:-150}),b('#modal_seguimiento_geografico').scrollTo('.div-'+J,{duration:1500,offset:-150}),b('#modal_v2_groupal_tracking').scrollTo('.div-'+J,{duration:1500,offset:-150}),swal('Alerta',F,'warning')}else if(-3==E.status){b(A).find('button').prop('disabled',!1),b(A).find('a').attr('disabled',!1);var F='';if('Field cannot be null'==E.message){var J=E.data;b('div').removeClass('regla_incumplida'),b('.div-'+J).addClass('regla_incumplida'),F='Ups!, los campos que se acaban de colorear en rojo no pueden estar vac\xEDos, si no logra ver ning\xFAn campo, informe de este incidente.'}b('#modal_v2_edit_peer_tracking').scrollTo('.div-'+J,{duration:1500,offset:-150}),b('#modal_v2_peer_tracking').scrollTo('.div-'+J,{duration:1500,offset:-150}),b('#modal_primer_acercamiento').scrollTo('.div-'+J,{duration:1500,offset:-150}),b('#modal_seguimiento_geografico').scrollTo('.div-'+J,{duration:1500,offset:-150}),b('#modal_v2_groupal_tracking').scrollTo('.div-'+J,{duration:1500,offset:-150}),swal('Alerta',F,'warning')}else if(-2==E.status){b(A).find('button').prop('disabled',!1),b(A).find('a').attr('disabled',!1);var F='';if('Without changes'==E.message)F='No hay cambios que registrar',b('#modal_v2_edit_peer_tracking').fadeOut(300),b('#modal_v2_peer_tracking').fadeOut(300),b('#modal_primer_acercamiento').fadeOut(300),b('#modal_seguimiento_geografico').fadeOut(300);else if('Unfulfilled rules'==E.message){var K=E.data.id_form_pregunta_a,L=E.data.id_form_pregunta_b;b('div').removeClass('regla_incumplida'),b('.div-'+K).addClass('regla_incumplida'),b('.div-'+L).addClass('regla_incumplida'),F='Ups!, revise los campos que se acaban de colorear en rojo.'}b('#modal_v2_edit_peer_tracking').scrollTo('.div-'+K,{duration:1500,offset:-150}),b('#modal_v2_peer_tracking').scrollTo('.div-'+K,{duration:1500,offset:-150}),b('#modal_primer_acercamiento').scrollTo('.div-'+K,{duration:1500,offset:-150}),b('#modal_seguimiento_geografico').scrollTo('.div-'+K,{duration:1500,offset:-150}),b('#modal_v2_groupal_tracking').scrollTo('.div-'+K,{duration:1500,offset:-150}),swal('Alerta',F,'warning')}else-1==E.status&&(console.log(D),swal('ERROR!','Ups!, informe de este error','error'))},error:function error(D){h.hide(),console.log(D),swal('Error!','Ups!, informe de este error','error'),b(A).find('button').prop('disabled',!1),b(A).find('a').attr('disabled',!1)}})}),b(document).on('click','.btn-dphpforms-delete-record',function(){swal({title:'Confirmaci\xF3n',text:'Est\xE1 eliminando este registro, \xBFdesea continuar?',type:'warning',showCancelButton:!0,confirmButtonText:'S\xED, Eliminar!'},function(u){if(u){var v=b('.btn-dphpforms-delete-record').attr('data-record-id');h.show(),b.get('../managers/dphpforms/dphpforms_delete_record.php?record_id='+v,function(w){h.hide();var y=w;0==y.status?(console.log(y),b.get('../managers/pilos_tracking/api_pilos_tracking.php?function=update_last_user_risk&arg='+l()+'&rid='+v,function(A){console.log(A)}),setTimeout(function(){swal({title:'Informaci\xF3n',text:'Eliminado',type:'success'},function(){b('.mymodal').fadeOut(300),b('#dphpforms-peer-record-'+v).stop().animate({backgroundColor:'rgb(175, 255, 173)'},400).animate({backgroundColor:'#e32423'},4e3,function(){b('#dphpforms-peer-record-'+v).remove()})})},500)):-1==y.status&&setTimeout(function(){swal('Error!',y.message,'error')},500)})}})})}}});