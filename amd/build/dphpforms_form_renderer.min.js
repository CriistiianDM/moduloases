'use strict';define(['jquery','block_ases/bootstrap','block_ases/sweetalert','block_ases/jqueryui','block_ases/select2'],function(a){return{init:function init(){function g(h,i){a.get('../managers/dphpforms/dphpforms_forms_core.php?form_id='+h+'&record_id='+i,function(j){a('#body_editor').html(''),a('#body_editor').append(j),a('#permissions_informationr').html('');var k=a('.dphpforms-record').find('.revisado_profesional').find('.checkbox').find('input[type=checkbox]').prop('checked'),l=a('.dphpforms-record').find('.revisado_practicante').find('.checkbox').find('input[type=checkbox]').prop('checked');(k||l)&&a('.dphpforms-record').find('.btn-dphpforms-delete-record').remove();for(var m=JSON.parse(a('#permissions_information').text()),n=0;n<m.behaviors_permissions.length;n++){for(var r,o=m.behaviors_permissions[n].behaviors[0],p=o.behaviors_accessibility,q=0;q<p.length;q++)r=p[q].disabled,'true'==r?r=!0:'false'==r&&(r=!1),a('.dphpforms-record').find('#'+p[q].id).prop('disabled',r),a('.dphpforms-record').find('.'+p[q]['class']).prop('disabled',r);for(var s=o.behaviors_fields_to_remove,q=0;q<s.length;q++)a('.dphpforms-record').find('#'+s[q].id).remove(),a('.dphpforms-record').find('.'+s[q]['class']).remove();for(var t=o.limpiar_to_eliminate,q=0;q<t.length;q++)a('.dphpforms-record').find('.'+t[q]['class']+'.limpiar ').remove()}a('#permissions_informationr').html('')})}a('.btn.btn-danger.btn-univalle.btn-card').click(function(){var h=a(this).attr('data-container'),i=a('#'+h).height();if(0==i)a(this).find('span').removeClass('glyphicon-chevron-left'),a(this).find('span').addClass('glyphicon-chevron-down');else{for(;0>i;)i=a('#'+h).height();a(this).find('span').removeClass('glyphicon-chevron-down'),a(this).find('span').addClass('glyphicon-chevron-left')}}),a('#button_add_v2_track').on('click',function(){a('#modal_v2_peer_tracking').fadeIn(300);var h=a('#codigo').val();a('.id_estudiante').find('input').val(h);var i=a('#current_user_id').val();a('.id_creado_por').find('input').val(i)}),a('.mymodal-close').click(function(){a(this).parent().parent().parent().parent().fadeOut(300)}),a('.dphpforms-peer-record').on('click',function(){var h=a(this).attr('data-record-id');g('seguimiento_pares',h),a('#modal_v2_edit_peer_tracking').fadeIn(300)}),a('.limpiar').click(function(){a(this).parent().find('.opcionesRadio').find('div').each(function(){a(this).find('label').find('input').prop('checked',!1)})}),a(document).on('click','.limpiar',function(){a(this).parent().find('.opcionesRadio').find('div').each(function(){a(this).find('label').find('input').prop('checked',!1)})}),a(document).on('submit','.dphpforms',function(h){h.preventDefault();var i=new FormData(this),j=a(this),k=j.attr('action');'procesador.php'==j.attr('action')&&(k='../managers/dphpforms/procesador.php'),a.ajax({type:'POST',url:k,data:i,cache:!1,contentType:!1,processData:!1,success:function success(l){var m=JSON.parse(l);if(console.log(l),0==m.status){var n='';'Stored'==m.message?n='Almacenado':'Updated'==m.message&&(n='Actualizado'),swal({title:'Informaci\xF3n',text:n,type:'success'},function(){'Updated'==m.message&&a('#dphpforms-peer-record-'+a('#dphpforms_record_id').val()).stop().animate({backgroundColor:'rgb(175, 255, 173)'},400).animate({backgroundColor:'#f5f5f5'},4e3)}),a('.dphpforms-response').trigger('reset'),a('#modal_v2_edit_peer_tracking').fadeOut(300),a('#modal_v2_peer_tracking').fadeOut(300)}else if(-2==m.status){var n='';'Without changes'==m.message?n='No hay cambios que registrar':'Unfulfilled rules'==m.message&&(n='Revise los valores ingresados'),swal('Alerta',n,'warning')}else-1==m.status&&(console.log(l),swal('ERROR!','Oops!, informe de este error','error'))},error:function error(l){console.log(l),swal('Error!','Oops!, informe de este error','error')}})}),a(document).on('click','.btn-dphpforms-delete-record',function(){swal({title:'Confirmaci\xF3n',text:'Est\xE1 eliminando este registro, \xBFdesea continuar?',type:'warning',showCancelButton:!0,confirmButtonText:'S\xED, Eliminar!'},function(h){if(h){var i=a('.btn-dphpforms-delete-record').attr('data-record-id');a.get('../managers/dphpforms/dphpforms_delete_record.php?record_id='+i,function(j){var k=j;0==k.status?swal({title:'Informaci\xF3n',text:'Eliminado',type:'success'},function(){a('#modal_v2_edit_peer_tracking').fadeOut(300),a('#dphpforms-peer-record-'+i).remove()}):-1==k.status&&swal('Error!',k.message,'error')})}})})}}});