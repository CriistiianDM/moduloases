define(["jquery","block_ases/bootstrap","block_ases/sweetalert","block_ases/jqueryui","block_ases/select2","block_ases/loading_indicator","block_ases/jquery.scrollTo"],function(e,o,i,a,n,t,r){return{init:function(){function o(){return e("#dphpforms_ases_student_code").attr("data-info")}function i(){return e("#dphpforms_block_instance").attr("data-info")}function a(o){var i=0;return e(o).find(".opcionesRadio").find("div").each(function(){e(this).find("label").find("input").is(":checked")&&(i=e(this).find("label").find("input").val())}),i}function n(o,i){if("primer_acercamiento"==o&&"insert"==i);else if("primer_acercamiento"==o&&"update"==i);else if("inasistencia"==o&&"insert"==i);else if("inasistencia"==o&&"update"==i){var a=e(".dphpforms-record").find(".in_revisado_profesional").find(".checkbox").find("input[type=checkbox]").prop("checked"),n=(e(".dphpforms-record").find(".in_revisado_practicante").find(".checkbox").find("input[type=checkbox]").prop("checked"),e("#dphpforms_role_support").attr("data-info"));a&&"sistemas"!=n&&(e(".btn-dphpforms-delete-record").remove(),e(".btn-dphpforms-update").remove()),"dir_socioeducativo"==n&&(e(".btn-dphpforms-delete-record").remove(),e(".btn-dphpforms-update").remove())}else if("seguimiento_pares"==o&&"insert"==i);else if("seguimiento_pares"==o&&"update"==i){a=e(".dphpforms-record").find(".revisado_profesional").find(".checkbox").find("input[type=checkbox]").prop("checked"),e(".dphpforms-record").find(".revisado_practicante").find(".checkbox").find("input[type=checkbox]").prop("checked"),n=e("#dphpforms_role_support").attr("data-info");a&&"sistemas"!=n&&(e(".btn-dphpforms-delete-record").remove(),e(".btn-dphpforms-update").remove()),"dir_socioeducativo"==n&&(e(".btn-dphpforms-delete-record").remove(),e(".btn-dphpforms-update").remove())}else if("seguimiento_geografico_"==o&&"insert"==i)e(".seg_geo_origen").find("input").prop("disabled",!1);else if("seguimiento_geografico_"==o&&"update"==i);else if("seguimiento_grupal_"==o&&"insert"==i){e("modal_v2_edit_groupal_tracking").find("input:checked").length;var t="",r="";e("#modal_v2_groupal_tracking").find("form").find(".oculto.id_estudiante").find("input").val(""),e("#modal_v2_edit_groupal_tracking").find("form").find(".oculto.id_estudiante").find("input").val(""),e("#modal_v2_edit_groupal_tracking").find("input:checked").each(function(o){var i=e(this).parent().parent().find(">:first-child").text().split("-");t+=i[0]+","}),e("#modal_v2_groupal_tracking").find("input:checked").each(function(o){var i=e(this).parent().parent().find(">:first-child").text().split("-");r+=i[0]+","}),e("#modal_v2_edit_groupal_tracking").find("form").find(".oculto.id_estudiante").find("input").val(t.slice(0,-1)),e("#modal_v2_groupal_tracking").find("form").find(".oculto.id_estudiante").find("input").val(r.slice(0,-1))}else if("seguimiento_grupal"==o&&"update"==i){let o=e("#dphpforms_role_support").attr("data-info");"profesional_ps"!=o&&"sistemas"!=o&&e("#modal_v2_edit_groupal_tracking").find(".btn-dphpforms-delete-record").remove()}}function r(o,i){e(".div").removeClass("regla_incumplida"),e("#body_editor").html(""),t.show(),e.get("../managers/dphpforms/dphpforms_forms_core.php?form_id=&record_id="+i,function(a){if(t.hide(),"seguimiento_grupal"==o){e("#modal_v2_edit_groupal_tracking").find("#body_editor").html(""),e("#modal_v2_edit_groupal_tracking").find("#body_editor").append(a),function(o){t.show(),e.ajax({type:"POST",data:{students:o,type:"consult_students_name"},url:"../../../blocks/ases/managers/pilos_tracking/pilos_tracking_report.php",async:!1,success:function(o){if(t.hide(),""!=o){var i='<hr style="border-color:red"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 estudiantes" id="students"><h3>Estudiantes asistentes:</h3><br>'+o+"<br>";e("#modal_v2_edit_groupal_tracking").find("#students").remove(),e("#modal_v2_edit_groupal_tracking").find("form").find("h1").after(i)}},dataType:"text",cache:"false",error:function(e){alert("Error al consultar nombres de los estudiantes pertenecientes a un seguimiento grupal"),t.hide()}})}(e("#modal_v2_edit_groupal_tracking").find("form").find(".oculto.id_estudiante").find("input").val())}else{e("#body_editor").append(a);var r=e("#dphpforms_role_support").attr("data-info");"report_trackings"==e("#custom_metadata").data("view-name")&&("sistemas"!=r&&"profesional_ps"!=r&&"practicante_ps"!=r||e(".dphpforms.dphpforms-record.dphpforms-updater").append('<br><br><div class="div-observation col-xs-12 col-sm-12 col-md-12 col-lg-12 comentarios_vida_uni">Observaciones de Practicante/profesional:<br> <textarea id="observation_text" class="form-control " name="observation_text" maxlength="5000"></textarea><br><a id="send_observation" class="btn btn-sm btn-danger btn-dphpforms-univalle btn-dphpforms-send-observation">Enviar observación</a></div>')),e("button.btn.btn-sm.btn-danger.btn-dphpforms-univalle").attr("id","button")}var d=e("#list_grupal_seg_consult").clone().prop("id","list_grupal_seg_consult_1");e("#modal_v2_edit_groupal_tracking").find("form").find("h1").after(d),e("#list_grupal_seg_consult_1 > #list_students_attendance").prop("id","list_students_attendance_1"),e("#list_grupal_seg_consult_1  input[type=checkbox]").prop("checked",!1);var s=e("#modal_v2_edit_groupal_tracking").find("form").find(".oculto.id_estudiante").find("input");null!=s.val()&&function(o){students_code=o.split(","),console.log(".id_estudiante :"+students_code);var i=[];e("#list_students_attendance_1 > tbody  > tr").each(function(o){var a=e(this).children("td").first().html().split("-");i.push(a[0])}),console.log("lista total de id_estudiantes :"+i),console.log("lista de estudiantes seleccin : "+students_code),e.each(students_code,function(o,a){var n=i.indexOf(a);if(-1!=n){var t=e("#list_students_attendance_1 tbody>tr:eq('"+n+"')").find("td").eq(3).children("input");e("input[type=checkbox][value='"+t.val()+"']").prop("checked",!0)}})}(s.val()),e("#permissions_informationr").html("");var l=e(".dphpforms-record").find(".revisado_profesional").find(".checkbox").find("input[type=checkbox]").prop("checked"),c=e(".dphpforms-record").find(".revisado_practicante").find(".checkbox").find("input[type=checkbox]").prop("checked");(l||c)&&e(".dphpforms-record").find(".btn-dphpforms-delete-record").remove();for(var p=JSON.parse(e("#permissions_information").text()),_=0;_<p.behaviors_permissions.length;_++){for(var f=p.behaviors_permissions[_].behaviors[0],u=f.behaviors_accessibility,m=0;m<u.length;m++){var g=u[m].disabled;"true"==g?g=!0:"false"==g&&(g=!1),e(".dphpforms-record").find("#"+u[m].id).prop("disabled",g),e(".dphpforms-record").find("."+u[m].class).prop("disabled",g)}var v=f.behaviors_fields_to_remove;for(m=0;m<v.length;m++)e(".dphpforms-record").find("#"+v[m].id).remove(),e(".dphpforms-record").find("."+v[m].class).remove();var h=f.limpiar_to_eliminate;for(m=0;m<h.length;m++)e(".dphpforms-record").find("."+h[m].class+".limpiar ").remove()}e("#dphpforms_record_id[value="+i+"]").parent().parent().append('<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">                     <hr style="border-color:#424242;margin-bottom:3px;">                </div>'),e.ajax({type:"POST",data:JSON.stringify({function:"get_pretty_record_history",params:[i]}),url:"../managers/dphpforms/v2/dphpforms_api.php",async:!1,dataType:"json",cache:"false",success:function(o){let a=JSON.parse(o.data_response);e("#dphpforms_record_id[value="+i+"]").parent().parent().append('<div class="col-xs-3 col-sm-3 col-md-3 col-lg-3" style="font-size:0.9em;"><strong style="color:#424242;">Fecha y hora</strong></div><div class="col-xs-4 col-sm-4 col-md-4 col-lg-4" style="font-size:0.9em;"><strong style="color:#424242;">Usuario que realiza la acci&oacute;n</strong></div><div class="col-xs-1 col-sm-1 col-md-1 col-lg-1" style="font-size:0.9em;"><strong style="color:#424242;">Acci&oacute;n</strong></div><div class="col-xs-3 col-sm-3 col-md-3 col-lg-3" style="font-size:0.9em;"><strong style="color:#424242;">Estado</strong></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">                             <hr style="border-color:#424242; margin-top:0px; margin-bottom:10px;">                        </div>'),a.forEach(o=>{let a='<div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">'+o.fecha_hora_registro+"</div>",n='<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">'+o.usuario_moodle+"</div>",t="";switch(o.accion){case"INSERT":t="CREA";break;case"UPDATE":t="ACTUALIZA";break;case"DELETE":t="ELIMINA";break;default:t="DESCONOCIDA"}let r='<div class="col-xs-1 col-sm-1 col-md-1 col-lg-1">'+t+"</div>",d='<div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">'+("0"!==o.cod_retorno?"( No completado )":"( Completado )")+"</div>";e("#dphpforms_record_id[value="+i+"]").parent().parent().append('<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"  style="padding:0px;font-size:0.9em;">'+a+n+r+d+"</div>")})},error:function(e){console.log(e)}}),e("#permissions_informationr").html(""),-1!=a.indexOf("primer_acercamiento_")&&n("primer_acercamiento","update"),-1!=a.indexOf("seguimiento_de_pares_")&&n("seguimiento_pares","update"),-1!=a.indexOf("inasistencia")&&n("inasistencia","update"),-1!=a.indexOf("seguimiento_grupal")&&n("seguimiento_grupal","update"),e("input[type=date]").keypress(function(e){e.preventDefault()})})}e("input[type=date]").keypress(function(e){e.preventDefault()}),e(document).on("click",".btn-dphpforms-close",function(){e(this).closest('div[class="mymodal"]').fadeOut(300)}),e(".outside").click(function(){var o=e(this);swal({title:"Confirmación de salida",text:"",type:"warning",showCancelButton:!0,confirmButtonText:"Salir"},function(i){i&&(e(o).parent(".mymodal").fadeOut(300),console.log(e(this).parent(".mymodal")))})}),e(document).ready(function(){e(".seg_geo_origen").find("input").prop("disabled",!0)}),e(document).on("change",e(".seg_geo_vive_zona_riesgo").find("label").find("input"),function(){e(".seg_geo_vive_zona_riesgo").find("label").find("input").prop("checked")?e(".seg_geo_origen").find("input").prop("disabled",!1):(e(".seg_geo_origen").find("input").prop("disabled",!0),e(".seg_geo_origen").find("input").prop("checked",!1))}),e(".seg_geo_vive_zona_riesgo").find("label").find("input").change(function(){e(".seg_geo_vive_zona_riesgo").find("label").find("input").prop("checked")?e(".seg_geo_origen").find("input").prop("disabled",!1):(e(".seg_geo_origen").find("input").prop("disabled",!0),e(".seg_geo_origen").find("input").prop("checked",!1))}),e("#button_update_geographic_track").click(function(){e("div").removeClass("regla_incumplida"),e.get("../managers/dphpforms/dphpforms_forms_core.php?form_id=seguimiento_geografico&record_id="+e(this).attr("data-record-id"),function(o){e("#seguimiento_geografico_form").html(""),e("#seguimiento_geografico_form").append(o),e("#modal_seguimiento_geografico").fadeIn(300),e(".seg_geo_vive_zona_riesgo").find("label").find("input").prop("checked")?e(".seg_geo_origen").find("input").prop("disabled",!1):(e(".seg_geo_origen").find("input").prop("disabled",!0),e(".seg_geo_origen").find("input").prop("checked",!1));var i=e(".dphpforms-record .btn-dphpforms-univalle").length;2==i&&e(".dphpforms-record .btn-dphpforms-univalle:eq(0)").css({"margin-left":e(".dphpforms-updater").width()/2-72+"px"}),3==i&&e(".dphpforms-record .btn-dphpforms-univalle:eq(0)").css({"margin-left":e(".dphpforms-updater").width()/2-72-30+"px"})})}),e(document).on("click",".btn.btn-danger.btn-univalle.btn-card",function(){let o=e(this).attr("data-container"),i=e("#"+o).height();if(0==i)e(this).find("span").not(".protected").removeClass("glyphicon-chevron-left"),e(this).find("span").not(".protected").addClass("glyphicon-chevron-down"),e(this).find(".open-close-icon").removeClass("glyphicon-chevron-left"),e(this).find(".open-close-icon").addClass("glyphicon-chevron-down");else{for(;i<0;)i=e("#"+o).height();e(this).find("span").not(".protected").removeClass("glyphicon-chevron-down"),e(this).find("span").not(".protected").addClass("glyphicon-chevron-left"),e(this).find(".open-close-icon").removeClass("glyphicon-chevron-down"),e(this).find(".open-close-icon").addClass("glyphicon-chevron-left")}}),e(".btn-inasistencia").on("click",function(){if("inasistencia"==e(this).attr("data-info")){e("#modal_inasistencia").fadeOut(300),e("#modal_v2_peer_tracking").fadeIn(300),e(".id_estudiante").find("input").val(o());var a=e("#current_user_id").val();e(".id_creado_por").find("input").val(a),e(".id_instancia").find("input").val(i()),e(".id_monitor").find("input").val(e("#dphpforms_monitor_id").data("info")),e(".id_practicante").find("input").val(e("#dphpforms_practicing_id").data("info")),e(".id_profesional").find("input").val(e("#dphpforms_professional_id").data("info")),e(".username").find("input").val(e("#dphpforms_username").data("info"))}else{e("#modal_v2_peer_tracking").fadeOut(300),e("#modal_inasistencia").fadeIn(300),e(".in_id_estudiante").find("input").val(o());a=e("#current_user_id").val();e(".in_id_creado_por").find("input").val(a),e(".in_id_instancia").find("input").val(i()),e(".in_id_monitor").find("input").val(e("#dphpforms_monitor_id").data("info")),e(".in_id_practicante").find("input").val(e("#dphpforms_practicing_id").data("info")),e(".in_id_profesional").find("input").val(e("#dphpforms_professional_id").data("info")),e(".in_username").find("input").val(e("#dphpforms_username").data("info"))}}),e("#button_add_groupal_track").on("click",function(){e("#modal_v2_edit_groupal_tracking").find("#body_editor").html(""),e("div").removeClass("regla_incumplida"),e("#modal_v2_groupal_tracking").fadeIn(300);var o=e("#current_user_id").val();e(".id_creado_por").find("input").val(o),e(".id_estudiante").find("input").val("-"),e("#list_grupal_seg_consult  input[type=checkbox]").prop("checked",!1)}),e("#button_add_geographic_track").on("click",function(){e("div").removeClass("regla_incumplida"),e("#modal_seguimiento_geografico").fadeIn(300),e(".seg_geo_id_estudiante").find("input").val(o());var i=e("#current_user_id").val();e(".seg_geo_id_creado_por").find("input").val(i),e(".seg_geo_vive_zona_riesgo").find("label").find("input").prop("checked")?e(".seg_geo_origen").find("input").prop("disabled",!1):(e(".seg_geo_origen").find("input").prop("disabled",!0),e(".seg_geo_origen").find("input").prop("checked",!1))}),e(".mymodal-close").click(function(){e(this).parent().parent().parent().parent().fadeOut(300),e("#list_grupal_seg_consult_1").remove()}),e(document).on("click",".dphpforms-peer-record",function(){e(this).attr("disabled")||(r("seguimiento_pares",e(this).attr("data-record-id")),e("#modal_v2_edit_peer_tracking").fadeIn(300))}),e(document).on("click",".dphpforms-groupal-record",function(){e(this).attr("disabled")||(r("seguimiento_grupal",e(this).attr("data-record-id")),e("#modal_v2_edit_groupal_tracking").fadeIn(300))}),e(".limpiar").click(function(){e(this).parent().find(".opcionesRadio").find("div").each(function(){e(this).find("label").find("input").prop("checked",!1)})}),e(document).on("click",".limpiar",function(){e(this).parent().find(".opcionesRadio").find("div").each(function(){e(this).find("label").find("input").prop("checked",!1)})}),e(document).on("submit",".dphpforms",function(i){i.preventDefault();var r=e(this).attr("id").indexOf("seguimiento_geografico_"),d=e(this).attr("id").indexOf("seguimiento_grupal_");-1!=r&&n("seguimiento_geografico_","insert"),-1!=d&&(e("#modal_v2_edit_groupal_tracking").find("form").find(".oculto.id_estudiante").find("input").val(""),n("seguimiento_grupal_","insert")),e(".seg_geo_origen").find("input").prop("disabled",!1),e(":disabled").prop("disabled",!1);var s=new FormData(this),l=e(this),c=l.attr("action");"procesador.php"==l.attr("action")&&(c="../managers/dphpforms/procesador.php");var p=e("#dphpforms_record_id").val();e(l).find("button").prop("disabled",!0),e(l).find("a").attr("disabled",!0),t.show(),e.ajax({type:"POST",url:c,data:s,cache:!1,contentType:!1,processData:!1,success:function(i){t.hide();var n=JSON.parse(i);if(0==n.status){e.get("../managers/pilos_tracking/api_pilos_tracking.php?function=update_last_user_risk&arg="+o()+"&rid="+p,function(e){console.log(e)});var r="";if("Stored"==n.message){r="Almacenado, se va a descargar una copia de seguridad, por favor consérvela, informar si no se genera la copia.";let o=n.data,i=null,a=null;e.ajax({url:"../managers/dphpforms/dphpforms_get_record.php?record_id="+o,dataType:"json",async:!1,success:function(e){a=e,i=JSON.stringify(e)}});let t=null;e.ajax({url:"../managers/dphpforms/v2/dphpforms_api.php",type:"POST",data:JSON.stringify({function:"get_k",params:[o]}),dataType:"json",async:!1,success:function(e){t=e.data_response}});let l=e("#dphpforms_fullname").data("info")+" - "+a.record.alias+"-"+o+"-k-"+t+" - Fecha "+a.record.fecha_hora_registro+".json";var d=new Blob([i],{type:".json"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(d,l);else{var s=document.createElement("a"),c=URL.createObjectURL(d);s.href=c,s.download=l,document.body.appendChild(s),s.click(),setTimeout(function(){document.body.removeChild(s),window.URL.revokeObjectURL(c)},0)}}else"Updated"==n.message&&(r="Actualizado, las fechas e íconos se actualizarán al recargar la página. ");!function(i){var n=a(".puntuacion_riesgo_individual"),t=e(".comentarios_individual").find("textarea").val(),r=a(".puntuacion_riesgo_familiar"),d=e(".comentarios_familiar").find("textarea").val(),s=a(".puntuacion_riesgo_academico"),l=e(".comentarios_academico").find("textarea").val(),c=a(".puntuacion_riesgo_economico"),p=e(".comentarios_economico").find("textarea").val(),_=a(".puntuacion_vida_uni"),f=e(".comentarios_vida_uni").find("textarea").val();if("3"==n||"3"==r||"3"==s||"3"==c||"3"==_){var u={function:"send_email_dphpforms",student_code:o(),risks:[{name:"Individual",risk_lvl:n,observation:t},{name:"Familiar",risk_lvl:r,observation:d},{name:"Académico",risk_lvl:s,observation:l},{name:"Económico",risk_lvl:c,observation:p},{name:"Vida Universitaria",risk_lvl:_,observation:f}],date:e(".fecha").find("input").val(),url:window.location.href};console.log(JSON.stringify(u)),e.ajax({type:"POST",data:JSON.stringify(u),url:"../managers/pilos_tracking/send_risk_email.php",success:function(e){console.log(e)},dataType:"text",cache:"false",error:function(e){console.log(e)}})}}(),function(i){var n=a(".seg_geo_nivel_riesgo"),t=e(".seg_geo_observaciones").find("textarea").val();if("3"==n){var r={function:"send_email_dphpforms",student_code:o(),risks:[{name:"Geográfico",risk_lvl:n,observation:t}],date:e(".fecha").find("input").val(),url:window.location.href};console.log(JSON.stringify(r)),e.ajax({type:"POST",data:JSON.stringify(r),url:"../managers/pilos_tracking/send_risk_email.php",success:function(e){console.log(e)},dataType:"text",cache:"false",error:function(e){console.log(e)}})}}(),swal({title:"Información",text:r,type:"success"},function(){"Updated"==n.message?(e("#dphpforms-peer-record-"+e("#dphpforms_record_id").val()).stop().animate({backgroundColor:"rgb(175, 255, 173)"},400).animate({backgroundColor:"#f5f5f5"},4e3),e("#body_editor").html("")):(e(".dphpforms-response").trigger("reset"),e("#body_editor").html(""))}),e("#modal_v2_edit_peer_tracking").fadeOut(300),e("#modal_v2_peer_tracking").fadeOut(300),e("#modal_primer_acercamiento").fadeOut(300),e("#modal_seguimiento_geografico").fadeOut(300),e(l).find("button").prop("disabled",!1),e(l).find("a").attr("disabled",!1)}else if(-6==n.status){e(l).find("button").prop("disabled",!1),e(l).find("a").attr("disabled",!1);r="";if("The value of the field is out of range"==n.message){var _=n.data.id;e("div").removeClass("regla_incumplida"),e(".div-"+_).addClass("regla_incumplida"),r="Ups!, el campo marcado en rojo tiene una fecha por fuera del siguiente rango: "+n.data.min+" hasta "+n.data.max}e("#modal_v2_edit_peer_tracking").scrollTo(".div-"+_,{duration:1500,offset:-150}),e("#modal_v2_peer_tracking").scrollTo(".div-"+_,{duration:1500,offset:-150}),e("#modal_primer_acercamiento").scrollTo(".div-"+_,{duration:1500,offset:-150}),e("#modal_seguimiento_geografico").scrollTo(".div-"+_,{duration:1500,offset:-150}),e("#modal_v2_groupal_tracking").scrollTo(".div-"+_,{duration:1500,offset:-150}),swal("Alerta",r,"warning")}else if(-5==n.status){e(l).find("button").prop("disabled",!1),e(l).find("a").attr("disabled",!1);r="";if("The field is static and can not be changed"==n.message){_=n.data;e("div").removeClass("regla_incumplida"),e(".div-"+_).addClass("regla_incumplida"),r="Ups!, el campo marcado en rojo está definido como estático y por lo tanto debe mantener el mismo valor, si no logra ver el campo marcado en rojo informe de este incidente."}e("#modal_v2_edit_peer_tracking").scrollTo(".div-"+_,{duration:1500,offset:-150}),e("#modal_v2_peer_tracking").scrollTo(".div-"+_,{duration:1500,offset:-150}),e("#modal_primer_acercamiento").scrollTo(".div-"+_,{duration:1500,offset:-150}),e("#modal_seguimiento_geografico").scrollTo(".div-"+_,{duration:1500,offset:-150}),e("#modal_v2_groupal_tracking").scrollTo(".div-"+_,{duration:1500,offset:-150}),swal("Alerta",r,"warning")}else if(-4==n.status){e(l).find("button").prop("disabled",!1),e(l).find("a").attr("disabled",!1);r="";if("Field does not match with the regular expression"==n.message){_=n.data.id;e("div").removeClass("regla_incumplida"),e(".div-"+_).addClass("regla_incumplida"),r="Ups!, el campo marcado en rojo no cumple con el patrón esperado("+n.data.human_readable+"). Ejemplo: "+n.data.example}e("#modal_v2_edit_peer_tracking").scrollTo(".div-"+_,{duration:1500,offset:-150}),e("#modal_v2_peer_tracking").scrollTo(".div-"+_,{duration:1500,offset:-150}),e("#modal_primer_acercamiento").scrollTo(".div-"+_,{duration:1500,offset:-150}),e("#modal_seguimiento_geografico").scrollTo(".div-"+_,{duration:1500,offset:-150}),e("#modal_v2_groupal_tracking").scrollTo(".div-"+_,{duration:1500,offset:-150}),swal("Alerta",r,"warning")}else if(-3==n.status){e(l).find("button").prop("disabled",!1),e(l).find("a").attr("disabled",!1);r="";if("Field cannot be null"==n.message){_=n.data;e("div").removeClass("regla_incumplida"),e(".div-"+_).addClass("regla_incumplida"),r="Ups!, los campos que se acaban de colorear en rojo no pueden estar vacíos, si no logra ver ningún campo, informe de este incidente."}e("#modal_v2_edit_peer_tracking").scrollTo(".div-"+_,{duration:1500,offset:-150}),e("#modal_v2_peer_tracking").scrollTo(".div-"+_,{duration:1500,offset:-150}),e("#modal_primer_acercamiento").scrollTo(".div-"+_,{duration:1500,offset:-150}),e("#modal_seguimiento_geografico").scrollTo(".div-"+_,{duration:1500,offset:-150}),e("#modal_v2_groupal_tracking").scrollTo(".div-"+_,{duration:1500,offset:-150}),swal("Alerta",r,"warning")}else if(-2==n.status){e(l).find("button").prop("disabled",!1),e(l).find("a").attr("disabled",!1);r="";if("Without changes"==n.message)r="No hay cambios que registrar",e("#modal_v2_edit_peer_tracking").fadeOut(300),e("#modal_v2_peer_tracking").fadeOut(300),e("#modal_primer_acercamiento").fadeOut(300),e("#modal_seguimiento_geografico").fadeOut(300);else if("Unfulfilled rules"==n.message){var f=n.data.id_form_pregunta_a,u=n.data.id_form_pregunta_b;e("div").removeClass("regla_incumplida"),e(".div-"+f).addClass("regla_incumplida"),e(".div-"+u).addClass("regla_incumplida"),r="Ups!, revise los campos que se acaban de colorear en rojo."}e("#modal_v2_edit_peer_tracking").scrollTo(".div-"+f,{duration:1500,offset:-150}),e("#modal_v2_peer_tracking").scrollTo(".div-"+f,{duration:1500,offset:-150}),e("#modal_primer_acercamiento").scrollTo(".div-"+f,{duration:1500,offset:-150}),e("#modal_seguimiento_geografico").scrollTo(".div-"+f,{duration:1500,offset:-150}),e("#modal_v2_groupal_tracking").scrollTo(".div-"+f,{duration:1500,offset:-150}),swal("Alerta",r,"warning")}else-1==n.status&&(console.log(i),swal("ERROR!","Ups!, informe de este error","error"))},error:function(o){t.hide(),console.log(o),swal("Error!","Ups!, informe de este error","error"),e(l).find("button").prop("disabled",!1),e(l).find("a").attr("disabled",!1)}})}),e(document).on("click",".btn-dphpforms-delete-record",function(){swal({title:"Confirmación",text:"Está eliminando este registro, ¿desea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, Eliminar!"},function(i){if(i){var a=e(".btn-dphpforms-delete-record").attr("data-record-id");t.show(),e.get("../managers/dphpforms/dphpforms_delete_record.php?record_id="+a,function(i){t.hide();var n=i;0==n.status?(console.log(n),e.get("../managers/pilos_tracking/api_pilos_tracking.php?function=update_last_user_risk&arg="+o()+"&rid="+a,function(e){console.log(e)}),setTimeout(function(){swal({title:"Información",text:"Eliminado",type:"success"},function(){e(".mymodal").fadeOut(300),e("#dphpforms-peer-record-"+a).stop().animate({backgroundColor:"rgb(175, 255, 173)"},400).animate({backgroundColor:"#e32423"},4e3,function(){e("#dphpforms-peer-record-"+a).remove()})})},500)):-1==n.status&&setTimeout(function(){swal("Error!",n.message,"error")},500)})}})})}}});