define(["jquery","block_ases/bootstrap","block_ases/datatables","block_ases/sweetalert","block_ases/select2","block_ases/jqueryui","block_ases/moment"],function(e,t,a,o,i,n,r){return{init:function(){function t(t,a){var o=0;e("#"+t+" tbody tr").not(":first").each(function(){var t=e(this).find("td:eq("+a+")");null!=t.val()&&(o+=parseFloat(t.html().replace(",",".")))}),e("#"+t+" tfoot tr").find("td:eq("+a+")").html(o.toFixed(2).toString().replace(".",","))}function a(a,o){var i=window.location.href,n=i.split("monitorid=");const r=i.split("instanceid=");void 0===a&&(a=0),void 0===o&&(o=0),e.ajax({type:"POST",url:"../managers/tracking_time_control/load_hours_report.php",data:{initial_hour:a,final_hour:o,monitorid:n[1],instanceid:r=r},success:function(a){if(""==a)e("#div_hours").empty(),e("#div_hours").append("<h2>No existen registros de seguimientos en el dia de hoy</h2>");else{e("#div_hours").empty(),e("#div_hours").append('<table id="tableHours"  class="display" cellspacing="0" width="100%" ><thead><thead><tfoot id="hours_foot"></tfoot></table>');e("#tableHours").DataTable(a);e("#hours_foot").append(' <tr><td><strong>Total : </strong></td><td id="total_hour"></td><td></td></tr>'),t("tableHours",1),t("tableHours",2),e("#div_hours #show_details").css("cursor","pointer")}},dataType:"json",cache:"false",error:function(e){alert("Error al cargar horas trabajadas")}})}e(document).ready(function(){e("#table_hours").DataTable(),e(".period_date").datepicker({dateFormat:"yy-mm-dd"}),a(),e("#consult").click(function(){var t=e("#beginning_date").val(),o=e("#ending_date").val(),i=function(e,t){var a=/^\d{4}\-(0?[1-9]|1[012])\-(0?[1-9]|[12][0-9]|3[01])$/,o=a.exec(e),i=a.exec(t);return""==e&&""==t?"Debe llenar todos los campos":""==e||""==t?"Debe introducir la fecha de inicio y fin del período":null===o?"La fecha de inicio no sigue el patrón yyyy-mm-dd. Ejemplo: 2017-10-20":null===i?"La fecha de fin no sigue el patrón yyyy-mm-dd. Ejemplo: 2017-10-20":e==t?"La fecha de inicio y de fin deben ser diferentes":"success"}(t,o);"success"!=i?swal({title:"Advertencia",text:i,type:"warning",html:!0}):a(t,o)})})}}});