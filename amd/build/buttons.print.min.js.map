{"version":3,"sources":["../src/buttons.print.js"],"names":["factory","define","amd","$","window","document","exports","module","root","fn","dataTable","require","Buttons","jQuery","DataTable","_link","createElement","_styleToAbs","el","clone","nodeName","toLowerCase","href","_relToAbs","outerHTML","linkHost","host","indexOf","pathname","protocol","search","ext","buttons","print","className","text","dt","i18n","action","e","button","config","data","exportData","extend","decodeEntities","exportOptions","exportInfo","addRow","d","tag","str","i","ien","length","html","table","node","header","body","footer","win","open","close","head","title","each","innerHTML","messageTop","messageBottom","addClass","img","setAttribute","getAttribute","customize","setTimeout","autoPrint"],"mappings":"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","sourcesContent":["/*!\r\n * Print button for Buttons and DataTables.\r\n * 2016 SpryMedia Ltd - datatables.net/license\r\n */\r\n\r\n(function( factory ){\r\n\tif ( typeof define === 'function' && define.amd ) {\r\n\t\t// AMD\r\n\t\tdefine( ['jquery', 'block_ases/jquery.dataTables', 'block_ases/dataTables.buttons'], function ( $ ) {\r\n\t\t\treturn factory( $, window, document );\r\n\t\t} );\r\n\t}\r\n\telse if ( typeof exports === 'object' ) {\r\n\t\t// CommonJS\r\n\t\tmodule.exports = function (root, $) {\r\n\t\t\tif ( ! root ) {\r\n\t\t\t\troot = window;\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! $ || ! $.fn.dataTable ) {\r\n\t\t\t\t$ = require('block_ases/jquery.dataTables')(root, $).$;\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! $.fn.dataTable.Buttons ) {\r\n\t\t\t\trequire('block_ases/dataTables.buttons')(root, $);\r\n\t\t\t}\r\n\r\n\t\t\treturn factory( $, root, root.document );\r\n\t\t};\r\n\t}\r\n\telse {\r\n\t\t// Browser\r\n\t\tfactory( jQuery, window, document );\r\n\t}\r\n}(function( $, window, document, undefined ) {\r\n'use strict';\r\nvar DataTable = $.fn.dataTable;\r\n\r\n\r\nvar _link = document.createElement( 'a' );\r\n\r\n/**\r\n * Clone link and style tags, taking into account the need to change the source\r\n * path.\r\n *\r\n * @param  {node}     el Element to convert\r\n */\r\nvar _styleToAbs = function( el ) {\r\n\tvar url;\r\n\tvar clone = $(el).clone()[0];\r\n\tvar linkHost;\r\n\r\n\tif ( clone.nodeName.toLowerCase() === 'link' ) {\r\n\t\tclone.href = _relToAbs( clone.href );\r\n\t}\r\n\r\n\treturn clone.outerHTML;\r\n};\r\n\r\n/**\r\n * Convert a URL from a relative to an absolute address so it will work\r\n * correctly in the popup window which has no base URL.\r\n *\r\n * @param  {string} href URL\r\n */\r\nvar _relToAbs = function( href ) {\r\n\t// Assign to a link on the original page so the browser will do all the\r\n\t// hard work of figuring out where the file actually is\r\n\t_link.href = href;\r\n\tvar linkHost = _link.host;\r\n\r\n\t// IE doesn't have a trailing slash on the host\r\n\t// Chrome has it on the pathname\r\n\tif ( linkHost.indexOf('/') === -1 && _link.pathname.indexOf('/') !== 0) {\r\n\t\tlinkHost += '/';\r\n\t}\r\n\r\n\treturn _link.protocol+\"//\"+linkHost+_link.pathname+_link.search;\r\n};\r\n\r\n\r\nDataTable.ext.buttons.print = {\r\n\tclassName: 'buttons-print',\r\n\r\n\ttext: function ( dt ) {\r\n\t\treturn dt.i18n( 'buttons.print', 'Print' );\r\n\t},\r\n\r\n\taction: function ( e, dt, button, config ) {\r\n\t\tvar data = dt.buttons.exportData(\r\n\t\t\t$.extend( {decodeEntities: false}, config.exportOptions ) // XSS protection\r\n\t\t);\r\n\t\tvar exportInfo = dt.buttons.exportInfo( config );\r\n\r\n\t\tvar addRow = function ( d, tag ) {\r\n\t\t\tvar str = '<tr>';\r\n\r\n\t\t\tfor ( var i=0, ien=d.length ; i<ien ; i++ ) {\r\n\t\t\t\tstr += '<'+tag+'>'+d[i]+'</'+tag+'>';\r\n\t\t\t}\r\n\r\n\t\t\treturn str + '</tr>';\r\n\t\t};\r\n\r\n\t\t// Construct a table for printing\r\n\t\tvar html = '<table class=\"'+dt.table().node().className+'\">';\r\n\r\n\t\tif ( config.header ) {\r\n\t\t\thtml += '<thead>'+ addRow( data.header, 'th' ) +'</thead>';\r\n\t\t}\r\n\r\n\t\thtml += '<tbody>';\r\n\t\tfor ( var i=0, ien=data.body.length ; i<ien ; i++ ) {\r\n\t\t\thtml += addRow( data.body[i], 'td' );\r\n\t\t}\r\n\t\thtml += '</tbody>';\r\n\r\n\t\tif ( config.footer && data.footer ) {\r\n\t\t\thtml += '<tfoot>'+ addRow( data.footer, 'th' ) +'</tfoot>';\r\n\t\t}\r\n\t\thtml += '</table>';\r\n\r\n\t\t// Open a new window for the printable table\r\n\t\tvar win = window.open( '', '' );\r\n\t\twin.document.close();\r\n\r\n\t\t// Inject the title and also a copy of the style and link tags from this\r\n\t\t// document so the table can retain its base styling. Note that we have\r\n\t\t// to use string manipulation as IE won't allow elements to be created\r\n\t\t// in the host document and then appended to the new window.\r\n\t\tvar head = '<title>'+exportInfo.title+'</title>';\r\n\t\t$('style, link').each( function () {\r\n\t\t\thead += _styleToAbs( this );\r\n\t\t} );\r\n\r\n\t\ttry {\r\n\t\t\twin.document.head.innerHTML = head; // Work around for Edge\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\t$(win.document.head).html( head ); // Old IE\r\n\t\t}\r\n\r\n\t\t// Inject the table and other surrounding information\r\n\t\twin.document.body.innerHTML =\r\n\t\t\t'<h1>'+exportInfo.title+'</h1>'+\r\n\t\t\t'<div>'+(exportInfo.messageTop || '')+'</div>'+\r\n\t\t\thtml+\r\n\t\t\t'<div>'+(exportInfo.messageBottom || '')+'</div>';\r\n\r\n\t\t$(win.document.body).addClass('dt-print-view');\r\n\r\n\t\t$('img', win.document.body).each( function ( i, img ) {\r\n\t\t\timg.setAttribute( 'src', _relToAbs( img.getAttribute('src') ) );\r\n\t\t} );\r\n\r\n\t\tif ( config.customize ) {\r\n\t\t\tconfig.customize( win );\r\n\t\t}\r\n\r\n\t\t// Allow stylesheets time to load\r\n\t\tsetTimeout( function () {\r\n\t\t\tif ( config.autoPrint ) {\r\n\t\t\t\twin.print(); // blocking - so close will not\r\n\t\t\t\twin.close(); // execute until this is done\r\n\t\t\t}\r\n\t\t}, 1000 );\r\n\t},\r\n\r\n\ttitle: '*',\r\n\r\n\tmessageTop: '*',\r\n\r\n\tmessageBottom: '*',\r\n\r\n\texportOptions: {},\r\n\r\n\theader: true,\r\n\r\n\tfooter: false,\r\n\r\n\tautoPrint: true,\r\n\r\n\tcustomize: null\r\n};\r\n\r\n\r\nreturn DataTable.Buttons;\r\n}));\r\n"],"file":"buttons.print.min.js"}