'use strict';define(['jquery','block_ases/jszip','block_ases/jquery.dataTables','block_ases/dataTables.autoFill','block_ases/dataTables.buttons','block_ases/buttons.html5','block_ases/buttons.flash','block_ases/buttons.print','block_ases/bootstrap','block_ases/sweetalert','block_ases/jqueryui','block_ases/select2'],function(a){return{init:function init(){function o(A,B){var C=a('#input_json_economics_saved').val();a.ajax({type:'POST',data:{func:'edit_economics_data',json:A,json_prev:C,ases:B},url:'../managers/student_profile/discapacity_tab_api.php',success:function success(D){swal({title:D.title,text:D.msg,type:D.status},function(){a('html, body').animate({scrollTop:700},'slow'),a('#input_economics_saved').attr('value','1'),a('#input_json_economics_saved').attr('value',A)})},dataType:'json',cache:'false',error:function error(D){swal(D.title,D.msg,D.status)}})}function p(A,B){var C=a('#input_json_economics_saved').val();a.ajax({type:'POST',data:{func:'save_economics_data',json:A,json_prev:C,ases:B},url:'../managers/student_profile/discapacity_tab_api.php',success:function success(D){swal({title:D.title,text:D.msg,type:D.status},function(){a('html, body').animate({scrollTop:700},'slow'),a('#save_economics_data').parent().hide(),a('#edit_economics_data').parent().show(),a('#input_economics_saved').attr('value','1'),a('#input_json_economics_saved').attr('value',A)})},dataType:'json',cache:'false',error:function error(D){swal(D.title,D.msg,D.status)}})}function q(){var A=[],B={key_input:'#estrato_socioeconomico',val_input:a('#estrato_socioeconomico').val()};A.push(B);var C={};a('#collapse_econo input[type=checkbox]').not('.check_solvencia').each(function(){C.key_input=a(this).attr('id'),a(this).is(':checked')?(C.val_input=1,a(this).parent().next().children().children('input').each(function(){var J=a(this).attr('type');'text'==J&&(C.key_input_text=a(this).attr('id'),C.val_input_text=a(this).val()),'number'==J&&(C.key_input_number=a(this).attr('id'),C.val_input_number=a(this).val())})):C.val_input=0,A.push(C),C={}});var D={key_input:'#check_solvencia'};D.val_input=a('#check_solvencia').is(':checked')?1:0,A.push(D);var E={},F=[],G=[],H=[];for(obj=document.getElementById('div_info_padre'),i=0;ele=obj.getElementsByTagName('select')[i];i++)E.key_select=ele.id,E.val_select=ele.value,'select_nivel_padre'==ele.id&&F.push(E),'select_ocupacion_padre'==ele.id&&('option_ninguna'!=ele.value&&(E.key_input_select='#'+a('#'+ele.id).parent().next().children('input').attr('id'),E.val_input_select=a('#'+ele.id).parent().next().children('input').val(),E.title_select=ele.title),G.push(E)),'select_situa_padre'==ele.id&&H.push(E),E={};for(obj=document.getElementById('div_info_madre'),i=0;ele=obj.getElementsByTagName('select')[i];i++)E.key_select=ele.id,E.val_select=ele.value,'select_nivel_madre'==ele.id&&F.push(E),'select_ocupacion_madre'==ele.id&&('option_ninguna'!=ele.value&&(E.key_input_select='#'+a('#'+ele.id).parent().next().children('input').attr('id'),E.val_input_select=a('#'+ele.id).parent().next().children('input').val(),E.title_select=ele.title),G.push(E)),'select_situa_madre'==ele.id&&H.push(E),E={};A.push(G),A.push(F),A.push(H);var I={key_input:'#textarea_expectativas',val_input:a('#textarea_expectativas').val()};return A.push(I),A}function r(){var A={};if(A.title='\xC9xito',A.msg='El formulario fue validado con \xE9xito',A.status='success',a('#collapse_econo input[type=checkbox]').not('.check_solvencia').each(function(){a(this).is(':checked')&&a(this).parent().next().children().children('input').each(function(){var I=a(this).val(),J=a(this).attr('id'),K=a(this).attr('type');if(''==I)return A.title='Datos econ\xF3micos',A.status='error',A.msg='El campo '+J+' es obligatorio',A;if('text'==K&&y(I))return A.title='Datos econ\xF3micos',A.status='error',A.msg='El campo '+J+' no debe contener n\xFAmeros',A;if('number'==K){if(Number.isNaN(I))return A.title='Datos econ\xF3micos',A.status='error',A.msg='El campo '+J+' debe ser num\xE9rico',A;if(0>I)return A.title='Datos econ\xF3micos',A.status='error',A.msg='El campo '+J+' no debe ser negativo',A}})}),''==a('#estrato_socioeconomico').val()){return A.title='Datos econ\xF3micos',A.status='error',A.msg='El campo '+'estrato_socioeconomico'+' es obligatorio y debe ser n\xFAmero entero',A}var C=a('#estrato_socioeconomico').val();if(1>C||6<C||0!=C%1)return A.title='Datos econ\xF3micos',A.status='error',A.msg='El campo '+'estrato_socioeconomico'+' corresponde a estratos sociales (Del 1 al 6)',A;if('option_ninguna'!=a('#select_ocupacion_madre').val()){var E=a('#input_ocupacion_madre').val();if(''==E)return A.title='Datos econ\xF3micos',A.status='error',A.msg='El campo '+'input_ocupacion_madre'+' es obligatorio',A}if('option_ninguna'!=a('#select_ocupacion_padre').val()){var G=a('#input_ocupacion_padre').val();if(''==G)return A.title='Datos econ\xF3micos',A.status='error',A.msg='El campo '+'input_ocupacion_padre'+' es obligatorio',A}return A}function t(A,B){var C=a('#input_json_health_saved').val();a.ajax({type:'POST',data:{func:'edit_health_data',json:A,json_prev:C,ases:B},url:'../managers/student_profile/discapacity_tab_api.php',success:function success(D){swal({title:D.title,text:D.msg,type:D.status},function(){a('html, body').animate({scrollTop:820},'slow'),a('#input_health_saved').attr('value','1'),a('#input_json_health_saved').attr('value',A)})},dataType:'json',cache:'false',error:function error(D){swal(D.title,D.msg,D.status)}})}function u(A,B){var C=a('#input_json_health_saved').val();a.ajax({type:'POST',data:{func:'save_health_data',json:A,json_prev:C,ases:B},url:'../managers/student_profile/discapacity_tab_api.php',success:function success(D){swal({title:D.title,text:D.msg,type:D.status},function(){a('html, body').animate({scrollTop:820},'slow'),a('#save_health_data').parent().hide(),a('#edit_health_data').parent().show(),a('#input_health_saved').attr('value','1'),a('#input_json_health_saved').attr('value',A)})},dataType:'json',cache:'false',error:function error(D){swal(D.title,D.msg,D.status)}})}function v(){var A=[],B=a('#opciones_regimen_salud').find(':input[type=radio]:checked').val(),C=a('#opciones_regimen_salud').find(':input[type=radio]:checked').attr('id'),E=a('#opciones_servicio_salud').find(':input[type=radio]:checked').val(),F=a('#opciones_servicio_salud').find(':input[type=radio]:checked').attr('id'),G=a('#input_detalle_servicio').val(),J=[],K={};return a('#options_services input[type=checkbox]').each(function(){K.key_input=a(this).attr('id'),a(this).is(':checked')?(K.val_input=1,'check_servicio_otro'==K.key_input&&(K.key_input_text='servicio_otro_cual',K.val_input_text=a('#servicio_otro_cual').val())):K.val_input=0,J.push(K),K={}}),A.push({key_input:C,val_input:B}),A.push({key_input:F,val_input:E,val_input_text:G,key_input_text:'input_detalle_servicio'}),A.push(J),A}function w(){var A={};if(A.title='\xC9xito',A.msg='El formulario fue validado con \xE9xito',A.status='success',a('#check_servicio_otro').is(':checked')){var B=a('#servicio_otro_cual').val(),C='Otro servicio';if(''==B)return A.title='Datos de servicios de salud',A.status='error',A.msg='El campo '+C+' es obligatorio',A;if(y(B))return A.title='Datos de servicios de salud',A.status='error',A.msg='El campo '+C+' no debe contener n\xFAmeros',A}var D=a('#opciones_regimen_salud').find(':input[type=radio]:checked').val();if(void 0==D){return A.title='Datos de servicios de salud',A.status='error',A.msg='El campo '+'R\xE9gimen de salud'+' es obligatorio',A}var F=a('#opciones_servicio_salud').find(':input[type=radio]:checked').val();if(void 0!=F){var H,G=a('#input_detalle_servicio').val();switch(F){case'input_radio_eps':if(H='\xBFCu\xE1l EPS?',''==G)return A.title='Datos de servicios de salud',A.status='error',A.msg='El campo '+H+' es obligatorio',A;if(y(G))return A.title='Datos de servicios de salud',A.status='error',A.msg='El campo '+H+' no debe contener n\xFAmeros',A;break;case'input_radio_sisben':if(H='\xBFCu\xE1l Nivel?',''==G)return A.title='Datos de servicios de salud',A.status='error',A.msg='El campo '+H+' es obligatorio y num\xE9rico',A;if(1>G||3<G)return A.title='Datos de servicios de salud',A.status='error',A.msg='El campo '+H+' corresponde a niveles v\xE1lidos de SISBEN (1,2,3)',A;break;case'input_radio_otro_servicio':if(H='\xBFCu\xE1l servicio de salud?',''==G)return A.title='Datos de servicios de salud',A.status='error',A.msg='El campo '+H+' es obligatorio',A;if(y(G))return A.title='Datos de servicios de salud',A.status='error',A.msg='El campo '+H+' no debe contener n\xFAmeros',A;}}else{return A.title='Datos de servicios de salud',A.status='error',A.msg='El campo '+'Servicio de salud'+' es obligatorio',A}return A}function x(A,B,C,D,E,F){1==B?(a('#'+A).prop('checked',!0),a('#'+C).val(D),a('#'+C).parent().parent().show(),a('#'+E).val(F)):(a('#'+A).prop('checked',!1),a('#'+C).val(''),a('#'+C).parent().parent().hide(),a('#'+E).val(''))}function y(A){for(i=0;i<A.length;i++)if(-1!='0123456789'.indexOf(A.charAt(i),0))return 1;return 0}var z=a('#id_ases').val();a('#edit_health_data').click(function(){var A=w();if('error'==A.status)swal(A.title,A.msg,A.status);else{var B=v();B=JSON.stringify(B),t(B,z)}}),a('#save_health_data').click(function(){var A=w();if('error'==A.status)swal(A.title,A.msg,A.status);else{var B=v();B=JSON.stringify(B),u(B,z)}}),'0'==a('#input_health_saved').val()&&a('#save_health_data').parent().show(),'1'==a('#input_health_saved').val()&&(a('#save_health_data').parent().hide(),a('#edit_health_data').parent().show(),function(){var A,C,D,E,F=JSON.parse(a('#input_json_health_saved').val());for(i in F)switch(i){case'regimen_salud':E=JSON.parse(F[i]),a('#'+E.key_input).prop('checked',!0);;break;case'servicio_salud_vinculado':E=JSON.parse(F[i]),A=E.key_input,C=E.key_input_text,D=E.val_input_text,a('#'+A).prop('checked',!0),a('#'+C).val(D),a('#'+C).parent().show(),'input_radio_sisben'==A&&(a('#'+C).attr('title','Escriba Nivel'),a('#'+C).attr('type','number'),a('#'+C).attr('min','1'),a('#'+C).attr('max','3')),'input_radio_eps'==A?(a('#'+C).attr('title','Escriba EPS'),a('#'+C).attr('placeholder','\xBFCu\xE1l EPS?'),a('#'+C).attr('type','text')):'input_radio_otro_servicio'==A&&(a('#'+C).attr('title','Escriba otro servicio'),a('#'+C).attr('placeholder','\xBFCu\xE1l servicio de salud?'),a('#'+C).attr('type','text'));break;case'servicios_usados':for(objeto in E=JSON.parse(F[i]),E)1==E[objeto].val_input?(a('#'+E[objeto].key_input).prop('checked',!0),'check_servicio_otro'==E[objeto].key_input&&(a('#'+E[objeto].key_input_text).val(E[objeto].val_input_text),a('#'+E[objeto].key_input_text).parent().show())):(a('#'+E[objeto].key_input).prop('checked',!1),'check_servicio_otro'==E[objeto].key_input&&(a('#servicio_otro_cual').val(''),a('#servicio_otro_cual').parent().hide()));}}()),a('#check_servicio_otro').click(function(){a(this).is(':checked')?(a('#servicio_otro_cual').parent().show(),a('#servicio_otro_cual').prop('required',!0)):(a('#servicio_otro_cual').parent().hide(),a('#servicio_otro_cual').prop('required',!1),a('#servicio_otro_cual').val(''))}),a('.servicio_salud').click(function(){'input_radio_eps'==a(this).val()?(a('#input_detalle_servicio').attr('title','Escriba EPS'),a('#input_detalle_servicio').attr('placeholder','\xBFCu\xE1l EPS?'),a('#input_detalle_servicio').attr('type','text')):'input_radio_sisben'==a(this).val()?(a('#input_detalle_servicio').attr('title','Escriba Nivel'),a('#input_detalle_servicio').attr('placeholder','\xBFCu\xE1l Nivel?'),a('#input_detalle_servicio').attr('type','number'),a('#input_detalle_servicio').attr('min','1'),a('#input_detalle_servicio').attr('max','3')):'input_radio_otro_servicio'==a(this).val()&&(a('#input_detalle_servicio').attr('title','Escriba otro servicio'),a('#input_detalle_servicio').attr('placeholder','\xBFCu\xE1l servicio de salud?'),a('#input_detalle_servicio').attr('type','text')),a('#input_detalle_servicio').parent().show(),a('#input_detalle_servicio').attr('required',!0),a('#input_detalle_servicio').val('')}),'0'==a('#input_economics_saved').val()&&a('#save_economics_data').parent().show(),'1'==a('#input_economics_saved').val()&&(a('#save_economics_data').parent().hide(),a('#edit_economics_data').parent().show(),function(){var A,B,C,D,E,F,G,H=JSON.parse(a('#input_json_economics_saved').val());for(i in H)switch(i){case'estrato':a('#estrato_socioeconomico').val(H[i]);break;case'prestacion_economica':G=JSON.parse(H[i]),A=G.key_input,B=G.val_input,C=G.key_input_text,D=G.val_input_text,E=G.key_input_number,F=G.val_input_number,x(A,B,C,D,E,F);break;case'beca':G=JSON.parse(H[i]),A=G.key_input,B=G.val_input,C=G.key_input_text,D=G.val_input_text,E=G.key_input_number,F=G.val_input_number,x(A,B,C,D,E,F);break;case'ayuda_transporte':G=JSON.parse(H[i]),A=G.key_input,B=G.val_input,C=G.key_input_text,D=G.val_input_text,E=G.key_input_number,F=G.val_input_number,x(A,B,C,D,E,F);break;case'ayuda_materiales':G=JSON.parse(H[i]),A=G.key_input,B=G.val_input,C=G.key_input_text,D=G.val_input_text,E=G.key_input_number,F=G.val_input_number,x(A,B,C,D,E,F);break;case'solvencia_econo':B=H[i],1==B?a('#check_solvencia').prop('checked',!0):a('#check_solvencia').prop('checked',!1);break;case'ocupacion_padres':for(objeto in G=JSON.parse(H[i]),G)'option_ninguna'==G[objeto].val_select?a('#'+G[objeto].key_select).val(G[objeto].val_select):(a('#'+G[objeto].key_select).val(G[objeto].val_select),a('#'+G[objeto].key_select).attr('title',G[objeto].title_select),a(G[objeto].key_input_select).val(G[objeto].val_input_select),a(G[objeto].key_input_select).parent().show());break;case'nivel_educ_padres':for(objeto in G=JSON.parse(H[i]),G)a('#'+G[objeto].key_select).val(G[objeto].val_select);break;case'situa_laboral_padres':for(objeto in G=JSON.parse(H[i]),G)a('#'+G[objeto].key_select).val(G[objeto].val_select);break;case'expectativas_laborales':G=JSON.parse(H[i]),a(G.key_input).val(G.val_input);}}()),a('#collapse_econo input[type=checkbox]').not('.check_solvencia').on('change',function(){a(this).is(':checked')?(a(this).parent().next().show(),a(this).parent().next().children().children('input').prop('required',!0)):(a(this).parent().next().hide(),a(this).parent().next().children().children('input').prop('required',!1),a(this).parent().next().children().children('input').val(''))}),a('.select_ocupacion').on('change',function(){if('option_ninguna'==a(this).val())a(this).parent().next().hide(),a(this).parent().next().children('input').prop('required',!1),a(this).parent().next().children('input').val('');else{a(this).parent().next().show(),a(this).parent().next().children('input').prop('required',!0);var A=document.getElementById(a(this).attr('id'));a(this).attr('title',A.options[A.selectedIndex].title)}}),a('#save_economics_data').click(function(){var A=r();if('error'==A.status)swal(A.title,A.msg,A.status);else{var B=q();B=JSON.stringify(B),p(B,z)}}),a('#edit_economics_data').click(function(){var A=r();if('error'==A.status)swal(A.title,A.msg,A.status);else{var B=q();B=JSON.stringify(B),o(B,z)}})}}});