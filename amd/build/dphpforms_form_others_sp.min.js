'use strict';define(['jquery','block_ases/jszip','block_ases/jquery.dataTables','block_ases/dataTables.autoFill','block_ases/dataTables.buttons','block_ases/buttons.html5','block_ases/buttons.flash','block_ases/buttons.print','block_ases/bootstrap','block_ases/sweetalert','block_ases/jqueryui','block_ases/select2'],function(a){return{init:function init(){function o(D,E){var F=a('#input_json_economics_saved').val();a.ajax({type:'POST',data:{func:'edit_economics_data',json:D,json_prev:F,instanceid:A(),courseid:B(),ases:E},url:'../managers/student_profile/discapacity_tab_api.php',success:function success(G){swal({title:G.title,text:G.msg,type:G.status},function(){a('html, body').animate({scrollTop:700},'slow'),a('#input_economics_saved').attr('value','1'),a('#input_json_economics_saved').attr('value',D)})},dataType:'json',cache:'false',error:function error(G){swal(G.title,G.msg,G.status)}})}function p(D,E){var F=a('#input_json_economics_saved').val();a.ajax({type:'POST',data:{func:'save_economics_data',json:D,json_prev:F,instanceid:A(),courseid:B(),ases:E},url:'../managers/student_profile/discapacity_tab_api.php',success:function success(G){swal({title:G.title,text:G.msg,type:G.status},function(){a('html, body').animate({scrollTop:700},'slow'),a('#save_economics_data').parent().hide(),a('#edit_economics_data').parent().show(),a('#input_economics_saved').attr('value','1'),a('#input_json_economics_saved').attr('value',D)})},dataType:'json',cache:'false',error:function error(G){swal(G.title,G.msg,G.status)}})}function q(){var D=[],E={key_input:'#estrato_socioeconomico',val_input:a('#estrato_socioeconomico').val()};D.push(E);var F={};a('#collapse_econo input[type=checkbox]').not('.check_solvencia').each(function(){F.key_input=a(this).attr('id'),a(this).is(':checked')?(F.val_input=1,a(this).parent().next().children().children('input').each(function(){var M=a(this).attr('type');'text'==M&&(F.key_input_text=a(this).attr('id'),F.val_input_text=a(this).val()),'number'==M&&(F.key_input_number=a(this).attr('id'),F.val_input_number=a(this).val())})):F.val_input=0,D.push(F),F={}});var G={key_input:'#check_solvencia'};G.val_input=a('#check_solvencia').is(':checked')?1:0,D.push(G);var H={},I=[],J=[],K=[];for(obj=document.getElementById('div_info_padre'),i=0;ele=obj.getElementsByTagName('select')[i];i++)H.key_select=ele.id,H.val_select=ele.value,'select_nivel_padre'==ele.id&&I.push(H),'select_ocupacion_padre'==ele.id&&('option_ninguna'!=ele.value&&(H.key_input_select='#'+a('#'+ele.id).parent().next().children('input').attr('id'),H.val_input_select=a('#'+ele.id).parent().next().children('input').val(),H.title_select=ele.title),J.push(H)),'select_situa_padre'==ele.id&&K.push(H),H={};for(obj=document.getElementById('div_info_madre'),i=0;ele=obj.getElementsByTagName('select')[i];i++)H.key_select=ele.id,H.val_select=ele.value,'select_nivel_madre'==ele.id&&I.push(H),'select_ocupacion_madre'==ele.id&&('option_ninguna'!=ele.value&&(H.key_input_select='#'+a('#'+ele.id).parent().next().children('input').attr('id'),H.val_input_select=a('#'+ele.id).parent().next().children('input').val(),H.title_select=ele.title),J.push(H)),'select_situa_madre'==ele.id&&K.push(H),H={};D.push(J),D.push(I),D.push(K);var L={key_input:'#textarea_expectativas',val_input:a('#textarea_expectativas').val()};return D.push(L),D}function r(){var D={};if(D.title='\xC9xito',D.msg='El formulario fue validado con \xE9xito',D.status='success',a('#collapse_econo input[type=checkbox]').not('.check_solvencia').each(function(){a(this).is(':checked')&&a(this).parent().next().children().children('input').each(function(){var L=a(this).val(),M=a(this).attr('id'),N=a(this).attr('type');if(''==L)return D.title='Datos econ\xF3micos',D.status='error',D.msg='El campo '+M+' es obligatorio',D;if('text'==N&&z(L))return D.title='Datos econ\xF3micos',D.status='error',D.msg='El campo '+M+' no debe contener n\xFAmeros',D;if('number'==N){if(Number.isNaN(L))return D.title='Datos econ\xF3micos',D.status='error',D.msg='El campo '+M+' debe ser num\xE9rico',D;if(0>L)return D.title='Datos econ\xF3micos',D.status='error',D.msg='El campo '+M+' no debe ser negativo',D}})}),''==a('#estrato_socioeconomico').val()){return D.title='Datos econ\xF3micos',D.status='error',D.msg='El campo '+'estrato_socioeconomico'+' es obligatorio y debe ser n\xFAmero entero',D}var F=a('#estrato_socioeconomico').val();if(1>F||6<F||0!=F%1)return D.title='Datos econ\xF3micos',D.status='error',D.msg='El campo '+'estrato_socioeconomico'+' corresponde a estratos sociales (Del 1 al 6)',D;if('option_ninguna'!=a('#select_ocupacion_madre').val()){var H=a('#input_ocupacion_madre').val();if(''==H)return D.title='Datos econ\xF3micos',D.status='error',D.msg='El campo '+'input_ocupacion_madre'+' es obligatorio',D}if('option_ninguna'!=a('#select_ocupacion_padre').val()){var J=a('#input_ocupacion_padre').val();if(''==J)return D.title='Datos econ\xF3micos',D.status='error',D.msg='El campo '+'input_ocupacion_padre'+' es obligatorio',D}return D}function t(D,E){var F=a('#input_json_health_saved').val();a.ajax({type:'POST',data:{func:'edit_health_data',json:D,json_prev:F,instanceid:A(),courseid:B(),ases:E},url:'../managers/student_profile/discapacity_tab_api.php',success:function success(G){swal({title:G.title,text:G.msg,type:G.status},function(){a('html, body').animate({scrollTop:820},'slow'),a('#input_health_saved').attr('value','1'),a('#input_json_health_saved').attr('value',D)})},dataType:'json',cache:'false',error:function error(G){swal(G.title,G.msg,G.status)}})}function u(D,E){var F=a('#input_json_health_saved').val();a.ajax({type:'POST',data:{func:'save_health_data',json:D,json_prev:F,instanceid:A(),courseid:B(),ases:E},url:'../managers/student_profile/discapacity_tab_api.php',success:function success(G){swal({title:G.title,text:G.msg,type:G.status},function(){a('html, body').animate({scrollTop:820},'slow'),a('#save_health_data').parent().hide(),a('#edit_health_data').parent().show(),a('#input_health_saved').attr('value','1'),a('#input_json_health_saved').attr('value',D)})},dataType:'json',cache:'false',error:function error(G){swal(G.title,G.msg,G.status)}})}function v(){var D=[],E=a('#opciones_regimen_salud').find(':input[type=radio]:checked').val(),F=a('#opciones_regimen_salud').find(':input[type=radio]:checked').attr('id'),H=a('#opciones_servicio_salud').find(':input[type=radio]:checked').val(),I=a('#opciones_servicio_salud').find(':input[type=radio]:checked').attr('id'),J=a('#input_detalle_servicio').val(),M=[],N={};return a('#options_services input[type=checkbox]').each(function(){N.key_input=a(this).attr('id'),a(this).is(':checked')?(N.val_input=1,'check_servicio_otro'==N.key_input&&(N.key_input_text='servicio_otro_cual',N.val_input_text=a('#servicio_otro_cual').val())):N.val_input=0,M.push(N),N={}}),D.push({key_input:F,val_input:E}),D.push({key_input:I,val_input:H,val_input_text:J,key_input_text:'input_detalle_servicio'}),D.push(M),D}function w(){var D={};if(D.title='\xC9xito',D.msg='El formulario fue validado con \xE9xito',D.status='success',a('#check_servicio_otro').is(':checked')){var E=a('#servicio_otro_cual').val(),F='Otro servicio';if(''==E)return D.title='Datos de servicios de salud',D.status='error',D.msg='El campo '+F+' es obligatorio',D;if(z(E))return D.title='Datos de servicios de salud',D.status='error',D.msg='El campo '+F+' no debe contener n\xFAmeros',D}var G=a('#opciones_regimen_salud').find(':input[type=radio]:checked').val();if(void 0==G){return D.title='Datos de servicios de salud',D.status='error',D.msg='El campo '+'R\xE9gimen de salud'+' es obligatorio',D}var I=a('#opciones_servicio_salud').find(':input[type=radio]:checked').val();if(void 0!=I){var K,J=a('#input_detalle_servicio').val();switch(I){case'input_radio_eps':if(K='\xBFCu\xE1l EPS?',''==J)return D.title='Datos de servicios de salud',D.status='error',D.msg='El campo '+K+' es obligatorio',D;if(z(J))return D.title='Datos de servicios de salud',D.status='error',D.msg='El campo '+K+' no debe contener n\xFAmeros',D;break;case'input_radio_sisben':if(K='\xBFCu\xE1l Nivel?',''==J)return D.title='Datos de servicios de salud',D.status='error',D.msg='El campo '+K+' es obligatorio y num\xE9rico',D;if(1>J||3<J)return D.title='Datos de servicios de salud',D.status='error',D.msg='El campo '+K+' corresponde a niveles v\xE1lidos de SISBEN (1,2,3)',D;break;case'input_radio_otro_servicio':if(K='\xBFCu\xE1l servicio de salud?',''==J)return D.title='Datos de servicios de salud',D.status='error',D.msg='El campo '+K+' es obligatorio',D;if(z(J))return D.title='Datos de servicios de salud',D.status='error',D.msg='El campo '+K+' no debe contener n\xFAmeros',D;}}else{return D.title='Datos de servicios de salud',D.status='error',D.msg='El campo '+'Servicio de salud'+' es obligatorio',D}return D}function y(D,E,F,G,H,I){1==E?(a('#'+D).prop('checked',!0),a('#'+F).val(G),a('#'+F).parent().parent().show(),a('#'+H).val(I)):(a('#'+D).prop('checked',!1),a('#'+F).val(''),a('#'+F).parent().parent().hide(),a('#'+H).val(''))}function z(D){for(i=0;i<D.length;i++)if(-1!='0123456789'.indexOf(D.charAt(i),0))return 1;return 0}function A(){var D=location.search.split('&');for(x in D)if(0<=D[x].indexOf('instanceid')){var E=D[x].split('=');return E[1]}return 0}function B(){var D=location.search.split('&');for(x in D)if(0<=D[x].indexOf('courseid')){var E=D[x].split('=');return E[1]}return 0}var C=a('#id_ases').val();a('#edit_health_data').click(function(){var D=w();if('error'==D.status)swal(D.title,D.msg,D.status);else{var E=v();E=JSON.stringify(E),t(E,C)}}),a('#save_health_data').click(function(){var D=w();if('error'==D.status)swal(D.title,D.msg,D.status);else{var E=v();E=JSON.stringify(E),u(E,C)}}),'0'==a('#input_health_saved').val()&&a('#save_health_data').parent().show(),'1'==a('#input_health_saved').val()&&(a('#save_health_data').parent().hide(),a('#edit_health_data').parent().show(),function(){var D,F,G,H,I=JSON.parse(a('#input_json_health_saved').val());for(i in I)switch(i){case'regimen_salud':H=JSON.parse(I[i]),a('#'+H.key_input).prop('checked',!0);;break;case'servicio_salud_vinculado':H=JSON.parse(I[i]),D=H.key_input,F=H.key_input_text,G=H.val_input_text,a('#'+D).prop('checked',!0),a('#'+F).val(G),a('#'+F).parent().show(),'input_radio_sisben'==D&&(a('#'+F).attr('title','Escriba Nivel'),a('#'+F).attr('type','number'),a('#'+F).attr('min','1'),a('#'+F).attr('max','3')),'input_radio_eps'==D?(a('#'+F).attr('title','Escriba EPS'),a('#'+F).attr('placeholder','\xBFCu\xE1l EPS?'),a('#'+F).attr('type','text')):'input_radio_otro_servicio'==D&&(a('#'+F).attr('title','Escriba otro servicio'),a('#'+F).attr('placeholder','\xBFCu\xE1l servicio de salud?'),a('#'+F).attr('type','text'));break;case'servicios_usados':for(objeto in H=JSON.parse(I[i]),H)1==H[objeto].val_input?(a('#'+H[objeto].key_input).prop('checked',!0),'check_servicio_otro'==H[objeto].key_input&&(a('#'+H[objeto].key_input_text).val(H[objeto].val_input_text),a('#'+H[objeto].key_input_text).parent().show())):(a('#'+H[objeto].key_input).prop('checked',!1),'check_servicio_otro'==H[objeto].key_input&&(a('#servicio_otro_cual').val(''),a('#servicio_otro_cual').parent().hide()));}}()),a('#check_servicio_otro').click(function(){a(this).is(':checked')?(a('#servicio_otro_cual').parent().show(),a('#servicio_otro_cual').prop('required',!0)):(a('#servicio_otro_cual').parent().hide(),a('#servicio_otro_cual').prop('required',!1),a('#servicio_otro_cual').val(''))}),a('.servicio_salud').click(function(){'input_radio_eps'==a(this).val()?(a('#input_detalle_servicio').attr('title','Escriba EPS'),a('#input_detalle_servicio').attr('placeholder','\xBFCu\xE1l EPS?'),a('#input_detalle_servicio').attr('type','text')):'input_radio_sisben'==a(this).val()?(a('#input_detalle_servicio').attr('title','Escriba Nivel'),a('#input_detalle_servicio').attr('placeholder','\xBFCu\xE1l Nivel?'),a('#input_detalle_servicio').attr('type','number'),a('#input_detalle_servicio').attr('min','1'),a('#input_detalle_servicio').attr('max','3')):'input_radio_otro_servicio'==a(this).val()&&(a('#input_detalle_servicio').attr('title','Escriba otro servicio'),a('#input_detalle_servicio').attr('placeholder','\xBFCu\xE1l servicio de salud?'),a('#input_detalle_servicio').attr('type','text')),a('#input_detalle_servicio').parent().show(),a('#input_detalle_servicio').attr('required',!0),a('#input_detalle_servicio').val('')}),'0'==a('#input_economics_saved').val()&&a('#save_economics_data').parent().show(),'1'==a('#input_economics_saved').val()&&(a('#save_economics_data').parent().hide(),a('#edit_economics_data').parent().show(),function(){var D,E,F,G,H,I,J,K=JSON.parse(a('#input_json_economics_saved').val());for(i in K)switch(i){case'estrato':a('#estrato_socioeconomico').val(K[i]);break;case'prestacion_economica':J=JSON.parse(K[i]),D=J.key_input,E=J.val_input,F=J.key_input_text,G=J.val_input_text,H=J.key_input_number,I=J.val_input_number,y(D,E,F,G,H,I);break;case'beca':J=JSON.parse(K[i]),D=J.key_input,E=J.val_input,F=J.key_input_text,G=J.val_input_text,H=J.key_input_number,I=J.val_input_number,y(D,E,F,G,H,I);break;case'ayuda_transporte':J=JSON.parse(K[i]),D=J.key_input,E=J.val_input,F=J.key_input_text,G=J.val_input_text,H=J.key_input_number,I=J.val_input_number,y(D,E,F,G,H,I);break;case'ayuda_materiales':J=JSON.parse(K[i]),D=J.key_input,E=J.val_input,F=J.key_input_text,G=J.val_input_text,H=J.key_input_number,I=J.val_input_number,y(D,E,F,G,H,I);break;case'solvencia_econo':E=K[i],1==E?a('#check_solvencia').prop('checked',!0):a('#check_solvencia').prop('checked',!1);break;case'ocupacion_padres':for(objeto in J=JSON.parse(K[i]),J)'option_ninguna'==J[objeto].val_select?a('#'+J[objeto].key_select).val(J[objeto].val_select):(a('#'+J[objeto].key_select).val(J[objeto].val_select),a('#'+J[objeto].key_select).attr('title',J[objeto].title_select),a(J[objeto].key_input_select).val(J[objeto].val_input_select),a(J[objeto].key_input_select).parent().show());break;case'nivel_educ_padres':for(objeto in J=JSON.parse(K[i]),J)a('#'+J[objeto].key_select).val(J[objeto].val_select);break;case'situa_laboral_padres':for(objeto in J=JSON.parse(K[i]),J)a('#'+J[objeto].key_select).val(J[objeto].val_select);break;case'expectativas_laborales':J=JSON.parse(K[i]),a(J.key_input).val(J.val_input);}}()),a('#collapse_econo input[type=checkbox]').not('.check_solvencia').on('change',function(){a(this).is(':checked')?(a(this).parent().next().show(),a(this).parent().next().children().children('input').prop('required',!0)):(a(this).parent().next().hide(),a(this).parent().next().children().children('input').prop('required',!1),a(this).parent().next().children().children('input').val(''))}),a('.select_ocupacion').on('change',function(){if('option_ninguna'==a(this).val())a(this).parent().next().hide(),a(this).parent().next().children('input').prop('required',!1),a(this).parent().next().children('input').val('');else{a(this).parent().next().show(),a(this).parent().next().children('input').prop('required',!0);var D=document.getElementById(a(this).attr('id'));a(this).attr('title',D.options[D.selectedIndex].title)}}),a('#save_economics_data').click(function(){var D=r();if('error'==D.status)swal(D.title,D.msg,D.status);else{var E=q();E=JSON.stringify(E),p(E,C)}}),a('#edit_economics_data').click(function(){var D=r();if('error'==D.status)swal(D.title,D.msg,D.status);else{var E=q();E=JSON.stringify(E),o(E,C)}})}}});