{"version":3,"sources":["../src/monitor_profile.js"],"names":["define","$","select2","bootstrap","sweetalert","mustache","mon_trackings","init","language","noResults","searching","self","on","code","val","monitorCode","split","loadMonitor","parameters","get_url_parameters","document","location","search","monitorId","value","one","tab_name","load_tabs","instanceid","tooltip","editProfile","object_function","unchangedForm","serializeArray","hide","show","prop","removeAttr","attr","changedForm","resultValidation","validateForm","status","swal","title","msg","formOnlyWithChanges","slice","forEach","field","i","push","saveForm","form","data","text","type","showCancelButton","confirmButtonColor","confirmButtonText","cancelButtonText","closeOnConfirm","allowEscapeKey","isConfirm","cancelEdition","revertChanges","name","regexemail","validEmail","exec","console","log","isNaN","parseFloat","urlregex","validUrl","reload","resultMsg","ajax","JSON","stringify","url","dataType","cache","error","success","message","status_code","fullUrl","newUrl","href","event","tabName","template","tabToLoad","render","data_response","append","removeClass","addClass","query_string","query","substring","vars","pair","length"],"mappings":"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","sourcesContent":["/**\r\n * Profile for every individual ASES monitor\r\n *\r\n * @module block_ases/monitor_profile\r\n * @author David Santiago Cortés\r\n * @copyright 2020 David S. Cortés <david.cortes@correounivalle.edu.co>\r\n * @license GNU GPL v3 or later\r\n */\r\ndefine(['jquery', \r\n        'block_ases/select2', \r\n        'block_ases/bootstrap',\r\n        'block_ases/sweetalert',\r\n        'block_ases/mustache',\r\n        'block_ases/mon_trackings',\r\n        'block_ases/aaspect',], function($, select2, bootstrap, sweetalert, mustache, mon_trackings, aaspect) {\r\n    \r\n    return {\r\n        init: function (data_init) {\r\n            $('#select-monitores').select2({\r\n                language: {\r\n                    noResults: function() {\r\n                        return \"No hay resultado\";\r\n                    },\r\n                    searching: function() {\r\n                        return \"Buscando...\";\r\n                    }\r\n                },\r\n            });\r\n            var self = this;\r\n         \r\n            $(\"#select-monitores\").on('change', function () {\r\n                var code = $('#select-monitores').val();\r\n                var monitorCode = code.split(' ')[0];\r\n\r\n                loadMonitor(monitorCode);\r\n            })\r\n            var parameters = get_url_parameters(document.location.search);\r\n            var monitorId = $(\"#id_moodle\")[0].value;\r\n\r\n            $(\"#boss_history_li\").one('click', {tab_name: 'history_boss'}, load_tabs);\r\n            $(\"#trackings_li\").one('click', mon_trackings.init([monitorId, parameters.instanceid]));\r\n            \r\n            $('[data-toggle=\"tooltip\"]').tooltip();\r\n\r\n            this.editProfile(self);\r\n        },\r\n        editProfile: function(object_function) {\r\n            var unchangedForm = $('#ficha_monitor').serializeArray();\r\n            $(\"#span-icon-edit\").on('click', function() {\r\n                $(this).hide();\r\n                \r\n\r\n                $(\"#span-icon-save\").show();\r\n                $(\"#span-icon-cancel\").show();\r\n\r\n                $(\"#input_num_doc\").prop('readonly', false);\r\n                $(\"#input_email\").prop('readonly', false);\r\n                $(\"#input_phone1\").prop('readonly', false);\r\n                $(\"#input_phone2\").prop('readonly', false);\r\n                // Documentos\r\n                $(\"#input_acuerdo\").prop('readonly', false);\r\n                $(\"#link_acuerdo\").removeAttr(\"href\");\r\n\r\n                $(\"#input_d10\").prop('readonly', false);\r\n                $(\"#link_d10\").removeAttr(\"href\");\r\n\r\n                $(\"#input_doc\").prop('readonly', false);\r\n                $(\"#link_doc\").removeAttr(\"href\");\r\n\r\n                $(\"#input_banco\").prop('readonly', false);\r\n                $(\"#link_banco\").attr(\"href\", \"\");\r\n            });\r\n            \r\n            $('#span-icon-save').on('click', function () {\r\n                var changedForm = $('#ficha_monitor').serializeArray();\r\n                var resultValidation = object_function.validateForm(changedForm);\r\n\r\n                if (resultValidation.status == \"error\") {\r\n                    swal(resultValidation.title,\r\n                        resultValidation.msg,\r\n                        resultValidation.status);\r\n                } else {\r\n\r\n                    let formOnlyWithChanges = [];\r\n                    changedForm.slice(1,11).forEach((field, i) => {\r\n                        if (field.value != unchangedForm.slice(1,11)[i].value) {\r\n                            formOnlyWithChanges.push(field);\r\n                        }\r\n                    });\r\n\r\n                    formOnlyWithChanges.push(changedForm[0]);\r\n                    object_function.saveForm(formOnlyWithChanges, object_function, resultValidation);\r\n                }\r\n\r\n            });\r\n\r\n            $('#span-icon-cancel').on('click', { form: unchangedForm }, function(data) {\r\n                swal({\r\n                    title: \"¿Desea cancelar la edición?\",\r\n                    text: \"Los cambios no guardados se perderán\",\r\n                    type: \"warning\",\r\n                    showCancelButton: true,\r\n                    confirmButtonColor: \"#d51b23\",\r\n                    confirmButtonText: \"Sí\",\r\n                    cancelButtonText: \"No\",\r\n                    closeOnConfirm: true,\r\n                    allowEscapeKey: false,\r\n\r\n                }, function (isConfirm) {\r\n                    if (isConfirm) {\r\n                        object_function.cancelEdition(); \r\n                        object_function.revertChanges(data.data.form);\r\n                    }\r\n                });\r\n            });\r\n        }, validateForm: function (form) {\r\n            \r\n            for (field in form) {\r\n                var msg = new Object();\r\n                var field = form[field];\r\n\r\n                msg.title = \"Éxito\";\r\n                msg.msg = \"El formulario fue validado con éxito\";\r\n                msg.status = \"success\";\r\n\r\n                switch(field.name) {\r\n                    case \"email_alternativo\":\r\n                        let regexemail = /^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/;\r\n                        let validEmail = regexemail.exec(field.value);\r\n\r\n                        if (validEmail !== null) {\r\n                            console.log(\"email valido: \", validEmail)\r\n                        } else {\r\n                            console.log(\"error\");\r\n                            msg.title = \"Error\";\r\n                            msg.status = \"error\";\r\n                            msg.msg = `El campo ${field.name} no tiene formato válido.`;\r\n                            return msg;\r\n                        }\r\n                        break;\r\n\r\n                    case \"num_doc\":\r\n                        if (isNaN(field.name) || isNaN(parseFloat(field.name))) {\r\n                            msg.title = \"Error\";\r\n                            msg.status = \"error\";\r\n                            msg.msg = `El campo ${field.name} no es válido.`;\r\n                        }\r\n                        break;\r\n\r\n                    case \"pdf_acuerdo_conf\":\r\n                    case \"pdf_doc\":\r\n                    case \"pdf_d10\":\r\n                    case \"pdf_cuenta_banco\":\r\n                        let urlregex = /^(http|https):\\/\\//;\r\n                        let validUrl = urlregex.exec(field.value);\r\n\r\n                        if (validUrl == null) {\r\n                            msg.title = \"Error\";\r\n                            msg.status = \"error\";\r\n                            msg.msg = `El campo ${field.name} no es un enlace válido. Recuerde incluir https://.`\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            return msg;\r\n            \r\n        }, cancelEdition: function () {\r\n            $('#span-icon-edit').show();\r\n            $('#span-icon-save').hide();\r\n            $('#span-icon-cancel').hide();\r\n            $(\"#input_num_doc\").prop('readonly', true);\r\n            $(\"#input_email\").prop('readonly', true);\r\n            $(\"#input_phone1\").prop('readonly', true);\r\n            $(\"#input_phone2\").prop('readonly', true);\r\n            // Documentos\r\n            $(\"#input_acuerdo\").prop('readonly', true);\r\n            $(\"#input_d10\").prop('readonly', true);\r\n            $(\"#input_doc\").prop('readonly', true);\r\n            $(\"#input_banco\").prop('readonly', true);\r\n            \r\n            $(\"#link_acuerdo\").attr(\"href\", $(\"#input_acuerdo\")[0].value);\r\n            $(\"#link_banco\").attr(\"href\", $('#input_banco')[0].value);\r\n            $(\"#link_d10\").attr(\"href\", $(\"#input_d10\")[0].value);\r\n            $('#link_doc').attr('href', $('#input_doc')[0].value);\r\n        \r\n        }, revertChanges: function (form) {\r\n\r\n            form.forEach(field => $('[name='+field.name+']').val(field.value));\r\n\r\n            $(\"#link_acuerdo\").attr(\"href\", $(\"#input_acuerdo\")[0].value);\r\n            $(\"#link_banco\").attr(\"href\", $('#input_banco')[0].value);\r\n            $(\"#link_d10\").attr(\"href\", $(\"#input_d10\")[0].value);\r\n            $('#link_doc').attr('href', $('#input_doc')[0].value);\r\n\r\n            location.reload(true);\r\n        }, saveForm: function (form, object_function, resultMsg) {\r\n            $('#span-icon-cancel').hide(); \r\n            $.ajax({\r\n                type: \"POST\",\r\n                data: JSON.stringify({\r\n                    \"function\": 'save_profile',\r\n                    \"params\": [form]\r\n                }),\r\n                url: '../managers/monitor_profile/monitor_profile_api.php',\r\n                dataType: \"json\",\r\n                cache: \"false\",\r\n                error: function (msg) {\r\n                    swal(\r\n                        msg.title,\r\n                        msg.msg,\r\n                        msg.type\r\n                    );\r\n                },\r\n                success: function (msg) {\r\n                    swal(\r\n                        resultMsg.title,\r\n                        msg.message,\r\n                        \"success\"\r\n                    );\r\n                },\r\n            });\r\n            object_function.cancelEdition();\r\n        } \r\n    };\r\n\r\n    // Loads monitor page\r\n    function loadMonitor(monitorCode) {\r\n\r\n        $.ajax({\r\n            type: \"POST\",\r\n            data: JSON.stringify({\r\n                \"function\": \"is_monitor_ps\",\r\n                \"params\": [monitorCode],\r\n            }),\r\n            url: \"../managers/monitor_profile/monitor_profile_api.php\",\r\n            dataType: \"json\",\r\n            cache: \"false\",\r\n            success: function (msg) {\r\n                var result = msg;\r\n\r\n                if (result.status_code === 0) {\r\n                    var parameters = get_url_parameters(document.location.search);\r\n                    var fullUrl = String(document.location);\r\n                    var url = fullUrl.split(\"?\");\r\n\r\n                    var newUrl = url[0] + \"?courseid=\" + parameters['courseid'] + \"&instanceid=\" + parameters['instanceid'] + \"&monitor_code=\" + monitorCode;\r\n                    location.href = newUrl;\r\n                } else {\r\n                    swal(\r\n                        \"Error\",\r\n                        \"No se encuentra un monitor ASES asociado al código ingresado\",\r\n                        \"error\"\r\n                    );\r\n                }\r\n            },\r\n            error: function (msg) {\r\n                console.log(msg);\r\n                swal(\r\n                    \"Error\",\r\n                    \"Error al comunicarse con el servidor, por favor inténtelo nuevamente.\",\r\n                    \"error\"\r\n                );\r\n            },\r\n        });\r\n    }\r\n\r\n    //Load a single tab.\r\n    function load_tabs(event) {\r\n\r\n        var tabName = event.data.tab_name;\r\n        var parameters = get_url_parameters(document.location.search);\r\n        var monitorId = $(\"#id_moodle\")[0].value;\r\n\r\n\t    $.ajax({\r\n            type: \"POST\",\r\n            url: \"../managers/monitor_profile/monitor_profile_api.php\",\r\n            dataType: \"json\",\r\n            cache: \"false\",\r\n            data: JSON.stringify({\r\n                \"function\": 'load_tabs',\r\n                \"params\": [monitorId, parameters.instanceid, tabName],\r\n            }),\r\n\t        success: function(msg) {\r\n                if (msg.status_code == 0) {\r\n                    $.ajax({\r\n                        url: \"../templates/monitor_view_\"+tabName+\"_tab.mustache\",\r\n                        data: null,\r\n                        dataType: \"text\",\r\n                        success: function(template) {\r\n                            let tabToLoad = $(mustache.render(template, msg.data_response));\r\n                            $(\".ases-tab-content\").append(tabToLoad);\r\n                            console.log(tabName);\r\n                            switch (tabName) {\r\n                                case \"history_boss\":\r\n                                    $(\"#general_tab\").removeClass(\"ases-tab-active\");\r\n                                    $(\"#\"+tabName+\"_tab\").addClass(\"ases-tab-active\");\r\n                                    break;\r\n                            }\r\n                        },\r\n                        error: function() {\r\n                            console.log(`../templates/monitor_view_${tabName}_tab.mustache cannot be reached.`);\r\n                        }\r\n                    });\r\n                } else {\r\n                    console.log('error:', msg);\r\n                }\r\n    \r\n            },\r\n            error: function(msg) {\r\n                console.log(msg)\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    function get_url_parameters(page) {\r\n        // This function is anonymous, is executed immediately and\r\n        // the return value is assigned to QueryString!\r\n        var query_string = [];\r\n        var query = document.location.search.substring(1);\r\n        var vars = query.split(\"&\");\r\n        for (var i = 0; i < vars.length; i++) {\r\n            var pair = vars[i].split(\"=\");\r\n            query_string[pair[0]] = pair[1];\r\n        }\r\n\r\n        return query_string;\r\n    }\r\n\r\n});\r\n"],"file":"monitor_profile.min.js"}