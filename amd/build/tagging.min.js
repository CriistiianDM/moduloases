const keys={enter:13,space:32,coma:44},styles={1:{tag:"badge-primary",remove:"badge-secondary"},2:{tag:"badge-info",remove:"badge-primary"},3:{tag:"badge-primary",remove:"badge-light"},4:{tag:"badge-dark",remove:"badge-light"},5:{tag:"badge-danger",remove:"badge-warning"},6:{tag:"badge-success",remove:"badge-secondary"},7:{tag:"badge-primary",remove:"badge-dark"},8:{tag:"badge-dark",remove:"badge-danger"},9:{tag:"badge-success",remove:"badge-dark"},10:{tag:"badge-info",remove:"bagde-light"}};define(["jquery"]);class Tagging{constructor(e,t,a=1,s=10){this.input=e,this.canvas=t,this.limit=s,this.style=a,this.arr=[],this.styleSelected={},this.setStyle(this.style)}createTag(){var e=this.getInput(),t=this.getLimit(),a=(this.getKeys(),this.getCanvas()),s=this,r=!1;e.keypress(function(i){if(s.arr.length<t){for(const t in keys)if(i.which==keys[t]&&""!==e.val()&&e.val().length>3){s.arr.push(e.val()),i.preventDefault(),a.html(""),s.displayTags(s.arr,a),e.val("");break}}else r=!0,e.prop("disabled",!0),e.addClass("is-invalid"),e.after("<div class='col-md-8 invalid-feedback'>Se excedió el número de tags</div>")}),$(document).on("click",".remove",function(i){var g=$(this).prev().text();s.removeTag(g,s.arr),s.arr.length<t&&r&&(e.prop("disabled",!1),e.next().remove()),r=!1,s.displayTags(s.arr,a)})}displayTags(e,t){var a=this.getStyle();t.html(""),e.forEach(function(e,s){t.append("<span class='tag badge "+a.tag+" '>"+e+"</span><span role='button' class='remove mr-2 badge "+a.remove+"'>x</span>")})}removeTag(e,t){t.forEach(function(a,s){if(a==e){console.log("entro"+s);s=t.findIndex(t=>t==e);t.splice(s,1)}})}getInput(){return this.input}getCanvas(){return this.canvas}getKeys(){return this.keys}getLimit(){return this.limit}getStyle(){return this.styleSelected}getArr(){return this.arr}setInput(e){this.input}setCanvas(e){this.canvas}setLimit(e){this.limit}setStyle(e){for(const t in styles)e==t&&(this.styleSelected=styles[t])}}