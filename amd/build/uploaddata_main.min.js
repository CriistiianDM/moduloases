define ("block_ases/uploaddata_main",["jquery","block_ases/bootstrap","block_ases/sweetalert","block_ases/validator"],function(a){return{init:function init(){a(document).ready(function(){d();var e=document.getElementById("upload_data_form");a("#load_button").on("click",function(){b(e)});a("#archivos_subidos").on("click",".eliminar_archivo",function(){var b=a(this).parents(".row").eq(0).find("span").text();b=a.trim(b);c(b)});a("#respuesta").on("click",".continue",function(){setTimeout("document.location.reload()",500)})});function b(a){var b=a.children[2].children[0].children[0],c=b.children[0],d=a.children[4].children[1];response_div=document.getElementById("response_div");response_span=document.getElementById("response_span");response_span.innerHTML="";response_div.setAttribute("hidden","hidden");b.classList.remove("green_bar","red_bar");var e=new XMLHttpRequest;e.upload.addEventListener("progress",function(a){var d=Math.round(100*(a.loaded/a.total));b.style.width=d+"%";c.innerHTML=d+"%"});e.addEventListener("load",function(){if("1"==e.response){b.classList.add("green_bar");c.innerHTML="\xC9xito";response_div.removeAttribute("hidden");response_span.classList.add("response_success");response_span.innerHTML+="El contenido del archivo ha sido cargado con \xE9xito en la base de datos."}else{b.classList.add("red_bar");c.innerHTML="Error";response_div.removeAttribute("hidden");response_span.classList.add("response_error");response_span.innerHTML=e.response}});e.open("post","../managers/upload_files_form/subir_archivo.php");e.send(new FormData(a));d.addEventListener("click",function(){e.abort();b.classList.remove("green_bar");b.classList.add("red_bar");c.innerHTML="Proceso cancelado"})}function c(b){a.ajax({url:"../managers/upload_files_form/eliminar_archivo.php",type:"POST",timeout:1e4,data:{archivo:b},error:function error(){e("Error al intentar eliminar el archivo.",!1)},success:function success(a){if(1==a){e("El archivo ha sido eliminado.",!0)}else{e("Error al intentar eliminar el archivo.",!1)}d()}})}function d(){a.ajax({url:"../managers/upload_files_form/mostrar_archivos.php",dataType:"JSON",success:function success(b){if(b){for(var c="",d=0;d<b.length;d++){if(b[d]!=void 0){c+="<div class=\"row\"> <span class=\"col-md-3\"> "+b[d]+" </span> <div class=\"col-md-2\"> <a class=\"eliminar_archivo btn btn-danger \" id=\"btn_eliminar\" name=\"elim\" href=\"javascript:void(0);\"> Eliminar </a> </div> </div> <hr />"}}a("#archivos_subidos").html(c)}}})}function e(b,c){a("#respuesta").removeClass("alert-success").removeClass("alert-danger").html(b);if(c){a("#respuesta").addClass("alert-success");setTimeout("document.location.reload()",500)}else{a("#respuesta").addClass("alert-danger");var d=a("<br> <div class=\"row\"><div class=\"col-md-2 col-md-offset-5\"><a class=\"continue btn btn-danger\" href=\"javascript:void(0);\"> Continuar </a></div></div>");d.appendTo(a("#respuesta"))}}}}});
//# sourceMappingURL=uploaddata_main.min.js.map
