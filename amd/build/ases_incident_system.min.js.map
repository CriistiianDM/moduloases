{"version":3,"sources":["../src/ases_incident_system.js"],"names":["define","$","sweetalert","jqueryui","li","append","console","log","init","loadIncidents","show","ajax","method","url","contentType","dataType","data","JSON","stringify","success","response","hide","inc_list","data_response","forEach","element","status","parse","estados","last_status","change_order","e","parseInt","title","detail","comments","comentarios","message_number","message","commentary","close_icon","id","solved","waiting","closed","html","error","XMLHttpRequest","textStatus","errorThrown","document","ready","setInterval","fadeOut","on","ticket_id","_title","swal","text","type","incident_id","showCancelButton","confirmButtonText","isConfirm","status_code","system_info","val"],"mappings":"AAaCA,OAAM,mCACH,CACI,QADJ,CAEI,uBAFJ,CAGI,qBAHJ,CAII,8BAJJ,CADG,CAOC,SAASC,CAAT,CAAYC,CAAZ,CAAwBC,CAAxB,CAAkCC,CAAlC,CAAuC,CAoHnCH,CAAC,CAAC,MAAD,CAAD,CAAUI,MAAV,+9DACAJ,CAAC,CAAC,MAAD,CAAD,CAAUI,MAAV,CAvCmC,2UAuCnC,EACAJ,CAAC,CAAC,MAAD,CAAD,CAAUI,MAAV,CA/BuB,2gDA+BvB,EAEDC,OAAO,CAACC,GAAR,CAAa,6BAAb,EAEA,MAAO,CACFC,IAAI,CAAE,eAAU,CAEZ,QAASC,CAAAA,CAAT,EAAwB,CACpBL,CAAE,CAACM,IAAH,GACAT,CAAC,CAACU,IAAF,CAAO,CACHC,MAAM,CAAE,MADL,CAEHC,GAAG,CAAE,+CAFF,CAGHC,WAAW,CAAE,kBAHV,CAIHC,QAAQ,CAAE,MAJP,CAKHC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAC,SAAW,2BAAZ,CAAyC,OAAS,EAAlD,CAAf,CALH,CAMHC,OAAO,CAAE,iBAAUC,CAAV,CAAoB,CACzBhB,CAAE,CAACiB,IAAH,GACA,GAAIC,CAAAA,CAAQ,CAAG,EAAf,CACAF,CAAQ,CAACG,aAAT,CAAuBC,OAAvB,CAA+B,SAASC,CAAT,CAAiB,IAQxCC,CAAAA,CAAM,CAAGT,IAAI,CAACU,KAAL,CAAYF,CAAO,CAACG,OAApB,CAR+B,CASxCC,CAAW,CAAG,CACdC,YAAY,CAAC,CAAC,CADA,CAEdJ,MAAM,CAAC,EAFO,CAT0B,CAc5CA,CAAM,CAACF,OAAP,CAAe,SAASO,CAAT,CAAW,CACtB,GAAIF,CAAW,CAACC,YAAZ,CAA2BE,QAAQ,CAACD,CAAC,CAACD,YAAH,CAAvC,CAAyD,CACrDD,CAAW,CAAGE,CACjB,CACJ,CAJD,EAd4C,GAoBxCE,CAAAA,CAAK,CAAG,IApBgC,CAqBxCC,CAAM,CAAG,IArB+B,CAsBxCC,CAAQ,CAAGlB,IAAI,CAACU,KAAL,CAAYF,CAAO,CAACW,WAApB,CAtB6B,CAwB5CD,CAAQ,CAACX,OAAT,CAAiB,SAASO,CAAT,CAAW,CACxB,GAAoC,CAAhC,EAAAC,QAAQ,CAAED,CAAC,CAACM,cAAJ,CAAZ,CAAuC,CACnCJ,CAAK,CAAGF,CAAC,CAACO,OAAF,CAAUL,KAAlB,CACAC,CAAM,CAAGH,CAAC,CAACO,OAAF,CAAUC,UAEtB,CACJ,CAND,EASA,GAAIC,CAAAA,CAAU,CAAG,EAAjB,CAEA,GAA0B,QAAtB,EAAAX,CAAW,CAACH,MAAhB,CAAoC,CAChCc,CAAU,CAAG,gHAA+Gf,CAAO,CAACgB,EAAvH,CAA4H,4BAC5I,CAEDnB,CAAQ,EAAK,kTArCM,CACfoB,MAAM,CAAC,SADQ,CAEfC,OAAO,CAAC,SAFO,CAGfC,MAAM,CAAC,MAHQ,CAuCyF,CAAaf,CAAW,CAACH,MAAzB,CAF/F,CAEkI,aAFlI,CAEgJG,CAAW,CAACH,MAF5J,CAEqK,iDAFrK,CAGNc,CAHM,CAGM,8EAHN,CAI4Bf,CAAO,CAACgB,EAJpC,CAIyC,kBAJzC,CAI4DR,CAJ5D,CAIoE,mBAJpE,CAIwFC,CAJxF,CAIiG,MAJjG,CAIyGT,CAAO,CAACgB,EAJjH,CAIsH,KAJtH,CAI8HR,CAJ9H,CAIsI,sFAGtJ,CA9CD,EA+CAhC,CAAC,CAAC,eAAD,CAAD,CAAmB4C,IAAnB,CAAyB,EAAzB,EACA5C,CAAC,CAAC,eAAD,CAAD,CAAmBI,MAAnB,CAA2BiB,CAA3B,CACH,CA1DE,CA2DHwB,KAAK,CAAE,eAAUC,CAAV,CAA0BC,CAA1B,CAAsCC,CAAtC,CAAoD,CACvD7C,CAAE,CAACiB,IAAH,GACAf,OAAO,CAACC,GAAR,CAAa,cAAgByC,CAAhB,CAA6B,GAA7B,CAAmCC,CAAhD,EACA3C,OAAO,CAACC,GAAR,CAAawC,CAAb,CACH,CA/DE,CAAP,CAiEH,CAED9C,CAAC,CAACiD,QAAD,CAAD,CAAYC,KAAZ,CAAkB,UAAU,CAExB1C,CAAa,GAEb2C,WAAW,CAAC,UAAU,CAClBnD,CAAC,CAAC,WAAD,CAAD,CAAeoD,OAAf,CAAuB,GAAvB,CACH,CAFU,CAER,GAFQ,CAId,CARD,EAUApD,CAAC,CAACiD,QAAD,CAAD,CAAYI,EAAZ,CAAe,OAAf,CAAuB,2BAAvB,CAAoD,UAAU,CAC1DrD,CAAC,CAAC,2BAAD,CAAD,CAA+BoB,IAA/B,CAAoC,CAApC,EACApB,CAAC,CAAC,eAAD,CAAD,CAAmBS,IAAnB,CAAwB,GAAxB,CACH,CAHD,EAKAT,CAAC,CAACiD,QAAD,CAAD,CAAYI,EAAZ,CAAe,OAAf,CAAuB,qBAAvB,CAA8C,UAAU,CACpDrD,CAAC,CAAC,eAAD,CAAD,CAAmBoB,IAAnB,GACApB,CAAC,CAAC,2BAAD,CAAD,CAA+BS,IAA/B,CAAoC,GAApC,CACH,CAHD,EAKAT,CAAC,CAACiD,QAAD,CAAD,CAAYI,EAAZ,CAAe,OAAf,CAAuB,aAAvB,CAAsC,UAAU,IAExCC,CAAAA,CAAS,CAAGtD,CAAC,CAAC,IAAD,CAAD,CAAQe,IAAR,CAAa,IAAb,CAF4B,CAGxCwC,CAAM,CAAGvD,CAAC,CAAC,IAAD,CAAD,CAAQe,IAAR,CAAa,OAAb,CAH+B,CAIxCkB,CAAM,CAAGjC,CAAC,CAAC,IAAD,CAAD,CAAQe,IAAR,CAAa,QAAb,CAJ+B,CAM5CyC,IAAI,CAAC,CACDZ,IAAI,GADH,CAEDZ,KAAK,CAAE,WAAasB,CAFnB,CAGDG,IAAI,CAAE,oCAAmCF,CAAnC,CAA2C,6EAA3C,CAC6BtB,CAD7B,CACqC,MAJ1C,CAKDyB,IAAI,CAAE,MALL,CAAD,CAOP,CAbD,EAeA1D,CAAC,CAACiD,QAAD,CAAD,CAAYI,EAAZ,CAAe,OAAf,CAAuB,cAAvB,CAAuC,UAAU,CAE7C,GAAIM,CAAAA,CAAW,CAAG3D,CAAC,CAAC,IAAD,CAAD,CAAQe,IAAR,CAAa,IAAb,CAAlB,CAEAyC,IAAI,CAAC,CACDZ,IAAI,GADH,CAEDZ,KAAK,CAAE,iBAFN,CAGDyB,IAAI,CAAE,iGAHL,CAIDC,IAAI,CAAE,SAJL,CAKDE,gBAAgB,GALf,CAMDC,iBAAiB,CAAE,gBANlB,CAAD,CAOC,SAASC,CAAT,CAAoB,CACrB,GAAIA,CAAJ,CAAe,CACX3D,CAAE,CAACM,IAAH,GACAT,CAAC,CAACU,IAAF,CAAO,CACHC,MAAM,CAAE,MADL,CAEHC,GAAG,CAAE,+CAFF,CAGHC,WAAW,CAAE,kBAHV,CAIHC,QAAQ,CAAE,MAJP,CAKHC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAC,SAAW,4BAAZ,CAA0C,OAAS,CAAE0C,CAAF,CAAnD,CAAf,CALH,CAMHzC,OAAO,CAAE,iBAAUC,CAAV,CAAoB,CACzBhB,CAAE,CAACiB,IAAH,GACAZ,CAAa,GACb,GAA6B,CAAzB,GAAAW,CAAQ,CAAC4C,WAAb,CAAgC,CAC5BP,IAAI,CACA,WADA,CAEA,2CAFA,CAGA,SAHA,CAKP,CAND,IAMK,CACDA,IAAI,CACA,QADA,CAEA,0CAFA,CAGA,OAHA,CAKP,CACJ,CAtBE,CAuBHX,KAAK,CAAE,eAAUC,CAAV,CAA0BC,CAA1B,CAAsCC,CAAtC,CAAoD,CACvD7C,CAAE,CAACiB,IAAH,GACAf,OAAO,CAACC,GAAR,CAAa,cAAgByC,CAAhB,CAA6B,GAA7B,CAAmCC,CAAhD,EACA3C,OAAO,CAACC,GAAR,CAAawC,CAAb,CACH,CA3BE,CAAP,CA6BH,CACJ,CAxCG,CA0CP,CA9CD,EAgDA9C,CAAC,CAACiD,QAAD,CAAD,CAAYI,EAAZ,CAAe,OAAf,CAAwB,gBAAxB,CAA0C,UAAU,IAE5CW,CAAAA,CAAW,CAAGhE,CAAC,CAAC,MAAD,CAAD,CAAU4C,IAAV,EAF8B,CAG5CX,CAAM,CAAG,CACTD,KAAK,CAAChC,CAAC,CAAC,YAAD,CAAD,CAAgBiE,GAAhB,EADG,CAET3B,UAAU,CAACtC,CAAC,CAAC,aAAD,CAAD,CAAiBiE,GAAjB,EAFF,CAHmC,CAQhD,GAAqB,EAAhB,EAAAhC,CAAM,CAACD,KAAR,EAA8C,EAArB,EAAAC,CAAM,CAACK,UAApC,CAAuD,CACnDnC,CAAE,CAACM,IAAH,GACAT,CAAC,CAACU,IAAF,CAAO,CACHC,MAAM,CAAE,MADL,CAEHC,GAAG,CAAE,+CAFF,CAGHC,WAAW,CAAE,kBAHV,CAIHC,QAAQ,CAAE,MAJP,CAKHC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAC,SAAW,iBAAZ,CAA+B,OAAS,CAAEgB,CAAF,CAAU+B,CAAV,CAAxC,CAAf,CALH,CAMH9C,OAAO,CAAE,iBAAUC,CAAV,CAAoB,CACzBhB,CAAE,CAACiB,IAAH,GACA,GAA6B,CAAzB,GAAAD,CAAQ,CAAC4C,WAAb,CAAgC,CAC5BP,IAAI,CACA,WADA,CAEA,yDAA2DrC,CAAQ,CAACG,aAFpE,CAGA,SAHA,CAAJ,CAKAd,CAAa,EAChB,CAPD,IAOK,CACDgD,IAAI,CACA,QADA,CAEA,UAAYrC,CAAQ,CAACG,aAFrB,CAGA,OAHA,CAKP,CACJ,CAtBE,CAuBHuB,KAAK,CAAE,eAAUC,CAAV,CAA0BC,CAA1B,CAAsCC,CAAtC,CAAoD,CACvD7C,CAAE,CAACiB,IAAH,GACAf,OAAO,CAACC,GAAR,CAAa,cAAgByC,CAAhB,CAA6B,GAA7B,CAAmCC,CAAhD,EACA3C,OAAO,CAACC,GAAR,CAAawC,CAAb,CACH,CA3BE,CAAP,CA6BH,CA/BD,IA+BK,CACDU,IAAI,CACA,OADA,CAEA,+EAFA,CAGA,SAHA,CAKP,CAEJ,CA/CD,CAiDH,CA5MC,CA8MV,CA/UD,CAAN","sourcesContent":["// Standard license block omitted.\r\n/*\r\n * @package    block_ases\r\n * @copyright  ASES\r\n * @author     Jeison Cardona Gómez\r\n * @copyright  Jeison Cardona Gómez < jeison.cardona@correounivalle.edu.co >\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n \r\n /**\r\n  * @module block_ases/ases_incident_system\r\n  */\r\n\r\n define(\r\n    [\r\n        'jquery', \r\n        'block_ases/sweetalert', \r\n        'block_ases/jqueryui',\r\n        'block_ases/loading_indicator'\r\n       ], \r\n        function($, sweetalert, jqueryui, li ) {\r\n\r\n            let style='\\\r\n            #ases_incident_system_box {\\\r\n                padding: 0.5em;\\\r\n                color:white;\\\r\n                cursor:pointer;\\\r\n                background-color:#d51b23;\\\r\n                position: fixed;\\\r\n                bottom: 0px;\\\r\n                left: 0px;\\\r\n                z-index: 9999;\\\r\n                height: 30px;\\\r\n            }\\\r\n            #incident_box {\\\r\n                position: fixed;\\\r\n                bottom: 0px;\\\r\n                left: 0px;\\\r\n                z-index: 9999;\\\r\n                height: 400px;\\\r\n                border:1px solid #d51b23;\\\r\n                width: 400px;\\\r\n                background-color:white;\\\r\n                display:none;\\\r\n            }\\\r\n            .inc_header{\\\r\n                height: 30px;\\\r\n                background-color:#d51b23;\\\r\n                padding: 0.5em;\\\r\n                color:white;\\\r\n            }\\\r\n            .inc_body{\\\r\n                padding: 0.7em;\\\r\n            }\\\r\n            #close_incident_box{\\\r\n                float:right;\\\r\n                cursor:pointer;\\\r\n            }\\\r\n            #new_inc{\\\r\n                width: 100%;\\\r\n            }\\\r\n            #inc_detail{\\\r\n                width: 100%;\\\r\n            }\\\r\n            #inc_registrar{\\\r\n                background-color:#d51b23;\\\r\n                color:white;\\\r\n                padding: 0.3em;\\\r\n                float:right;\\\r\n                margin-top:0.5em;\\\r\n            }\\\r\n            #inc_registrar:hover{\\\r\n                background-color:whitesmoke;\\\r\n                color:black;\\\r\n            }\\\r\n            .inc_item{\\\r\n                cursor:pointer;\\\r\n            }\\\r\n            .inc_item > .status-icon{\\\r\n                float:left;\\\r\n                margin-right:0.3em;\\\r\n            }\\\r\n            .inc_item > .remove-icon{\\\r\n                float:right;\\\r\n                color:gray\\\r\n            }\\\r\n            .inc_item > .remove-icon:hover{\\\r\n                color:black\\\r\n            }\\\r\n            .inc_item:hover{\\\r\n                background-color:whitesmoke;\\\r\n            }\\\r\n            #old_inc_body{\\\r\n                overflow-y: auto;\\\r\n                height:130px;\\\r\n            }\\\r\n          ';\r\n\r\n            let div_ases_incident_system_box = '\\\r\n            <div \\\r\n                id=\"ases_incident_system_box\"\\\r\n                title=\"Reporte de incidencias\">\\\r\n                <i id=\"inc_icon\" class=\"glyphicon glyphicon-wrench ases-glyphicon ases-glyphicon-wrench\"></i>\\\r\n                <span id=\"inc_text\"><strong>Incidencias</strong></span>\\\r\n            </div>\\\r\n            ';\r\n\r\n            let div_incident_box = '\\\r\n            <div id=\"incident_box\" >\\\r\n                <div class=\"inc_header\">\\\r\n                    <i class=\"glyphicon glyphicon-wrench ases-glyphicon ases-glyphicon-wrench\"></i>\\\r\n                    <span><strong>Incidencias</strong></span>\\\r\n                    <i id=\"close_incident_box\" class=\"glyphicon glyphicon-remove ases-glyphicon ases-glyphicon-remove\"></i>\\\r\n                </div>\\\r\n                <div class=\"inc_body\">\\\r\n                    <div id=\"prev_inc_selector\">\\\r\n                    </div>\\\r\n                    <div id=\"new_inc\">\\\r\n                        <span><strong>Registro de nueva incidencia</strong></span>\\\r\n                        <hr style=\"margin:5px;\">\\\r\n                        <input id=\"inc_title\" class=\"form-control ases-form-control\" placeholder=\"Título corto\" type=\"text\">\\\r\n                        <textarea id=\"inc_detail\" class=\"form-control ases-form-control\" name=\"\" placeholder=\"Descripción detallada de la incidencia\" cols=\"\" rows=\"2\"></textarea>\\\r\n                        <a id=\"inc_registrar\" href=\"javascript:void(0)\">Registrar</a>\\\r\n                    </div>\\\r\n                    <hr style=\"margin-bottom:5px;margin-top:50px;\">\\\r\n                    <div id=\"old_inc\">\\\r\n                        <span><strong>Incidencias previas</strong></span>\\\r\n                    </div>\\\r\n                    <hr style=\"margin:5px;\">\\\r\n                    <div id=\"old_inc_body\">\\\r\n                    </div>\\\r\n                    <hr style=\"margin:5px;\">\\\r\n                </div>\\\r\n            </div>\\\r\n            ';\r\n\r\n            $(\"head\").append( \"<style>\" + style + \"</style>\" );\r\n            $(\"body\").append( div_ases_incident_system_box );\r\n            $(\"body\").append( div_incident_box );\r\n   \r\n           console.log( \"ases_incident_system loaded\" );\r\n\r\n           return {\r\n                init: function(){\r\n\r\n                    function loadIncidents(){\r\n                        li.show();\r\n                        $.ajax({\r\n                            method: \"POST\",\r\n                            url: \"../managers/incident_manager/incident_api.php\",\r\n                            contentType: \"application/json\",\r\n                            dataType: \"json\",\r\n                            data: JSON.stringify({\"function\":\"get_logged_user_incidents\", \"params\":[]}) ,\r\n                            success: function( response ){\r\n                                li.hide();\r\n                                let inc_list = \"\";\r\n                                response.data_response.forEach(function(element){\r\n\r\n                                    let status_color = {\r\n                                        solved:\"#239f07\",\r\n                                        waiting:\"#ff9a00\",\r\n                                        closed:\"#000\"\r\n                                    };\r\n\r\n                                    let status = JSON.parse( element.estados );\r\n                                    let last_status = {\r\n                                        change_order:-1,\r\n                                        status:\"\"\r\n                                    };\r\n\r\n                                    status.forEach(function(e){\r\n                                        if( last_status.change_order < parseInt(e.change_order) ){\r\n                                            last_status = e;\r\n                                        }\r\n                                    });\r\n\r\n                                    let title = null;\r\n                                    let detail = null;\r\n                                    let comments = JSON.parse( element.comentarios );\r\n\r\n                                    comments.forEach(function(e){\r\n                                        if( parseInt( e.message_number ) == 0 ){\r\n                                            title = e.message.title;\r\n                                            detail = e.message.commentary;\r\n                                            return;\r\n                                        }\r\n                                    });\r\n\r\n\r\n                                    let close_icon = '';\r\n\r\n                                    if( last_status.status != \"solved\" ){\r\n                                        close_icon = '<i class=\"remove-icon glyphicon glyphicon-remove-sign ases-glyphicon ases-glyphicon-remove-sign\" data-id=\"' + element.id + '\" title=\"Eliminar\"></i>';\r\n                                    }\r\n\r\n                                    inc_list  += '\\\r\n                                    <div class=\"inc_item col-xs-12 col-sm-12 col-md-12 col-lg-12 ases-col-xs-12 ases-col-sm-12 ases-col-md-12 ases-col-lg-12\">\\\r\n                                        <i class=\"status-icon glyphicon glyphicon-record ases-glyphicon ases-glyphicon-record\" style=\"color:' + status_color[last_status.status] + '\" title=\"' + last_status.status + '\"></i>\\\r\n                                        '+ close_icon +'\\\r\n                                        <div class=\"item-title\" data-id=\"' + element.id + '\" data-title=\"' + title + '\" data-detail=\"' + detail + '\">#' + element.id + ' - ' + title + '</div>\\\r\n                                    </div>\\\r\n                                    ';\r\n                                });\r\n                                $(\"#old_inc_body\").html( \"\" );\r\n                                $(\"#old_inc_body\").append( inc_list );\r\n                            },\r\n                            error: function( XMLHttpRequest, textStatus, errorThrown ) {\r\n                                li.hide();\r\n                                console.log( \"some error \" + textStatus + \" \" + errorThrown );\r\n                                console.log( XMLHttpRequest );\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    $(document).ready(function(){\r\n\r\n                        loadIncidents();\r\n\r\n                        setInterval(function(){ \r\n                            $(\"#inc_text\").fadeOut(700); \r\n                        }, 3000);\r\n\r\n                    });\r\n\r\n                    $(document).on(\"click\",\"#ases_incident_system_box\", function(){\r\n                        $(\"#ases_incident_system_box\").hide(0);\r\n                        $(\"#incident_box\").show(100);\r\n                    });\r\n\r\n                    $(document).on(\"click\",\"#close_incident_box\", function(){\r\n                        $(\"#incident_box\").hide();\r\n                        $(\"#ases_incident_system_box\").show(100);\r\n                    });\r\n\r\n                    $(document).on(\"click\",\".item-title\", function(){\r\n\r\n                        let ticket_id = $(this).data(\"id\");\r\n                        let _title = $(this).data(\"title\");\r\n                        let detail = $(this).data(\"detail\");\r\n\r\n                        swal({\r\n                            html:true,\r\n                            title: 'Ticket #' + ticket_id,\r\n                            text: '<span style=\"font-size:1.5em;\">'+ _title +'</span><br><br>\\\r\n                                   <strong>Detalle:</strong>'+ detail +'<br>',\r\n                            type: 'info'\r\n                          });\r\n                    });\r\n\r\n                    $(document).on(\"click\",\".remove-icon\", function(){\r\n                        \r\n                        let incident_id = $(this).data('id');\r\n\r\n                        swal({\r\n                            html:true,\r\n                            title: 'Confirmación',\r\n                            text: \"<strong>Nota importante!</strong>: Está cerrando una incidencia que aun no está resuelta.\",\r\n                            type: 'warning',\r\n                            showCancelButton: true,\r\n                            confirmButtonText: 'Sí, cerrar!'\r\n                          }, function(isConfirm) {\r\n                            if (isConfirm) {\r\n                                li.show();\r\n                                $.ajax({\r\n                                    method: \"POST\",\r\n                                    url: \"../managers/incident_manager/incident_api.php\",\r\n                                    contentType: \"application/json\",\r\n                                    dataType: \"json\",\r\n                                    data: JSON.stringify({\"function\":\"close_logged_user_incident\", \"params\":[ incident_id ]}) ,\r\n                                    success: function( response ){\r\n                                        li.hide();\r\n                                        loadIncidents();\r\n                                        if( response.status_code === 0 ){\r\n                                            swal(\r\n                                                'Éxito!',\r\n                                                'Se ha cerrado correctamente la incidencia',\r\n                                                'success'\r\n                                            );\r\n                                        }else{\r\n                                            swal(\r\n                                                'Error!',\r\n                                                'Oops!: Al parece no existe la incidencia',\r\n                                                'error'\r\n                                            );\r\n                                        }\r\n                                    },\r\n                                    error: function( XMLHttpRequest, textStatus, errorThrown ) {\r\n                                        li.hide();\r\n                                        console.log( \"some error \" + textStatus + \" \" + errorThrown );\r\n                                        console.log( XMLHttpRequest );\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n\r\n                    });\r\n\r\n                    $(document).on(\"click\", \"#inc_registrar\", function(){\r\n\r\n                        let system_info = $(\"html\").html();\r\n                        let detail = {\r\n                            title:$(\"#inc_title\").val(),\r\n                            commentary:$(\"#inc_detail\").val()\r\n                        };\r\n\r\n                        if( (detail.title != \"\") && (detail.commentary != \"\") ){\r\n                            li.show();\r\n                            $.ajax({\r\n                                method: \"POST\",\r\n                                url: \"../managers/incident_manager/incident_api.php\",\r\n                                contentType: \"application/json\",\r\n                                dataType: \"json\",\r\n                                data: JSON.stringify({\"function\":\"create_incident\", \"params\":[ detail, system_info ]}) ,\r\n                                success: function( response ){\r\n                                    li.hide();\r\n                                    if( response.status_code === 0 ){\r\n                                        swal(\r\n                                            'Éxito!',\r\n                                            'Se ha registrado correctamente la incidencia, ticket #' + response.data_response,\r\n                                            'success'\r\n                                        );\r\n                                        loadIncidents();\r\n                                    }else{\r\n                                        swal(\r\n                                            'Error!',\r\n                                            'Oops!: ' + response.data_response,\r\n                                            'error'\r\n                                        );\r\n                                    }\r\n                                },\r\n                                error: function( XMLHttpRequest, textStatus, errorThrown ) {\r\n                                    li.hide();\r\n                                    console.log( \"some error \" + textStatus + \" \" + errorThrown );\r\n                                    console.log( XMLHttpRequest );\r\n                                }\r\n                            });\r\n                        }else{\r\n                            swal(\r\n                                'Oops!',\r\n                                'Verifica que tanto el título como la descripción no estén vacíos.',\r\n                                'warning'\r\n                            );\r\n                        }\r\n\r\n                    });\r\n\r\n                }\r\n           }\r\n       }\r\n);"],"file":"ases_incident_system.min.js"}