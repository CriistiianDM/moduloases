{"version":3,"sources":["../src/new_logic_form_gt.js"],"names":["define","$","init","self","instance_id","get_id_instance","list_attendance","generate_attendance_table","form","find","after","load_attendance_list","load_students_of_monitor","instance","data","push","name","value","ajax","type","url","success","msg","html","rows","content","x","append","username","firstname","lastname","idtalentos","dataType","cache","error","alert","urlParameters","location","search","split","indexOf","intanceparameter","list","editable"],"mappings":"AASAA,OAAM,gCAAC,CAAC,QAAD,CAAW,sBAAX,CAAmC,8BAAnC,CAAmE,uBAAnE,CAA2F,oCAA3F,CAAD,CACF,SAASC,CAAT,CAAwD,CAEpD,MAAO,CAEHC,IAAI,CAAE,eAAW,IAETC,CAAAA,CAAI,CAAG,IAFE,CAGTC,CAAW,CAAGD,CAAI,CAACE,eAAL,EAHL,CAITC,CAAe,CAAGH,CAAI,CAACI,yBAAL,EAJT,CAKTC,CAAI,CAAGP,CAAC,CAAC,4BAAD,CAAD,CAAgCQ,IAAhC,CAAqC,MAArC,EAA6CA,IAA7C,CAAkD,IAAlD,EAAwDC,KAAxD,CAA8DJ,CAA9D,CALE,CAQbH,CAAI,CAACQ,oBAAL,eAAgDP,CAAhD,EACAD,CAAI,CAACS,wBAAL,CAA8BR,CAA9B,CAEH,CAbE,CAeHQ,wBAAwB,CAAE,kCAASC,CAAT,CAAmB,CACzC,GAAIC,CAAAA,CAAI,GAAR,CACAA,CAAI,CAACC,IAAL,CAAU,CACNC,IAAI,CAAE,UADA,CAENC,KAAK,CAAE,aAFD,CAAV,EAIAH,CAAI,CAACC,IAAL,CAAU,CACNC,IAAI,CAAE,aADA,CAENC,KAAK,CAAEJ,CAFD,CAAV,EAKAZ,CAAC,CAACiB,IAAF,CAAO,CACHC,IAAI,CAAE,MADH,CAEHL,IAAI,CAAEA,CAFH,CAGHM,GAAG,CAAE,uDAHF,CAIHC,OAAO,CAAE,iBAASC,CAAT,CAAc,CACnBrB,CAAC,CAAC,gBAAD,CAAD,CAAoBsB,IAApB,CAAyB,EAAzB,EACA,GAAgB,CAAZ,EAAAD,CAAG,CAACE,IAAR,CAAmB,CAEf,GAAIC,CAAAA,CAAO,CAAGH,CAAG,CAACG,OAAlB,CACA,IAAKC,CAAL,GAAUD,CAAAA,CAAV,CAAmB,CAEfxB,CAAC,CAAC,gBAAD,CAAD,CAAoB0B,MAApB,CAA2B,YAAcF,CAAO,CAACC,CAAD,CAAP,CAAWE,QAAzB,CAAoC,YAApC,CAAmDH,CAAO,CAACC,CAAD,CAAP,CAAWG,SAA9D,CAA0E,YAA1E,CAAyFJ,CAAO,CAACC,CAAD,CAAP,CAAWI,QAApG,CAA+G,4BAA/G,CAA8IL,CAAO,CAACC,CAAD,CAAP,CAAWK,UAAzJ,CAAsK,aAAjM,CACH,CAEJ,CARD,IAQO,CACH9B,CAAC,CAAC,kBAAD,CAAD,CAAsB0B,MAAtB,CAA6B,iJAA7B,CACH,CACJ,CAjBE,CAkBHK,QAAQ,CAAE,MAlBP,CAmBHC,KAAK,CAAE,OAnBJ,CAoBHC,KAAK,CAAE,gBAAc,CACjBC,KAAK,CAAC,4DAAD,CACR,CAtBE,CAAP,CAyBH,CAnDE,CAqDH5B,yBAAyB,CAAE,oCAAW,CAClC,GAAID,CAAAA,CAAe,CAAG,EAAtB,CACAA,CAAe,EAAI,wDAAnB,CACAA,CAAe,EAAI,qBAAnB,CACAA,CAAe,EAAI,6BAAnB,CACAA,CAAe,EAAI,+JAAnB,CACAA,CAAe,EAAI,uEAAnB,CACAA,CAAe,EAAI,SAAnB,CACAA,CAAe,EAAI,MAAnB,CACAA,CAAe,EAAI,qEAAnB,CACAA,CAAe,EAAI,OAAnB,CACAA,CAAe,EAAI,UAAnB,CACAA,CAAe,EAAI,wCAAnB,CACAA,CAAe,EAAI,0BAAnB,CAEA,MAAOA,CAAAA,CAEV,CAtEE,CAyEHD,eAAe,CAAE,0BAAW,CACxB,GAAI+B,CAAAA,CAAa,CAAGC,QAAQ,CAACC,MAAT,CAAgBC,KAAhB,CAAsB,GAAtB,CAApB,CACA,IAAK,GAAIb,CAAAA,CAAT,GAAcU,CAAAA,CAAd,CAA6B,CACzB,GAA8C,CAA1C,EAAAA,CAAa,CAACV,CAAD,CAAb,CAAiBc,OAAjB,CAAyB,YAAzB,CAAJ,CAAiD,CAC7C,GAAIC,CAAAA,CAAgB,CAAGL,CAAa,CAACV,CAAD,CAAb,CAAiBa,KAAjB,CAAuB,GAAvB,CAAvB,CACA,MAAOE,CAAAA,CAAgB,CAAC,CAAD,CAC1B,CACJ,CACD,MAAO,EACV,CAlFE,CAqFH9B,oBAAoB,CAAE,8BAAS+B,CAAT,CAAeC,CAAf,CAAyB9B,CAAzB,CAAmC,CAErD,GAAI6B,CAAI,SAAR,CAAwB,CACpBA,CAAI,CAAG,IACV,CAED,GAAIC,CAAQ,SAAZ,CAA4B,CACxBA,CAAQ,CAAG,IACd,CAED,GAAI7B,CAAAA,CAAI,GAAR,CAEAA,CAAI,CAACC,IAAL,CAAU,CACNC,IAAI,CAAE,UADA,CAENC,KAAK,CAAE,aAFD,CAAV,EAIAH,CAAI,CAACC,IAAL,CAAU,CACNC,IAAI,CAAE,aADA,CAENC,KAAK,CAAEJ,CAFD,CAAV,EAKAZ,CAAC,CAACiB,IAAF,CAAO,CACHC,IAAI,CAAE,MADH,CAEHL,IAAI,CAAEA,CAFH,CAGHM,GAAG,CAAE,uDAHF,CAIHC,OAAO,CAAE,iBAASC,CAAT,CAAc,CACnBrB,CAAC,CAAC,iCAAD,CAAD,CAAqCsB,IAArC,CAA0C,EAA1C,EAEA,GAAgB,CAAZ,EAAAD,CAAG,CAACE,IAAR,CAAmB,CAEf,GAAIC,CAAAA,CAAO,CAAGH,CAAG,CAACG,OAAlB,CACA,GAAI,CAACiB,CAAL,CAAW,CACP,IAAKhB,CAAL,GAAUD,CAAAA,CAAV,CAAmB,CACfxB,CAAC,CAAC,4DAAD,CAAD,CAAgE0B,MAAhE,CAAuE,YAAcF,CAAO,CAACC,CAAD,CAAP,CAAWE,QAAzB,CAAoC,YAApC,CAAmDH,CAAO,CAACC,CAAD,CAAP,CAAWG,SAA9D,CAA0E,YAA1E,CAAyFJ,CAAO,CAACC,CAAD,CAAP,CAAWI,QAApG,CAA+G,oFAA/G,CAAsML,CAAO,CAACC,CAAD,CAAP,CAAWK,UAAjN,CAA8N,kBAArS,CACH,CACJ,CAJD,IAIO,CACH,IAAKL,CAAL,GAAUD,CAAAA,CAAV,CAAmB,CAEf,GAAuB,CAAC,CAApB,EAAAiB,CAAI,CAACF,OAAL,CAAad,CAAb,CAAJ,CAA2B,CACvBzB,CAAC,CAAC,4DAAD,CAAD,CAAgE0B,MAAhE,CAAuE,aAAeF,CAAO,CAACC,CAAD,CAAP,CAAWE,QAA1B,CAAqC,YAArC,CAAoDH,CAAO,CAACC,CAAD,CAAP,CAAWG,SAA/D,CAA2E,YAA3E,CAA0FJ,CAAO,CAACC,CAAD,CAAP,CAAWI,QAArG,CAAgH,yGAAhH,CAA4NL,CAAO,CAACC,CAAD,CAAP,CAAWK,UAAvO,CAAoP,kBAA3T,CACH,CAFD,IAEO,CACH9B,CAAC,CAAC,4DAAD,CAAD,CAAgE0B,MAAhE,CAAuE,YAAcF,CAAO,CAACC,CAAD,CAAP,CAAWE,QAAzB,CAAoC,YAApC,CAAmDH,CAAO,CAACC,CAAD,CAAP,CAAWG,SAA9D,CAA0E,YAA1E,CAAyFJ,CAAO,CAACC,CAAD,CAAP,CAAWI,QAApG,CAA+G,oFAA/G,CAAsML,CAAO,CAACC,CAAD,CAAP,CAAWK,UAAjN,CAA8N,kBAArS,CACH,CACJ,CACJ,CACJ,CAjBD,IAiBO,CACH9B,CAAC,CAAC,sDAAD,CAAD,CAA0D0B,MAA1D,CAAiE,8IAAjE,CACH,CAEJ,CA5BE,CA6BHK,QAAQ,CAAE,MA7BP,CA8BHC,KAAK,CAAE,OA9BJ,CA+BHC,KAAK,CAAE,gBAAc,CACjBC,KAAK,CAAC,uCAAD,CACR,CAjCE,CAAP,CAmCH,CA7IE,CA+IV,CAlJC,CAAN","sourcesContent":["// Standard license block omitted.\r\n/*\r\n * @package    block_ases/instanceconfiguration_main\r\n * @copyright  ASES\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n/**\r\n * @module block_ases/instanceconfiguration_main\r\n */\r\ndefine(['jquery', 'block_ases/bootstrap', 'block_ases/jquery.dataTables', 'block_ases/sweetalert','block_ases/dphpforms_form_renderer'],\r\n    function($, bootstrap, datatables, swal,renderer_forms) {\r\n\r\n        return {\r\n\r\n            init: function() {\r\n\r\n                var self = this;\r\n                var instance_id = self.get_id_instance();\r\n                var list_attendance = self.generate_attendance_table();\r\n                var form = $('#modal_v2_groupal_tracking').find('form').find('h1').after(list_attendance);\r\n                \r\n\r\n                self.load_attendance_list(undefined, undefined, instance_id);\r\n                self.load_students_of_monitor(instance_id);\r\n\r\n            },\r\n            //Load the list of students assigned to the current monitor.\r\n            load_students_of_monitor: function(instance) {\r\n                var data = new Array();\r\n                data.push({\r\n                    name: \"function\",\r\n                    value: \"load_grupal\"\r\n                });\r\n                data.push({\r\n                    name: \"idinstancia\",\r\n                    value: instance\r\n                });\r\n\r\n                $.ajax({\r\n                    type: \"POST\",\r\n                    data: data,\r\n                    url: \"../managers/user_management/usermanagement_report.php\",\r\n                    success: function(msg) {\r\n                        $('#mytable tbody').html('');\r\n                        if (msg.rows != 0) {\r\n\r\n                            var content = msg.content;\r\n                            for (x in content) {\r\n\r\n                                $('#mytable tbody').append(\"<tr> <td>\" + content[x].username + \"</td> <td>\" + content[x].firstname + \"</td> <td>\" + content[x].lastname + \"</td>  <td class=\\\"hide\\\">\" + content[x].idtalentos + \"</td> </tr>\");\r\n                            }\r\n\r\n                        } else {\r\n                            $('#list_grupal_seg').append(\"<a>No registra ningún estudiante a su cargo.Por favor dirigete a la oficina de Sistemas de talentos pilos para gestionar su situación</a>\");\r\n                        }\r\n                    },\r\n                    dataType: \"json\",\r\n                    cache: \"false\",\r\n                    error: function(msg) {\r\n                        alert(\"Error al cargar lista de estudiantes asignados del monitor\");\r\n                    },\r\n                });\r\n\r\n            },\r\n            //Generates the student attendance table in the modal\r\n            generate_attendance_table: function() {\r\n                var list_attendance = '';\r\n                list_attendance += '<div class=\"mymodal-body mymodal-body_v2 col-sm-12\">';\r\n                list_attendance += '<div class=\"row\">';\r\n                list_attendance += '<div class= \"form-group\">';\r\n                list_attendance += '<div data-spy=\"scroll\" data-target=\".navbar\" data-offset=\"50\" class=\"well col-md-12\" id=\"list_grupal_seg_consult\" name=\"list_grupal_seg_consult\">';\r\n                list_attendance += '<table id=\"list_students_attendance\" class=\"table table-striped\">';\r\n                list_attendance += '<thead>';\r\n                list_attendance += '<tr>';\r\n                list_attendance += '<th>Código</th><th>Nombre</th><th>Apellido</th><th>Presente</th>';\r\n                list_attendance += '</tr>';\r\n                list_attendance += '</thead>';\r\n                list_attendance += '<tbody id=\"mytbody\"></tbody></table>';\r\n                list_attendance += '</div></div></div></div>';\r\n\r\n                return list_attendance;\r\n\r\n            },\r\n\r\n            //Check the current instance\r\n            get_id_instance: function() {\r\n                var urlParameters = location.search.split('&');\r\n                for (var x in urlParameters) {\r\n                    if (urlParameters[x].indexOf('instanceid') >= 0) {\r\n                        var intanceparameter = urlParameters[x].split('=');\r\n                        return intanceparameter[1];\r\n                    }\r\n                }\r\n                return 0;\r\n            },\r\n\r\n            //Load students to the student attendance chart in the modal\r\n            load_attendance_list: function(list, editable, instance) {\r\n\r\n                if (list === undefined) {\r\n                    list = null;\r\n                }\r\n\r\n                if (editable === undefined) {\r\n                    editable = null;\r\n                }\r\n\r\n                var data = new Array();\r\n\r\n                data.push({\r\n                    name: \"function\",\r\n                    value: \"load_grupal\"\r\n                });\r\n                data.push({\r\n                    name: \"idinstancia\",\r\n                    value: instance\r\n                });\r\n\r\n                $.ajax({\r\n                    type: \"POST\",\r\n                    data: data,\r\n                    url: \"../managers/user_management/usermanagement_report.php\",\r\n                    success: function(msg) {\r\n                        $('#list_students_attendance tbody').html('');\r\n\r\n                        if (msg.rows != 0) {\r\n\r\n                            var content = msg.content;\r\n                            if (!list) {\r\n                                for (x in content) {\r\n                                    $('#modal_v2_groupal_tracking #list_students_attendance tbody').append(\"<tr> <td>\" + content[x].username + \"</td> <td>\" + content[x].firstname + \"</td> <td>\" + content[x].lastname + \"</td>  <td><input type=\\\"checkbox\\\" id=\\\"asistencia\\\" name=\\\"asistencia\\\" value=\\\"\" + content[x].idtalentos + \"\\\"/></td>  </tr>\");\r\n                                }\r\n                            } else {\r\n                                for (x in content) {\r\n\r\n                                    if (list.indexOf(x) != -1) {\r\n                                        $('#modal_v2_groupal_tracking #list_students_attendance tbody').append(\" <tr> <td>\" + content[x].username + \"</td> <td>\" + content[x].firstname + \"</td> <td>\" + content[x].lastname + \"</td>  <td><input type=\\\"checkbox\\\" checked=\\\"checked\\\" id=\\\"asistencia\\\" name=\\\"asistencia\\\"  value=\\\"\" + content[x].idtalentos + \"\\\"/></td>  </tr>\");\r\n                                    } else {\r\n                                        $('#modal_v2_groupal_tracking #list_students_attendance tbody').append(\"<tr> <td>\" + content[x].username + \"</td> <td>\" + content[x].firstname + \"</td> <td>\" + content[x].lastname + \"</td>  <td><input type=\\\"checkbox\\\" id=\\\"asistencia\\\" name=\\\"asistencia\\\" value=\\\"\" + content[x].idtalentos + \"\\\"/></td>  </tr>\");\r\n                                    }\r\n                                }\r\n                            }\r\n                        } else {\r\n                            $('#modal_v2_groupal_tracking #list_students_attendance').append(\"<a>No registra ningun estudiante a su cargo.Por favor dirigete a la oficina de Sistemas de talentos pilos para gestionar tu situación</a>\");\r\n                        }\r\n\r\n                    },\r\n                    dataType: \"json\",\r\n                    cache: \"false\",\r\n                    error: function(msg) {\r\n                        alert(\"error al cargar listado de asistencia\");\r\n                    },\r\n                });\r\n            }\r\n        };\r\n    });"],"file":"new_logic_form_gt.min.js"}