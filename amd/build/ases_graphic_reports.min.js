define ("block_ases/ases_graphic_reports",["jquery","block_ases/jszip","block_ases/pdfmake","block_ases/jquery.dataTables","block_ases/dataTables.autoFill","block_ases/dataTables.buttons","block_ases/buttons.html5","block_ases/buttons.flash","block_ases/buttons.print","block_ases/bootstrap","block_ases/sweetalert2","block_ases/jqueryui","block_ases/select2","block_ases/Chart","block_ases/loading_indicator","block_ases/chartjs_plugin_datalabels"],function(a,b,c,d,e,f,g,h,j,k,l,m,n,o){return{init:function init(){window.JSZip=b;window.graficas={};var c=["programa","facultad","sexo","edad","condExcepcion","riesgos"];for(i=0;i<c.length;i++){a("#list-students-"+c[i]+"-panel").on("click",function(a){var b=a.currentTarget.id+"",c=b.split("-")[2];p(c)});a("#save_btn_"+c[i]).on("click",function(a){var b=a.target.id+"",c=b.split("_")[2];document.getElementById("download_"+c).click()})}a("#status_fields").on("change",function(){for(i=0;i<c.length;i++){if(0<a("#"+c[i]).length){p(c[i])}}});a("#conditions").on("change",function(){for(i=0;i<c.length;i++){if(0<a("#"+c[i]).length){p(c[i])}}})}};function p(b){var c=a("#ases_status").is(":checked")?1:0,d=a("#icetex_status").is(":checked")?1:0,e=a("#academic_program_status").is(":checked")?1:0;a.ajax({type:"POST",data:{type:b,cohort:a("#conditions").val(),ases_status:c,icetex_status:d,program_status:e,instance_id:u()},url:"../managers/ases_report/asesreport_graphics_processing.php",success:function success(a){q(b,a);switch(b){case"programa":r(b,a.data,"horizontalBar");break;case"edad":r(b,a.data,"bar");break;case"facultad":s(b,a.data,"doughnut");break;case"sexo":s(b,a.data,"pie");break;case"condExcepcion":s(b,a.data,"doughnut");break;case"riesgos":t(a.data);break;}},dataType:"json",cache:!1,async:!0,failure:function failure(){}})}function q(b,c){a("#div_table_"+b).empty();a("#div_table_"+b).append("<table id=\"t_"+b+"\" class=\"table\" cellspacing=\"0\" width=\"100%\"><thead> </thead></table>");a("#t_"+b).DataTable(c)}function r(b,c,d){var e=Object.keys(c[0]),f=e[0],g=e[1],h=[],j=[];for(var k in c){nombre=c[k][f];cantidad=c[k][g];nombre=nombre.replace("LICENCIATURA","LIC.");nombre=nombre.replace(/EDUCACIÃ“N/g,"EDU.");h.push(nombre);j.push(cantidad)}a(".horizontal-bar-chart-container").css("height","1300px");a(".horizontal-bar-chart-container").css("width","100%");a(".bar-chart-container").css("height","800px");a(".bar-chart-container").css("width","100%");for(var l=[],m=[],n=0;n<h.length;n++){if(0==n%2){l.push("rgba(255, 99, 132, 0.2)");m.push("rgba(255, 99, 132, 1)")}else{l.push("rgba(130, 130, 130, 0.2)");m.push("rgba(130, 130, 130, 1)")}}var p=document.getElementById("grafica_"+b).getContext("2d"),c={labels:h,datasets:[{label:"Cantidad de Estudiantes",data:j,backgroundColor:l,borderColor:m,borderWidth:3}]};if(!window.graficas["chart_"+b]){var q=b;if("condExcepcion"===b){q="Condici\xF3n de Excepci\xF3n"}o.plugins.register({beforeDraw:function beforeDraw(a){var b=a.chart.ctx;b.fillStyle="white";b.fillRect(0,0,a.chart.width,a.chart.height)}});window.graficas["chart_"+b]=new o(p,{type:d,data:c,options:{elements:{rectangle:{borderWidth:2}},backgroundColor:"white",responsive:!0,legend:{position:"top",display:!1},title:{display:!0,text:"Cantidad de Estudiantes por "+q,fontSize:30},scales:{yAxes:[{ticks:{display:!0},categoryPercentage:1,barPercentage:1}],xAxes:[{ticks:{beginAtZero:!0}}]},maintainAspectRatio:!1,plugins:{datalabels:{display:!0,align:"center",anchor:"center"}},animation:{duration:0,onProgress:function onProgress(){},onComplete:function onComplete(){var c=document.getElementById("grafica_"+b).toDataURL("image/jpeg");a("#download_"+b).attr("href",c);a("#download_"+b).attr("download","reporte_"+b+".jpg")}}}})}else{window.graficas["chart_"+b].data=c;window.graficas["chart_"+b].update()}}function s(b,c,d){var e=[],f=[];for(var g in c){nombre=c[g].nombre;cantidad=c[g].cantidad;e.push(nombre);f.push(cantidad)}var h=document.getElementById("grafica_"+b).getContext("2d"),c={labels:e,datasets:[{label:"Cantidad de Estudiantes",data:f,backgroundColor:["#F56476","#BFD1E5","#FFEECF","#C9A690","#DF928E","#CECCCC","#9191E9","#99E1D9","#FFA552","#BFC8AD","#0BAA6B","#EDD892"],borderColor:["#F56476","#BFD1E5","#FFEECF","#C9A690","#DF928E","#CECCCC","#9191E9","#99E1D9","#FFA552","#BFC8AD","#0BAA6B","#EDD892"],borderWidth:1}]};if(!window.graficas["chart_"+b]){var j=b;if("condExcepcion"===b){j="Condici\xF3n de Excepci\xF3n"}o.plugins.register({beforeDraw:function beforeDraw(a){var b=a.chart.ctx;b.fillStyle="white";b.fillRect(0,0,a.chart.width,a.chart.height)}});var k={title:{display:!0,text:"Cantidad de estudiantes por "+j,fontSize:30},legend:{display:!0},starAngle:0,showTooltips:!0,showPercentages:!0,animation:{animateRotate:!0,animateScale:!0,duration:0,onProgress:function onProgress(){},onComplete:function onComplete(){var c=document.getElementById("grafica_"+b).toDataURL("image/jpeg");a("#download_"+b).attr("href",c);a("#download_"+b).attr("download","reporte_"+b+".jpg")}}};o.defaults.polarArea.animation.animateScale=!1;window.graficas["chart_"+b]=new o(h,{type:d,data:c,options:k})}else{window.graficas["chart_"+b].data=c;window.graficas["chart_"+b].update()}}function t(b){var c=[],d=[],e=[],f=[],g=[];for(riesgo in b){c.push(b[riesgo].riesgo);d.push(b[riesgo].bajo);e.push(b[riesgo].medio);f.push(b[riesgo].alto);g.push(b[riesgo].no_registra)}a(".risk-chart-container").css("width","100%");var h=document.getElementById("grafica_riesgos").getContext("2d"),b={labels:c,datasets:[{label:"Riesgos bajos",data:d,backgroundColor:"rgba(0, 179, 136, 0.4)",borderColor:"rgba(0, 179, 136, 1)",borderWidth:2},{label:"Riesgos Medios",data:e,backgroundColor:"rgba(255, 136, 17, 0.4)",borderColor:"rgba(255, 136, 17, 1)",borderWidth:2},{label:"Riesgos Altos",data:f,backgroundColor:"rgba(255, 86, 102, 0.4)",borderColor:"rgba(255, 86, 102, 1)",borderWidth:2},{label:"N.R.",data:g,backgroundColor:"rgba(132, 133, 134, 0.4)",borderColor:"rgba(132, 133, 134, 1)",borderWidth:2}]};if(!window.graficas.chart_riesgos){o.plugins.register({beforeDraw:function beforeDraw(a){var b=a.chart.ctx;b.fillStyle="white";b.fillRect(0,0,a.chart.width,a.chart.height)}});var j={title:{display:!0,text:"Cantidad de registros por riesgos",fontSize:25},legend:{display:!0,labels:{fontSize:15,fontStyle:"bold"}},starAngle:0,scales:{xAxes:[{ticks:{fontSize:15,fontStyle:"bold"}}]},showTooltips:!0,showPercentages:!0,animation:{animateRotate:!0,animateScale:!0,duration:0,onProgress:function onProgress(){},onComplete:function onComplete(){var b=document.getElementById("grafica_riesgos").toDataURL("image/jpeg");a("#download_riesgos").attr("href",b);a("#download_riesgos").attr("download","reporte_riesgos.jpg")}}};o.defaults.polarArea.animation.animateScale=!1;window.graficas.chart_riesgos=new o(h,{type:"bar",data:b,options:j})}else{window.graficas.chart_riesgos.data=b;window.graficas.chart_riesgos.update()}}function u(){var a=location.search.split("&");for(x in a){if(0<=a[x].indexOf("instanceid")){var b=a[x].split("=");return b[1]}}return 0}});
//# sourceMappingURL=ases_graphic_reports.min.js.map
