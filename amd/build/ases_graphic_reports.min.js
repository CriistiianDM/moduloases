define(['jquery','block_ases/jszip','block_ases/pdfmake','block_ases/jquery.dataTables','block_ases/dataTables.autoFill','block_ases/dataTables.buttons','block_ases/buttons.html5','block_ases/buttons.flash','block_ases/buttons.print','block_ases/bootstrap','block_ases/sweetalert2','block_ases/jqueryui','block_ases/select2','block_ases/Chart','block_ases/loading_indicator'],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function p(){q();var s=a('#conditions').val();'TODOS'==s?(a('#div-summary-spp').prop('hidden',!1),a('#div-summary-spe').prop('hidden',!1),a('#div-summary-3740').prop('hidden',!1),a('#div-summary-oa').prop('hidden',!1)):'TODOS-SPP'==s||'SPP'==s.substring(0,3)?(a('#div-summary-spp').prop('hidden',!1),a('#div-summary-spe').prop('hidden',!0),a('#div-summary-3740').prop('hidden',!0),a('#div-summary-oa').prop('hidden',!0)):'TODOS-SPE'==s||'SPE'==s.substring(0,3)?(a('#div-summary-spp').prop('hidden',!0),a('#div-summary-spe').prop('hidden',!1),a('#div-summary-3740').prop('hidden',!0),a('#div-summary-oa').prop('hidden',!0)):'TODOS-3740'==s||'3740'==s.substring(0,4)?(a('#div-summary-spp').prop('hidden',!0),a('#div-summary-spe').prop('hidden',!0),a('#div-summary-3740').prop('hidden',!1),a('#div-summary-oa').prop('hidden',!0)):'TODOS-OTROS'==s&&(a('#div-summary-spp').prop('hidden',!0),a('#div-summary-spe').prop('hidden',!0),a('#div-summary-3740').prop('hidden',!0),a('#div-summary-oa').prop('hidden',!1))}function q(){var s=a('#form_general_report').serializeArray();s.push({name:'instance_id',value:r()}),a('#div_table').html('<img class="icon-loading" src="../icon/loading.gif"/>'),a.ajax({type:'POST',data:s,url:'../managers/ases_report/asesreport_server_processing.php',success:function success(t){a('#div_table').html(''),a('#div_table').fadeIn(1e3).append('<table id="tableResult" class="display" cellspacing="0" width="100%"><thead> </thead></table>'),a('#tableResult').DataTable(t),a('#tableResult tr').each(function(){a.each(this.cells,function(){'Bajo'==a(this).html()?a(this).addClass('riesgo_bajo'):'Medio'==a(this).html()?a(this).addClass('riesgo_medio'):'Alto'==a(this).html()&&a(this).addClass('riesgo_alto')})}),a('#tableResult').bind('DOMSubtreeModified',function(){a('#tableResult tr').each(function(){a.each(this.cells,function(){'Bajo'==a(this).html()?a(this).addClass('riesgo_bajo'):'Medio'==a(this).html()?a(this).addClass('riesgo_medio'):'Alto'==a(this).html()&&a(this).addClass('riesgo_alto')})})})},dataType:'json',cache:'false',error:function error(){alert('Error al conectar con el servidor')}})}function r(){var s=location.search.split('&');for(x in s)if(0<=s[x].indexOf('instanceid')){var t=s[x].split('=');return t[1]}return 0}return{init:function init(){window.JSZip=b,a(document).on('click','#tableResult tbody tr td',function(){var t=a('#tableResult').DataTable(),u=t.data_getell(this).index().column;2>=u&&(a('#formulario').data_getach(function(){this.reset}),location.href='student_profile.php'+location.search+'&student_code='+t.cell(t.row(this).index(),0).data())}),a('#contact_fields_check').on('change',function(){a('#contact_fields_check').prop('checked')?a('#contact_fields input[type=\'checkbox\']').prop('checked',!0):a('#contact_fields input[type=\'checkbox\']').prop('checked',!1),p()}),a('#status_fields_check').on('change',function(){a('#status_fields_check').prop('checked')?a('input[name=\'status_fields[]\']').prop('checked',!0):a('input[name=\'status_fields[]\']').prop('checked',!1),p()}),a('#academic_fields_check').on('change',function(){a('#academic_fields_check').prop('checked')?a('input[name=\'academic_fields[]\']').prop('checked',!0):a('input[name=\'academic_fields[]\']').prop('checked',!1),p()}),a('#risk_fields_check').on('change',function(){a('#risk_fields_check').prop('checked')?a('input[name=\'risk_fields[]\']').prop('checked',!0):a('input[name=\'risk_fields[]\']').prop('checked',!1),p()}),a('#assignment_fields_check').on('change',function(){a('#assignment_fields_check').prop('checked')?a('input[name=\'assignment_fields[]\']').prop('checked',!0):a('input[name=\'assignment_fields[]\']').prop('checked',!1),p()}),a('#conditions').on('change',function(){p()}),a('#contact_fields input[type=\'checkbox\']').on('change',function(){p()}),a('input[name=\'status_fields[]\']').on('change',function(){p()}),a('input[name=\'academic_fields[]\']').on('change',function(){p()}),a('input[name=\'risk_fields[]\']').on('change',function(){p()}),a('input[name=\'assignment_fields[]\']').on('change',function(){p()}),a(document).on('change','.select_risk',function(){var s=a('#tableResult').DataTable(),t=a(this).parent().index()+1,u=a(this).parent().find(':selected').text();s.columns(t-1).search(this.value).draw()}),a(document).on('change','.filter_assignments',function(){var s=a('#tableResult').DataTable(),t=a(this).parent().index()+1,u=a(this).parent().find(':selected').text();s.columns(t-1).search(this.value).draw()}),a(document).on('change','.select_filter_statuses',function(){var s=a('#tableResult').DataTable(),t=a(this).parent().index()+1,u=a(this).parent().find(':selected').text();s.columns(t-1).search(u?'^'+u+'$':'',!0,!1).draw()}),a(document).on('click','.summary-title',function(){var s=a(a(this).data('icon'));s.hasClass('glyphicon-chevron-right')?(s.removeClass('glyphicon-chevron-right'),s.addClass('glyphicon-chevron-down')):(s.addClass('glyphicon-chevron-right'),s.removeClass('glyphicon-chevron-down'));var t=a(a(this).data('target'));'none'==t.css('display')?t.show(300):t.hide(300)}),a('.panel-heading-summary').on('click',function(){var s=a(this).find('.icon-group-cohort');s.hasClass('glyphicon-chevron-right')?(s.removeClass('glyphicon-chevron-right'),s.addClass('glyphicon-chevron-down')):(s.addClass('glyphicon-chevron-right'),s.removeClass('glyphicon-chevron-down'));var t=a(a(this).data('target'));'none'==t.css('display')?t.show(300):t.hide(300)}),a('#list-students-status-panel').on('click',function(){p(),get_data_to_graphic()})},load_defaults_students:function load_defaults_students(s){a('#div_table').html(''),a('#div_table').fadeIn(1e3).append('<table id="tableResult" class="stripe row-border order-column" cellspacing="0" width="100%"><thead> </thead></table>'),a('#tableResult').DataTable(s)},create_table:function create_table(){},get_id_instance:function get_id_instance(){var s=location.search.split('&');for(x in s)if(0<=s[x].indexOf('instanceid')){var t=s[x].split('=');return t[1]}return 0},get_data_to_graphic:function get_data_to_graphic(){a.ajax({type:'POST',data:{load:'getDataGraphic'},url:'../managers/discapacity_reports/discapacity_reports_api.php',success:function success(s){create_graphic_discapacity(s)},dataType:'json',cache:!1,async:!0,failure:function failure(){}})},create_graphic_discapacity:function create_graphic_discapacity(s){var t=document.getElementById('grafica_tipos').getContext('2d');n.defaults.polarArea.animation.animateScale=!1;new n(t,{type:'pie',data:{labels:['Cognitiva','Psicosocial','F\xEDsica','Sensorial','M\xFAltiple','Otra'],datasets:[{data:s,backgroundColor:['rgba(255, 99, 132, 0.2)','rgba(54, 162, 235, 0.2)','rgba(255, 206, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(153, 102, 255, 0.2)','rgba(255, 159, 64, 0.2)'],borderColor:['rgba(255,99,132,1)','rgba(54, 162, 235, 1)','rgba(255, 206, 86, 1)','rgba(75, 192, 192, 1)','rgba(153, 102, 255, 1)','rgba(255, 159, 64, 1)'],borderWidth:3}]},options:{title:{display:!0,text:'N\xFAmero de estudiantes por tipo de discapacidad',fontSize:30},starAngle:0,animation:{animateRotate:!0,animateScale:!0}}})}}});