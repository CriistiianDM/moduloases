define ("block_ases/global_grade_book",["jquery","block_ases/bootstrap","block_ases/sweetalert","block_ases/jqueryui"],function(a){return{read_only_view_styles:function read_only_view_styles(){a(".category .action-icon").hide();a("#studentheader > a").bind("click",!1)},init:function init(){var i;a(document).ready(function(){var c=g();e(c);d();if(0!=a(".gradingerror").length){location.origin+"/moodle/grade/report/grader/index.php?id="+h();swal({title:"Recalculando \xEDtems.",text:"Debido al proceso de actualizaci\xF3n del campus virtual se debe realizar este paso.\nGracias por su paciencia \nDe seguir presentando este problema, por favor dirigirse al area de sistemas Ases",type:"warning",showCancelButton:!1,confirmButtonClass:"btn-danger",confirmButtonText:"Continuar",closeOnConfirm:!1},function(){b(h());location.reload()})}});a(document).on("blur",".text",function(){if(c(a(this))){var b=a(this).attr("id").split("_"),d=b[1],e=b[2],f=a(this).val(),g=h();a.ajax({type:"POST",data:{user:d,item:e,finalgrade:f,course:g},url:"../managers/grade_categories/grader_processing.php",async:!1,success:function success(a){var b=a.nota;if(!0==b){console.log("Nota actualizada");if(3>f){var c=a.monitor,d=a.practicante,e=a.profesional;if(!0==c){console.log("mensaje al monitor enviado correctamente")}else{console.log("error monitor");swal("Error","Error al enviar correo al monitor","error")}if(!0==d){console.log("mensaje al practicante enviado correctamente")}else{console.log("error practicante");swal("Error","Error al enviar correo al practicante","error")}if(!0==e){console.log("mensaje al profesional enviado correctamente")}else{console.log("error profesional");swal("Error","Error al enviar correo al profesional","error")}}}else{swal("Error","Error al actualizar la nota","error")}},dataType:"json",cache:"false",error:function error(a){console.log(a)}})}});a(document).on("focus",".text",function(){i=a(this).val()});a(document).on("keypress",".text",function(a){var b=document.all?a.keyCode:a.which;if(8==b||46==b){return!0}patron=/[0-9]/;tecla_final=String.fromCharCode(b);return patron.test(tecla_final)});a(document).on("click",".reload",function(){location.reload()});function b(b){a.ajax({type:"POST",data:{type:"update_grade_items",course:b},url:"../managers/grade_categories/grader_processing.php",async:!1,success:function success(a){if("1"==a){console.log("update ok")}else{console.log("update fail")}},dataType:"text",cache:"false",error:function error(a){console.log(a)}})}function c(a){var b=!1,c=a.val();if(5<c||0>c){swal({title:"Ingrese un valor valido, entre 0 y 5. \n\rUsted ingres\xF3: "+c,html:!0,type:"warning",confirmButtonColor:"#d51b23"});a.val(i);b=!1}else if(""==c&&""!=i){a.val("0");b=!0}else if(""==c&&""==i||c==i){b=!1}else{b=!0}return b}function d(){a("#user-grades a").removeAttr("href");a(".cat").each(function(){a(this).css("background-color","rgb(225, 228, 254)");var b=a(this).children().next(".text");b.attr("disabled",!0);b.css("font-weight","bold")});a(".course").each(function(){a(this).css("background-color","rgb(225, 228, 254)");var b=a(this).children().next(".text");b.attr("disabled",!0);b.css("font-weight","bold");b.css("font-size",16)});a(".header").children().each(function(){a(this).removeAttr("href")})}function e(b){a("#user-grades").children().children().each(function(){if(a(this).attr("data-uid")!=void 0){if(!f(a(this).attr("data-uid"),b)){a(this).remove()}else{a(this).children("th").children().each(function(){a(this).removeAttr("href");a(this).click(function(){var b=a(this).parent().parent().attr("data-uid"),c=a("#idmoodle_"+b).attr("data-code"),d="student_profile.php"+location.search+"&student_code="+c})})}}})}function f(a,b){for(var c=0;c<b.length;c++){if(b[c].split("_")[1]===a){return!0}}return!1}function g(){var b=[];a("#students-pilos").children().each(function(){b.push(a(this).attr("id"))});return b}function h(){for(var a=window.location.search.split("&"),b=0,c;b<a.length;b++){c=a[b].split("=");if("?id_course"==c[0]||"id_course"==c[0]){var d=c[1];return d}}}}}});
//# sourceMappingURL=global_grade_book.min.js.map
