define(["jquery","block_ases/bootstrap","block_ases/sweetalert","block_ases/jqueryui"],function(e,r,o,t){return{read_only_view_styles:function(){e(".category .action-icon").hide(),e("#studentheader > a").bind("click",!1)},init:function(){var r;function o(){for(var e=window.location.search.split("&"),r=0;r<e.length;r++){var o=e[r].split("=");if("?id_course"==o[0]||"id_course"==o[0])return o[1]}}e(document).ready(function(){if(function(r){e("#user-grades").children().children().each(function(){null!=e(this).attr("data-uid")&&(!function(e,r){for(var o=0;o<r.length;o++)if(r[o].split("_")[1]===e)return!0;return!1}(e(this).attr("data-uid"),r)?e(this).remove():e(this).children("th").children().each(function(){e(this).removeAttr("href"),e(this).click(function(){var r=e(this).parent().parent().attr("data-uid"),o=e("#idmoodle_"+r).attr("data-code");location.search})}))})}(function(){var r=new Array;return e("#students-pilos").children().each(function(){r.push(e(this).attr("id"))}),r}()),e("#user-grades a").removeAttr("href"),e(".cat").each(function(){e(this).css("background-color","rgb(225, 228, 254)");var r=e(this).children().next(".text");r.attr("disabled",!0),r.css("font-weight","bold")}),e(".course").each(function(){e(this).css("background-color","rgb(225, 228, 254)");var r=e(this).children().next(".text");r.attr("disabled",!0),r.css("font-weight","bold"),r.css("font-size",16)}),e(".header").children().each(function(){e(this).removeAttr("href")}),0!=e(".gradingerror").length){location.origin,o();swal({title:"Recalculando ítems.",text:"Debido al proceso de actualización del campus virtual se debe realizar este paso.\nGracias por su paciencia \nDe seguir presentando este problema, por favor dirigirse al area de sistemas Ases",type:"warning",showCancelButton:!1,confirmButtonClass:"btn-danger",confirmButtonText:"Continuar",closeOnConfirm:!1},function(){var r,t;r=o(),t={type:"update_grade_items",course:r},e.ajax({type:"POST",data:t,url:"../managers/grade_categories/grader_processing.php",async:!1,success:function(e){"1"==e?console.log("update ok"):console.log("update fail")},dataType:"text",cache:"false",error:function(e){console.log(e)}}),location.reload()})}}),e(document).on("blur",".text",function(){if(function(e){var o=!1,t=e.val();t>5||t<0?(swal({title:"Ingrese un valor valido, entre 0 y 5. \n\rUsted ingresó: "+t,html:!0,type:"warning",confirmButtonColor:"#d51b23"}),e.val(r),o=!1):""==t&&""!=r?(e.val("0"),o=!0):o=(""!=t||""!=r)&&t!=r;return o}(e(this))){var t=e(this).attr("id").split("_"),a=t[1],n=t[2],i=e(this).val(),c=o(),s={user:a,item:n,finalgrade:i,course:c};e.ajax({type:"POST",data:s,url:"../managers/grade_categories/grader_processing.php",async:!1,success:function(e){if(1==e.nota){if(console.log("Nota actualizada"),i<3){var r=e.monitor,o=e.practicante,t=e.profesional;1==r?console.log("mensaje al monitor enviado correctamente"):(console.log("error monitor"),swal("Error","Error al enviar correo al monitor","error")),1==o?console.log("mensaje al practicante enviado correctamente"):(console.log("error practicante"),swal("Error","Error al enviar correo al practicante","error")),1==t?console.log("mensaje al profesional enviado correctamente"):(console.log("error profesional"),swal("Error","Error al enviar correo al profesional","error"))}}else swal("Error","Error al actualizar la nota","error")},dataType:"json",cache:"false",error:function(e){console.log(e)}})}}),e(document).on("focus",".text",function(){r=e(this).val()}),e(document).on("keypress",".text",function(e){var r=document.all?e.keyCode:e.which;return 8==r||46==r||(patron=/[0-9]/,tecla_final=String.fromCharCode(r),patron.test(tecla_final))}),e(document).on("click",".reload",function(){location.reload()})}}});