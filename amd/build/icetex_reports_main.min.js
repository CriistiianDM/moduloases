define(['jquery','block_ases/jszip','block_ases/pdfmake','block_ases/jquery.dataTables','block_ases/dataTables.autoFill','block_ases/dataTables.buttons','block_ases/buttons.html5','block_ases/buttons.flash','block_ases/buttons.print','block_ases/bootstrap','block_ases/sweetalert'],function(c,d){return{init:function init(){function n(q){c('#div_res_students').html('<img class="icon-loading" src="../icon/loading.gif"/>'),c.ajax({type:'POST',data:{loadR:'loadReport',value:q},url:'../managers/historic_icetex_reports/icetex_reports_processing.php',success:function success(r){c('#div_res_students').empty(),c('#div_res_students').fadeIn(1e3).append('<table id="tableResStudents" class="display" cellspacing="0" width="80%"><thead><thead></table>');c('#tableResStudents').DataTable(r);c('#tableResStudents').css('cursor','pointer')},dataType:'json',cache:!1,error:function error(){swal('Error','Error al cargar el reporte','error')}})}function o(){c('#div_resolutions').html('<img class="icon-loading" src="../icon/loading.gif"/>'),c.ajax({type:'POST',data:{resR:'resReport'},url:'../managers/historic_icetex_reports/resolution_reports_processing.php',success:function success(q){c('#div_resolutions').empty(),c('#div_resolutions').fadeIn(1e3).append('<table id="tableResolutions" class="display" cellspacing="0" width="100%"><thead><thead></table>');c('#tableResolutions').DataTable(q);c('#div_resolutions').css('cursor','pointer')},dataType:'json',cache:!1,error:function error(){swal('Error','Error al cargar el reporte','error')}})}function p(q){c('#div_report_summary').html('<img class="icon-loading" src="../icon/loading.gif"/>'),c.ajax({type:'POST',data:{summ:'summaryR',cohor:q},url:'../managers/historic_icetex_reports/summary_report_processing.php',success:function success(r){c('#div_report_summary').empty(),c('#div_report_summary').fadeIn(1e3).append('<table id="tableSummary" class="display" cellspacing="0" width="100%"><thead><thead><tfoot id="table_summ_foot"><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th></tfoot></table>');var s=c('#tableSummary').DataTable(r),t=s.column(9).data().sum(),u=s.column(3).data().sum(),v=s.column(5).data().sum(),w=s.column(7).data().sum();c(s.column(3).footer()).html('$'+u),c(s.column(5).footer()).html('$'+v),c(s.column(7).footer()).html('$'+w),c(s.column(9).footer()).html('$'+t),c('#div_report_summary').css('cursor','pointer')},dataType:'json',cache:!1,error:function error(){swal('Error','Error al cargar el reporte','error')}})}window.JSZip=d,c('#stu_res_button').on('click',function(){var q=c('#check_no_res').is(':checked');n(q)}),c(document).on('click','#tableResStudents tbody tr td',function(){var r=c('#tableResStudents').DataTable(),s=r.cell(this).index().column;1<=s&&4>=s&&(c('#formulario').each(function(){this.reset}),window.open('student_profile.php'+location.search+'&student_code='+r.cell(r.row(this).index(),1).data(),'_blank'))}),jQuery.fn.dataTable.Api.register('sum()',function(){var q=0;return this.flatten().reduce(function(r,s){return'string'==typeof r&&(r=1*r.replace(/[\$.]/g,'')),'string'==typeof s&&(s=1*s.replace(/[\$.]/g,'')),q=parseInt(r,10)+parseInt(s,10),q.toString().replace(/\B(?=(\d{3})+(?!\d))/g,'.')},0)}),c('#list-resolutions-panel').on('click',function(){o()}),c('#report_button').on('click',function(){var q=c('#cohort_select select').val();''==q?swal('Informaci\xF3n','Seleccione una cohorte v\xE1lida','info'):p(q)}),c(document).on('change','#tableResStudents thead tr th select',function(){var q=c('#tableResStudents').DataTable(),r=c(this).parent().index()+1;q.columns(r-1).search(this.value).draw()}),c(document).on('change','#tableResolutions thead tr th select',function(){var q=c('#tableResolutions').DataTable(),r=c(this).parent().index()+1;q.columns(r-1).search(this.value).draw()})}}});