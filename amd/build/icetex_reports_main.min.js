define(["jquery","block_ases/jszip","block_ases/pdfmake","block_ases/jquery.dataTables","block_ases/dataTables.autoFill","block_ases/dataTables.buttons","block_ases/buttons.html5","block_ases/buttons.flash","block_ases/buttons.print","block_ases/bootstrap","block_ases/sweetalert"],function(t,e,a,o,s,r,n,l,c,i,u){return{init:function(){function a(e){var a=e.column(3,{page:"current"}).data().sum(),o=e.column(3).data().sum(),s=e.column(5,{page:"current"}).data().sum();t(e.column(3).footer()).html("$"+a+"(Total $"+o+")"),t(e.column(5).footer()).html("$"+s)}window.JSZip=e,t("#stu_res_button").on("click",function(){var e,a=t("#check_no_res").is(":checked");e=a,t("#div_res_students").html('<img class="icon-loading" src="../icon/loading.gif"/>'),t.ajax({type:"POST",data:{loadR:"loadReport",value:e},url:"../managers/historic_icetex_reports/icetex_reports_processing.php",success:function(e){t("#div_res_students").empty(),t("#div_res_students").fadeIn(1e3).append('<table id="tableResStudents" class="display" cellspacing="0" width="80%"><thead><thead></table>'),t("#tableResStudents").DataTable(e),t("#tableResStudents").css("cursor","pointer")},dataType:"json",cache:!1,error:function(t){swal("Error","Error al cargar el reporte","error")}})}),t(document).on("click","#tableResStudents tbody tr td",function(){var e=t("#tableResStudents").DataTable(),a=e.cell(this).index().column;a>=1&&a<=4&&(t("#formulario").each(function(){this.reset}),window.open("student_profile.php"+location.search+"&student_code="+e.cell(e.row(this).index(),1).data(),"_blank"))}),jQuery.fn.dataTable.Api.register("sum()",function(){return this.flatten().reduce(function(t,e){return"string"==typeof t&&(t=1*t.replace(/[\$.]/g,"")),"string"==typeof e&&(e=1*e.replace(/[\$.]/g,"")),(parseInt(t,10)+parseInt(e,10)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},0)}),t("#list-resolutions-panel").on("click",function(){t("#div_resolutions").html('<img class="icon-loading" src="../icon/loading.gif"/>'),t.ajax({type:"POST",data:{resR:"resReport"},url:"../managers/historic_icetex_reports/resolution_reports_processing.php",success:function(e){t("#div_resolutions").empty(),t("#div_resolutions").fadeIn(1e3).append('<table id="tableResolutions" class="display" cellspacing="0" width="100%"><thead><thead><tfoot id="table_res_foot"><th></th><th></th><th></th><th></th><th></th><th></th><th></th></tfoot></table>');var o=t("#tableResolutions").DataTable(e);t("#tableResolutions").on("page.dt",function(){a(o)}),t("#tableResolutions").on("draw.dt",function(){a(o)}),a(o),t("#div_resolutions").css("cursor","pointer")},dataType:"json",cache:!1,error:function(t){swal("Error","Error al cargar el reporte","error")}})}),t("#report_button").on("click",function(){var e,a=t("#cohort_select select").val();""==a?swal("Información","Seleccione una cohorte válida","info"):(e=a,t("#div_report_summary").html('<img class="icon-loading" src="../icon/loading.gif"/>'),t.ajax({type:"POST",data:{summ:"summaryR",cohor:e},url:"../managers/historic_icetex_reports/summary_report_processing.php",success:function(e){t("#div_report_summary").empty(),t("#div_report_summary").fadeIn(1e3).append('<table id="tableSummary" class="display" cellspacing="0" width="100%"><thead><thead><tfoot id="table_summ_foot"><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th></tfoot></table>');var a=t("#tableSummary").DataTable(e),o=a.column(9).data().sum(),s=a.column(3).data().sum(),r=a.column(5).data().sum(),n=a.column(7).data().sum();t(a.column(3).footer()).html("$"+s),t(a.column(5).footer()).html("$"+r),t(a.column(7).footer()).html("$"+n),t(a.column(9).footer()).html("$"+o),t("#div_report_summary").css("cursor","pointer")},dataType:"json",cache:!1,error:function(t){swal("Error","Error al cargar el reporte","error")}}))}),t(document).on("change","#tableResStudents thead tr th select",function(){var e=t("#tableResStudents").DataTable(),a=t(this).parent().index()+1;e.columns(a-1).search(this.value).draw()}),t(document).on("change","#tableResolutions thead tr th select",function(){var e=t("#tableResolutions").DataTable(),a=t(this).parent().index()+1;e.columns(a-1).search(this.value).draw()})}}});