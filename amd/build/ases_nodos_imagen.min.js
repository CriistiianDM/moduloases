// Standard license block omitted.
/*
 * @package    block_ases
 * @copyright  ASES
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */ /**
 * @module block_ases/ases_nodos_imagen
 */ /**
  * @autor Cristian Duvan Machado Mosquera <cristian.machado@correounivalle.edu.co>
  * @des  objecto para guardar los nodos y sus relaciones que fueron borrados
  * !important: no borrar
 */ let object_nodes=new Object;define(["jquery",],function($){return{init:function(f,g){var e,d,c=cytoscape({elements:{nodes:[]},style:[{selector:"node",style:{height:80,width:80,"background-fit":"cover","border-color":"#000","border-width":3,"border-opacity":.5,label:"data(name)"}},{selector:"edge",style:{width:3,"line-color":"#ccc","target-arrow-color":"#ccc","target-arrow-shape":"triangle","curve-style":"bezier"}}],layout:{name:"breadthfirst",directed:!0,padding:10},boxSelectionEnabled:!1,autounselectify:!0,container:document.getElementById("nodo-plugging")});function h(a,d){let b=Object.values(a);b.map(function(e){let a=1===d?e.source:104813,b=e.target;console.log("estoy adentro del map",a,b),null!==a&&null!==b&&a!==b&& void 0!==a&& void 0!==b&&c.add({data:{id:a+"-"+b,source:a,target:b}})})}!function(a){let b=Object.values(a);console.log(b),b.map(function(a){console.log("estoy adentro del map");let b=a.target,d=a.firstname;c.add({data:{id:b,name:d}})}),console.log("estoy afuera del map",a),h(a,1)}(f),h(g,0),b(d=[],e=c.getElementById("104813")),a(d,0,0,0),b(d,e),c.layout({name:"breadthfirst",directed:!0,padding:50}).run(),c.pan({x:177.79651400531588,y:47.287313432835845}),c.zoom(.7158045389490901),c.on("tap","node",function(){var e=[];if(this.addClass("eater"),b(e,this),a(e,0,500,0),0===e.length){for(var d in console.log("no tiene hijos",object_nodes),object_nodes)if(console.log("estoy adentro del for",d),object_nodes[d].id===this.id()){c.add({data:{id:d,name:object_nodes[d].name},style:{opacity:0,width:10,height:10}}),c.add({group:"edges",data:{id:`${this.id()}${d}`,source:this.id(),target:d}});var f=c.layout({name:"breadthfirst",directed:!0,padding:50});Array.prototype.push.apply(e,c.getElementById(d))}void 0!==e[0]&&(localStorage.setItem("pan",JSON.stringify(c.pan())),localStorage.setItem("zoom",JSON.stringify(c.zoom())),f.run(),c.pan(JSON.parse(localStorage.getItem("pan"))),c.zoom(JSON.parse(localStorage.getItem("zoom"))),a(e,0,800,1))}})}};function a(b,c,d,e){let f={},g=[{width:10,height:10,"border-width":0,opacity:0},{opacity:1,width:80,height:80}];for(var a=b.length-1;a>=0;a--)!function(){var h=b[a],i=h.connectedEdges(function(a){return a.target().same(h)}).source();1===e?(localStorage.setItem("position_aux",JSON.stringify(h.position())),h.position(i.position()),f=JSON.parse(localStorage.getItem("position_aux"))):f=i.position(),h.delay(c,function(){i.addClass("eating")}).animate({position:f,css:g[e]},{duration:d,complete:function(){0===e&&(object_nodes[h.id()]={id:i.id(),name:h.data("name")},h.remove())}}),c+=d}()}function b(c,a){for(;;){var b=a.connectedEdges(function(b){return!b.target().anySame(a)}).targets();if(Array.prototype.push.apply(c,b),(a=b).empty())break}}})