{"version":3,"sources":["../src/permissionsmanagement_main.js"],"names":["define","$","init","select_user","select2","placeholder","language","noResults","searching","width","dropdownAutoWidth","instance","document","ready","informacionUrl","window","location","search","split","i","elemento","length","load_actions","load_functions","load_roles","on","crearAccion","update_general_tab","crearFuncion","update_functionality_select","crearPerfil","update_role_select","asignarUsuarioPerfil","nombre","val","trim","descripcion","id_funcionalidad","msj","error","swal","title","text","html","type","confirmButtonColor","ajax","data","url","async","success","msg","reset","showCancelButton","showConfirmButton","reload","nombre_funcionalidad","descripcion_funcionalidad","nombre_perfil","descripcion_perfil","id_profile","actions","acciones","each","push","actions_array","JSON","stringify","profile","function","change","attr","user","source","prop","index","value","dataType","cache","nombre_table","parents","eq","table","DataTable","cell","row","parent","funcionalidad","removeClass","id","filter","addClass","texto","name","td","childrenid","children","colIndex","column","confirmButtonText","cancelButtonText","closeOnConfirm","isConfirm","delete_record","empty","append","css"],"mappings":"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","sourcesContent":["// Standard license block omitted.\r\n/*\r\n * @package    block_ases/permissionsmanagement\r\n * @copyright  ASES\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n/**\r\n * @module block_ases/permissionsmanagement_main\r\n */\r\ndefine(['jquery', 'block_ases/bootstrap', 'block_ases/jquery.dataTables', 'block_ases/sweetalert', 'block_ases/select2'], function ($, bootstrap, datatables, sweetalert, select2) {\r\n\r\n\r\n    return {\r\n\r\n        init: function () {\r\n\r\n            select_user();\r\n            select_func();\r\n\r\n            function select_func() {\r\n                $(\"#functions\").select2({\r\n                    placeholder: \"Select a Program\",\r\n                    language: {\r\n\r\n                        noResults: function () {\r\n\r\n                            return \"No hay resultado\";\r\n                        },\r\n                        searching: function () {\r\n\r\n                            return \"Buscando..\";\r\n                        }\r\n                    },\r\n                    width: '36%',\r\n                    dropdownAutoWidth: true,\r\n                });\r\n            }\r\n\r\n            function select_user() {\r\n                $(\"#profiles_user\").select2({\r\n\r\n                    language: {\r\n\r\n                        noResults: function () {\r\n\r\n                            return \"No hay resultado\";\r\n                        },\r\n                        searching: function () {\r\n\r\n                            return \"Buscando..\";\r\n                        }\r\n                    },\r\n                    width: '36%',\r\n                    dropdownAutoWidth: true,\r\n                    placeholder: \"Seleccionar perfil\"\r\n                });\r\n            }\r\n\r\n\r\n\r\n\r\n            var instance;\r\n            $(document).ready(function () {\r\n                //Cargar los datos de los roles creados en el select de rol-cmb\r\n                var informacionUrl = window.location.search.split(\"&\");\r\n                for (var i = 0; i < informacionUrl.length; i++) {\r\n                    var elemento = informacionUrl[i].split(\"=\");\r\n                    if (elemento[0] == \"?instanceid\" || elemento[0] == \"instanceid\") {\r\n                        instance = elemento[1];\r\n                    }\r\n                }\r\n                load_actions();\r\n                load_functions();\r\n                load_roles();\r\n\r\n                $(\"#add_accion\").on('click', function () {\r\n                    crearAccion();\r\n                    load_actions();\r\n                    update_general_tab(instance);\r\n                });\r\n\r\n                $(\"#add_function\").on('click', function () {\r\n                    crearFuncion();\r\n                    load_functions();\r\n                    update_general_tab(instance);\r\n                    update_functionality_select();\r\n                });\r\n\r\n                $(\"#add_profile\").on('click', function () {\r\n                    crearPerfil();\r\n                    load_roles();\r\n                    update_role_select();\r\n\r\n                });\r\n\r\n\r\n                $(\"#assign_user_profile\").on('click', function () {\r\n                    asignarUsuarioPerfil(instance);\r\n                });\r\n\r\n\r\n            });\r\n\r\n            /**\r\n             * Crea un ajax para llamar la accion que guarda la nueva accion en la base de datos\r\n             * @param Nombre\r\n             * @param Descripcion\r\n             * @author Edgar Mauricio Ceron\r\n             */\r\n\r\n            function crearAccion() {\r\n                var nombre = $(\"#nombre\").val().trim();\r\n                var descripcion = $(\"#descripcion\").val().trim();\r\n                var id_funcionalidad = $(\"#functions\").val();\r\n                var msj = \"\";\r\n                var error = false;\r\n\r\n                if (nombre.length == 0) {\r\n                    msj = \"Nombre no puede ser nulo\";\r\n                    error = true;\r\n                }\r\n                if (descripcion.length == 0) {\r\n                    msj = msj + \"<br>Descripcion no puede ser nulo\";\r\n                    error = true;\r\n\r\n                }\r\n\r\n                if (id_funcionalidad == 0) {\r\n                    msj = msj + \"<br>Funcionalidad no puede ser nulo\";\r\n                    error = true;\r\n\r\n                }\r\n\r\n                if (error) {\r\n                    swal({\r\n                        title: \"Error al crear Acción.\",\r\n                        text: msj,\r\n                        html: true,\r\n                        type: \"warning\",\r\n                        confirmButtonColor: \"#d51b23\"\r\n                    });\r\n                } else {\r\n                    $.ajax({\r\n                        type: \"POST\",\r\n                        data: {\r\n                            nombre: nombre,\r\n                            descripcion: descripcion,\r\n                            id_funcionalidad: id_funcionalidad\r\n                        },\r\n                        url: \"../managers/ActionCreateAction.php\",\r\n                        async: false,\r\n                        success: function (msg) {\r\n                            $(\"#formAction\")[0].reset();\r\n                            swal({\r\n                                title: \"\",\r\n                                text: msg,\r\n                                type: \"info\",\r\n                                showCancelButton: false,\r\n                                showConfirmButton: true,\r\n                            },function () {\r\n                                location.reload();\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Crea un ajax para llamar la accion que guarda la nueva función en la base de datos\r\n             * @param Nombre\r\n             * @param Descripcion\r\n             */\r\n\r\n            function crearFuncion() {\r\n                var nombre = $(\"#nombre_funcionalidad\").val().trim();\r\n                var descripcion = $(\"#descripcion_funcionalidad\").val().trim();\r\n                var msj = \"\";\r\n\r\n                if (nombre.length == 0) {\r\n                    msj = \"Nombre no puede ser nulo\";\r\n                }\r\n                if (descripcion.length == 0) {\r\n                    msj = msj + \"\\nDescripcion no puede ser nulo\";\r\n                }\r\n\r\n                if (nombre.length == 0 || descripcion.length == 0) {\r\n                    swal({\r\n                        title: \"Error al crear Funcionalidad.\",\r\n                        text: msj,\r\n                        html: true,\r\n                        type: \"warning\",\r\n                        confirmButtonColor: \"#d51b23\"\r\n                    });\r\n                } else {\r\n                    $.ajax({\r\n                        type: \"POST\",\r\n                        data: {\r\n                            nombre_funcionalidad: nombre,\r\n                            descripcion_funcionalidad: descripcion\r\n                        },\r\n                        url: \"../managers/ActionCreateAction.php\",\r\n                        success: function (msg) {\r\n                            $(\"#formFuncion\")[0].reset();\r\n                            swal({\r\n                                title: \"\",\r\n                                text: msg,\r\n                                type: \"info\",\r\n                                showCancelButton: false,\r\n                                showConfirmButton: true,\r\n                            },function () {\r\n                                location.reload();\r\n                            });\r\n                        },\r\n                    });\r\n                }\r\n            }\r\n\r\n\r\n\r\n            /**\r\n             * Crea un ajax para llamar la accion que guarda el nuevo perfil en la base de datos\r\n             * @param Nombre\r\n             * @param Descripcion\r\n             */\r\n\r\n            function crearPerfil() {\r\n                var nombre = $(\"#nombre_perfil\").val().trim();\r\n                var descripcion = $(\"#descripcion_perfil\").val().trim();\r\n                var msj = \"\";\r\n\r\n                if (nombre.length == 0) {\r\n                    msj = \"Nombre del perfil no puede ser nulo\";\r\n                }\r\n                if (descripcion.length == 0) {\r\n                    msj = msj + \"<br>Descripcion del perfil no puede ser nulo\";\r\n                }\r\n\r\n                if (nombre.length == 0 || descripcion.length == 0) {\r\n                    swal({\r\n                        title: \"Error al crear Funcionalidad.\",\r\n                        text: msj,\r\n                        html: true,\r\n                        type: \"warning\",\r\n                        confirmButtonColor: \"#d51b23\"\r\n                    });\r\n                } else {\r\n                    $.ajax({\r\n                        type: \"POST\",\r\n                        data: {\r\n                            nombre_perfil: nombre,\r\n                            descripcion_perfil: descripcion\r\n                        },\r\n                        url: \"../managers/ActionCreateAction.php\",\r\n                        async: false,\r\n                        success: function (msg) {\r\n                            $(\"#formPerfil\")[0].reset();\r\n                            swal({\r\n                                title: \"\",\r\n                                text: msg,\r\n                                type: \"info\",\r\n                                showCancelButton: false,\r\n                                showConfirmButton: true,\r\n                            },function () {\r\n                                location.reload();\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Crea un ajax que asigna determinadas acciones a un pefil en la base de datos\r\n             * @param perfil\r\n             * @param array acciones\r\n             */\r\n            function asignarAccionPerfil() {\r\n                var id_profile = $(\"#profiles_prof\").val();\r\n                var id_actions = $(\"#actions\").val();\r\n                var msj = \"\";\r\n\r\n                if (id_profile.length == 0) {\r\n                    msj = \"Escoger un perfil\";\r\n                }\r\n                if (id_actions.length == 0) {\r\n                    msj = msj + \"<br> Escoger acciones\";\r\n                }\r\n\r\n                if (id_profile.length == 0 || id_actions.length == 0) {\r\n                    swal({\r\n                        title: \"Error al crear Funcionalidad.\",\r\n                        text: msj,\r\n                        type: \"error\",\r\n                        confirmButtonColor: \"#d51b23\"\r\n                    });\r\n                } else {\r\n                    $.ajax({\r\n                        type: \"POST\",\r\n                        data: {\r\n                            profile: id_profile,\r\n                            actions: id_actions\r\n                        },\r\n                        url: \"../managers/ActionCreateAction.php\",\r\n                        async: false,\r\n                        success: function (msg) {\r\n                            swal({\r\n                                title: \"\",\r\n                                text: msg,\r\n                                type: \"info\",\r\n                                showCancelButton: false,\r\n                                showConfirmButton: true,\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Crea un ajax que asigna un usuario a un pefil en la base de datos\r\n             * @param perfil\r\n             * @param array acciones\r\n             */\r\n            function asignarUsuarioPerfil(instance) {\r\n                var id_profile = $(\"#profiles_user\").val();\r\n                var actions = [];\r\n                var acciones = $(\"input[name='actions[]']:checked\").each(function () {\r\n                    actions.push($(this).val());\r\n                });\r\n                var actions_array = JSON.stringify(actions);\r\n                if (id_profile == \"\") {\r\n                    swal({\r\n                        title: \"Error\",\r\n                        text: \"Seleccione el rol del usuario\",\r\n                        type: \"error\",\r\n                        confirmButtonColor: \"#d51b23\"\r\n                    });\r\n                } else {\r\n                    $.ajax({\r\n                        type: \"POST\",\r\n                        data: {\r\n                            profile: id_profile,\r\n                            actions: actions_array,\r\n                            function: \"assign_role\",\r\n                            instance: instance,\r\n                        },\r\n                        url: \"../managers/ActionCreateAction.php\",\r\n                        async: false,\r\n                        success: function (msg) {\r\n                            swal({\r\n                                title: \"\",\r\n                                text: msg,\r\n                                type: \"info\",\r\n                                showCancelButton: false,\r\n                                showConfirmButton: true,\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n\r\n            $(\"input[name='actions[]']\").change(function () {\r\n                $(this).attr('checked', true);\r\n\r\n            });\r\n\r\n            // Check the actions of a function according to the role\r\n            $(\"#profiles_user\").change(function () {\r\n\r\n                var user = $(\"#profiles_user\").val();\r\n                var source = \"permissions_management\";\r\n\r\n                $.ajax({\r\n                    type: \"POST\",\r\n                    data: {\r\n                        user: user,\r\n                        source: source\r\n                    },\r\n                    url: \"../managers/permissions_management/permissions_report.php\",\r\n                    success: function (msg) {\r\n                        $(\"input[name='actions[]'\").prop('checked', false);\r\n\r\n                        $.each(msg, function (index, value) {\r\n                            $(\"input[value='\" + value + \"']\").prop('checked', true);\r\n                        });\r\n                    },\r\n                    dataType: \"json\",\r\n                    cache: \"false\",\r\n                    error: function (msg) {\r\n                        swal({\r\n                            title: \"Error al crear Funcionalidad.\",\r\n                            text: \"Error al cargar gestion de permisos y roles\",\r\n                            html: true,\r\n                            type: \"warning\",\r\n                            confirmButtonColor: \"#d51b23\"\r\n                        });\r\n                    },\r\n                });\r\n\r\n            });\r\n\r\n\r\n\r\n            //editar\r\n            $('body').on('click', 'tbody tr td .red.glyphicon.glyphicon-pencil', function () {\r\n                var nombre_table = $(this).parents().eq(3).attr('id');\r\n                var table = $(\"#\" + nombre_table).DataTable();\r\n                var nombre = table.cell(table.row($(this).parent()).index(), 0).data();\r\n                var descripcion = table.cell(table.row($(this).parent()).index(), 1).data();\r\n                var funcionalidad = table.cell(table.row($(this).parent()).index(), 2).data();\r\n\r\n                $(\"#nombre_editar\").prop('disabled', false);\r\n                $('#nombre_editar').val(nombre);\r\n                $('#descripcion_editar').val(descripcion);\r\n\r\n\r\n                if (nombre_table == 'tableActions') {\r\n                    $(\".form-pilos.func\").removeClass('hide');\r\n                    $(\"#save_seg\").attr(\"name\", this.id + \"_accion\");\r\n                    //  $(\"#functions_table\").val(funcionalidad).change();\r\n                    $(\"#functions_table option\").filter(function () {\r\n                        //may want to use $.trim in here\r\n                        return $(this).text() == funcionalidad;\r\n                    }).prop('selected', true);\r\n\r\n\r\n                } else if (nombre_table == 'tableFunctions') {\r\n                    $(\"#save_seg\").attr(\"name\", this.id + \"_funcionalidad\");\r\n                    $(\".form-pilos.func\").addClass('hide');\r\n\r\n                } else {\r\n                    $(\"#save_seg\").attr(\"name\", this.id + \"_rol\");\r\n                    $(\"#nombre_editar\").prop('disabled', true);\r\n                    $(\".form-pilos.func\").addClass('hide');\r\n\r\n                }\r\n            });\r\n\r\n            //modificar\r\n            $(document).on('click', '#save_seg', function () {\r\n                var texto = this.name.split(\"_\");\r\n                var id = texto[0];\r\n                var table = texto[1];\r\n                var nombre = $(\"#nombre_editar\").val();\r\n                var descripcion = $(\"#descripcion_editar\").val();\r\n                var funcionalidad = \"\";\r\n                if (table == 'accion') {\r\n                    funcionalidad = $(\"#functions_table\").val();\r\n                }\r\n\r\n                $.ajax({\r\n                    type: \"POST\",\r\n                    data: {\r\n                        id: id,\r\n                        table: table,\r\n                        source: \"modify_register\",\r\n                        nombre: nombre,\r\n                        descripcion: descripcion,\r\n                        funcionalidad: funcionalidad\r\n                    },\r\n                    url: \"../managers/permissions_management/permissions_report.php\",\r\n                    success: function (msg) {\r\n                        swal({\r\n                            title: msg.title,\r\n                            html: true,\r\n                            text: msg.text,\r\n                            type: msg.type,\r\n                            confirmButtonColor: \"#d51b23\"\r\n                        });\r\n\r\n                        load_actions();\r\n                        load_functions();\r\n                        load_roles();\r\n                        update_functionality_select();\r\n                        update_general_tab(instance);\r\n                        update_role_select();\r\n\r\n\r\n\r\n                    },\r\n                    dataType: \"json\",\r\n                    cache: \"false\",\r\n                    error: function (msg) {\r\n                        swal({\r\n                            title: \"Error\",\r\n                            html: true,\r\n                            text: \"Se presento un inconveniente al modificar registro <br>\" + msg,\r\n                            type: \"error\",\r\n                            confirmButtonColor: \"#d51b23\"\r\n                        });\r\n                    },\r\n                });\r\n\r\n\r\n\r\n            });\r\n\r\n\r\n\r\n\r\n            //eliminar\r\n            $('#div_actions').on('click', '#delete_action', function () {\r\n\r\n                var table = $(\"#div_actions #tableActions\").DataTable();\r\n                var td = $(this).parent();\r\n                var childrenid = $(this).children('span').attr('id');\r\n                var colIndex = table.cell(td).index().column;\r\n\r\n                var nombre = table.cell(table.row(td).index(), 0).data();\r\n                var descripcion = table.cell(table.row(td).index(), 1).data();\r\n                swal({\r\n                    title: \"Estas seguro/a?\",\r\n                    text: \"La acción <strong>\" + nombre + \"</strong> se eliminará\",\r\n                    type: \"warning\",\r\n                    html: true,\r\n                    showCancelButton: true,\r\n                    confirmButtonColor: \"#d51b23\",\r\n                    confirmButtonText: \"Si!\",\r\n                    cancelButtonText: \"No\",\r\n                    closeOnConfirm: true,\r\n                },\r\n                    function (isConfirm) {\r\n                        if (isConfirm) {\r\n\r\n                            delete_record(childrenid, \"accion\");\r\n                            load_actions();\r\n\r\n\r\n                        }\r\n                    }\r\n                );\r\n\r\n            });\r\n\r\n\r\n            function delete_record(id, source) {\r\n                $.ajax({\r\n                    type: \"POST\",\r\n                    data: {\r\n                        id: id,\r\n                        source: \"delete_record\",\r\n                        type: source,\r\n                    },\r\n                    url: \"../managers/permissions_management/permissions_report.php\",\r\n                    success: function (msg) {\r\n                        swal({\r\n                            title: msg.title,\r\n                            html: true,\r\n                            text: msg.text,\r\n                            type: msg.type,\r\n                            confirmButtonColor: \"#d51b23\"\r\n                        });\r\n                        update_functionality_select();\r\n                        update_general_tab(instance);\r\n\r\n                    },\r\n                    dataType: \"json\",\r\n                    cache: \"false\",\r\n                    error: function (msg) {\r\n                        swal({\r\n                            title: \"Error\",\r\n                            text: \"Error al eliminar registro\",\r\n                            type: \"error\",\r\n                            confirmButtonColor: \"#d51b23\"\r\n                        });\r\n                    },\r\n                });\r\n            }\r\n\r\n            function load_functions() {\r\n                $.ajax({\r\n                    type: \"POST\",\r\n                    url: \"../managers/permissions_management/load_function.php\",\r\n                    success: function (msg) {\r\n                        $(\"#div_functions\").empty();\r\n                        $(\"#div_functions\").append('<table id=\"tableFunctions\"  class=\"display\" cellspacing=\"0\" width=\"100%\" ><thead><thead></table>');\r\n                        var table = $(\"#tableFunctions\").DataTable(msg);\r\n                        $('#div_functions #modify_function').css('cursor', 'pointer');\r\n\r\n\r\n                    },\r\n                    dataType: \"json\",\r\n                    cache: \"false\",\r\n                    error: function (msg) {\r\n                        swal({\r\n                            title: \"Error al cargar Funcionalidades.\",\r\n                            text: msg,\r\n                            type: \"error\",\r\n                            confirmButtonColor: \"#d51b23\"\r\n                        });\r\n                    },\r\n                });\r\n            }\r\n\r\n\r\n            function load_actions() {\r\n                $.ajax({\r\n                    type: \"POST\",\r\n                    url: \"../managers/permissions_management/load_actions.php\",\r\n                    success: function (msg) {\r\n                        $(\"#div_actions\").empty();\r\n                        $(\"#div_actions\").append('<table id=\"tableActions\"  class=\"display\" cellspacing=\"0\" width=\"100%\" ><thead><thead></table>');\r\n                        var table = $(\"#tableActions\").DataTable(msg);\r\n                        $('#div_actions #delete_action').css('cursor', 'pointer');\r\n                    },\r\n                    dataType: \"json\",\r\n                    cache: \"false\",\r\n                    error: function (msg) {\r\n                        swal({\r\n                            title: \"Error al cargar acciones.\",\r\n                            text: msg,\r\n                            type: \"error\",\r\n                            confirmButtonColor: \"#d51b23\"\r\n                        });\r\n                    },\r\n                });\r\n            }\r\n\r\n            function load_roles() {\r\n                $.ajax({\r\n                    type: \"POST\",\r\n                    url: \"../managers/permissions_management/load_profiles.php\",\r\n                    success: function (msg) {\r\n                        $(\"#div_profiles\").empty();\r\n                        $(\"#div_profiles\").append('<table id=\"tableProfiles\"  class=\"display\" cellspacing=\"0\" width=\"100%\" ><thead><thead></table>');\r\n                        var table = $(\"#tableProfiles\").DataTable(msg);\r\n                        $('#div_profiles #delete_profiles').css('cursor', 'pointer');\r\n                    },\r\n                    dataType: \"json\",\r\n                    cache: \"false\",\r\n                    error: function (msg) {\r\n                        swal({\r\n                            title: \"Error al cargar roles.\",\r\n                            text: msg,\r\n                            type: \"error\",\r\n                            confirmButtonColor: \"#d51b23\"\r\n                        });\r\n                    },\r\n                });\r\n            }\r\n\r\n            function update_functionality_select() {\r\n                $.ajax({\r\n                    type: \"POST\",\r\n                    data: {\r\n                        source: \"update_functionality_select\",\r\n                    },\r\n                    url: \"../managers/permissions_management/permissions_report.php\",\r\n                    dataType: \"json\",\r\n                    cache: \"false\",\r\n                    success: function (msg) {\r\n                        $(\"#funct1\").html(msg[0]);\r\n                        $(\"#funct2\").html(msg[1]);\r\n                    },\r\n                    error: function (msg) {\r\n                        swal({\r\n                            title: \"Error al actualizar Funcionalidad.\",\r\n                            text: msg,\r\n                            type: \"error\",\r\n                            confirmButtonColor: \"#d51b23\"\r\n                        });\r\n                    },\r\n                });\r\n            }\r\n\r\n            function update_general_tab(instance) {\r\n                $.ajax({\r\n                    type: \"POST\",\r\n                    data: {\r\n                        source: \"update_general_table\",\r\n                        instance: instance,\r\n                    },\r\n                    url: \"../managers/permissions_management/permissions_report.php\",\r\n                    dataType: \"json\",\r\n                    cache: \"false\",\r\n                    success: function (msg) {\r\n                        $(\"#lista_funcionalidades\").html(msg);\r\n                    },\r\n                    error: function (msg) {\r\n                        swal({\r\n                            title: \"Error al actualizar la asignacion de roles y permisos.\",\r\n                            text: msg,\r\n                            type: \"error\",\r\n                            confirmButtonColor: \"#d51b23\"\r\n                        });\r\n                    },\r\n                });\r\n            }\r\n\r\n            function update_role_select() {\r\n                $.ajax({\r\n                    type: \"POST\",\r\n                    data: {\r\n                        source: \"update_role_select\",\r\n                    },\r\n                    url: \"../managers/permissions_management/permissions_report.php\",\r\n                    dataType: \"json\",\r\n                    cache: \"false\",\r\n                    success: function (msg) {\r\n                        $(\"#profiles_user\").html(msg);\r\n                        select_user();\r\n                    },\r\n                    error: function (msg) {\r\n                        swal({\r\n                            title: \"Error al actualizar roles.\",\r\n                            text: msg,\r\n                            type: \"error\",\r\n                            confirmButtonColor: \"#d51b23\"\r\n                        });\r\n                    },\r\n                });\r\n            }\r\n        }\r\n    };\r\n});\r\n"],"file":"permissionsmanagement_main.min.js"}