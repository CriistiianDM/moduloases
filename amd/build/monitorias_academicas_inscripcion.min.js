define ("block_ases/monitorias_academicas_inscripcion",["jquery","block_ases/_general_modal_manager","block_ases/loading_indicator","block_ases/sweetalert"],function(a,b,c){var d={};return{set_user:function set_user(a,b,c){return d={id:a,email:b,phone:c}},p:function p(){return console.log(d)},init:function init(){c.show();a(".link_inscripcion_monitoria").click(function(f){f.preventDefault();c.show();a.when(a.ajax({type:"POST",data:JSON.stringify({function:"get_proxima_sesion_de_monitoria",params:f.target.id}),url:"../managers/asistencia_monitorias/asistencia_monitorias_api.php",dataType:"json",error:function error(b){a("#debug").html(b)}})).done(function(g){var h=a("#content-modal-inscripcion").html();b.generate_modal("modal_fomulario_inscripcion","Inscribirse a monitor\xEDa",h,null,function(){c.hide();b.show_modal(".modal_fomulario_inscripcion");a(".modal_fomulario_inscripcion").find(".general_modal_content").addClass("w-50");a(".modal_fomulario_inscripcion").find("#monitoria").val(f.target.innerHTML);a(".modal_fomulario_inscripcion").find("#fecha-monitoria").val(g.message.fecha_legible);a(".modal_fomulario_inscripcion").find("#cancelar-inscripcion-btn").click(function(){a(".general_modal_close").first().click()});a(".modal_fomulario_inscripcion").find("#form-inscripcion").submit(function(b){b.preventDefault();c.show();var e=g.message.id,f=d.id,h=a(".modal_fomulario_inscripcion").find("#asignatura").val(),i=a(".modal_fomulario_inscripcion").find("#tematica").val();a.ajax({type:"POST",data:JSON.stringify({function:"anadir_asistente_a_sesion_de_monitoria",params:[e,f,h,i]}),url:"../managers/asistencia_monitorias/asistencia_monitorias_api.php",dataType:"json",success:function success(b){c.hide();a(".general_modal_close").first().click();if(0==b.status_code){swal({title:"Inscripci\xF3n correcta!",text:"Gracias por inscribirte. Ser\xE1s contactado por el monitor encargado el d\xEDa de la monitor\xEDa para concretar los detalles.",icon:"success"},function(){location.reload()})}else{swal("Error!","Oops!: "+b.data_response,"error");console.log(b)}},error:function error(b){console.log("Error de inscripci\xF3n a monitoria en BD");a("#debug").html(b.responseText)}})})})})});a(".eliminar-inscripcion").click(function(b){var c=a(b.target).parent().parent().find("td");swal({title:"Cancelar asistencia",text:"\xBFDeseas desinscribirte de la monitor\xEDa de "+c[3].innerHTML+" programada el "+c[0].innerHTML+" "+c[1].innerHTML+" "+c[2].innerHTML+"?",type:"warning",allowOutsideClick:!0,confirmButtonText:"Cancelar asistencia"},function(c){if(c){a.ajax({type:"POST",data:JSON.stringify({function:"eliminar_asistencia",params:b.target.getAttribute("val")}),url:"../managers/asistencia_monitorias/asistencia_monitorias_api.php",dataType:"json",success:function success(){location.reload()},error:function error(a){swal("Error!",a,"error");console.log(a)}})}})});a("#editar-celular").click(function(){a("#mostrar-celular").hide();a("#edicion-celular").attr("style","display: inline");a("#campo-celular").attr("placeholder",a("#celular").html())});function e(){a("#edicion-celular").hide();a("#mostrar-celular").show()}a("#cancelar-editar-celular").click(e);a("#guardar-editar-celular").click(function(){console.log(a("#campo-celular").val());a.when(a.ajax({type:"POST",data:JSON.stringify({function:"modificar_celular_de_usuario",params:[d.id,a("#campo-celular").val()]}),url:"../managers/asistencia_monitorias/asistencia_monitorias_api.php",dataType:"json",error:function error(b){a("#debug").html(b)},success:function success(a){console.log(a)}})).done(e);a("#celular").html(a("#campo-celular").val())});c.hide()}}});
//# sourceMappingURL=monitorias_academicas_inscripcion.min.js.map
