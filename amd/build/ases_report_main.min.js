'use strict';define(['jquery','block_ases/jszip','block_ases/pdfmake','block_ases/jquery.dataTables','block_ases/dataTables.autoFill','block_ases/dataTables.buttons','block_ases/buttons.html5','block_ases/buttons.flash','block_ases/buttons.print','block_ases/bootstrap','block_ases/sweetalert2'],function(a,b){function l(){var n=a('#form_general_report').serializeArray();n.push({name:'instance_id',value:m()}),a('#div_table').html('<img class="icon-loading" src="../icon/loading.gif"/>'),a.ajax({type:'POST',data:n,url:'../managers/ases_report/asesreport_server_processing.php',success:function success(o){a('#div_table').html(''),a('#div_table').fadeIn(1e3).append('<table id="tableResult" class="display" cellspacing="0" width="100%"><thead> </thead></table>'),a('#tableResult').DataTable(o),a('#tableResult tr').each(function(){a.each(this.cells,function(){'Bajo'==a(this).html()?a(this).addClass('riesgo_bajo'):'Medio'==a(this).html()?a(this).addClass('riesgo_medio'):'Alto'==a(this).html()&&a(this).addClass('riesgo_alto')})}),a('#tableResult').bind('DOMSubtreeModified',function(){a('#tableResult tr').each(function(){a.each(this.cells,function(){'Bajo'==a(this).html()?a(this).addClass('riesgo_bajo'):'Medio'==a(this).html()?a(this).addClass('riesgo_medio'):'Alto'==a(this).html()&&a(this).addClass('riesgo_alto')})})})},dataType:'json',cache:'false',error:function error(){alert('Error al conectar con el servidor')}})}function m(){var n=location.search.split('&');for(x in n)if(0<=n[x].indexOf('instanceid')){var o=n[x].split('=');return o[1]}return 0}return{init:function init(){window.JSZip=b,a('#send_form_btn').on('click',function(){l();var n=a('#conditions').val();'TODOS'==n?(a('#div-summary-spp').prop('hidden',!1),a('#div-summary-spe').prop('hidden',!1),a('#div-summary-3740').prop('hidden',!1),a('#div-summary-oa').prop('hidden',!1)):'TODOS-SPP'==n||'SPP'==n.substring(0,3)?(a('#div-summary-spp').prop('hidden',!1),a('#div-summary-spe').prop('hidden',!0),a('#div-summary-3740').prop('hidden',!0),a('#div-summary-oa').prop('hidden',!0)):'TODOS-SPE'==n||'SPE'==n.substring(0,3)?(a('#div-summary-spp').prop('hidden',!0),a('#div-summary-spe').prop('hidden',!1),a('#div-summary-3740').prop('hidden',!0),a('#div-summary-oa').prop('hidden',!0)):'TODOS-3740'==n||'3740'==n.substring(0,4)?(a('#div-summary-spp').prop('hidden',!0),a('#div-summary-spe').prop('hidden',!0),a('#div-summary-3740').prop('hidden',!1),a('#div-summary-oa').prop('hidden',!0)):'TODOS-OTROS'==n&&(a('#div-summary-spp').prop('hidden',!0),a('#div-summary-spe').prop('hidden',!0),a('#div-summary-3740').prop('hidden',!0),a('#div-summary-oa').prop('hidden',!1))}),a(document).on('click','#tableResult tbody tr td',function(){var o=a('#tableResult').DataTable(),p=o.cell(this).index().column;2>=p&&(a('#formulario').each(function(){this.reset}),location.href='student_profile.php'+location.search+'&student_code='+o.cell(o.row(this).index(),0).data())}),a('#contact_fields_check').on('change',function(){a('#contact_fields_check').prop('checked')?a('#contact_fields input[type=\'checkbox\']').prop('checked',!0):a('#contact_fields input[type=\'checkbox\']').prop('checked',!1)}),a('#status_fields_check').on('change',function(){a('#status_fields_check').prop('checked')?a('input[name=\'status_fields[]\']').prop('checked',!0):a('input[name=\'status_fields[]\']').prop('checked',!1)}),a('#academic_fields_check').on('change',function(){a('#academic_fields_check').prop('checked')?a('input[name=\'academic_fields[]\']').prop('checked',!0):a('input[name=\'academic_fields[]\']').prop('checked',!1)}),a('#risk_fields_check').on('change',function(){a('#risk_fields_check').prop('checked')?a('input[name=\'risk_fields[]\']').prop('checked',!0):a('input[name=\'risk_fields[]\']').prop('checked',!1)}),a('#assignment_fields_check').on('change',function(){a('#assignment_fields_check').prop('checked')?a('input[name=\'assignment_fields[]\']').prop('checked',!0):a('input[name=\'assignment_fields[]\']').prop('checked',!1)}),a(document).on('change','.select_risk',function(){var n=a('#tableResult').DataTable(),o=a(this).parent().index()+1,p=a(this).parent().find(':selected').text();n.columns(o-1).search(this.value).draw()}),a(document).on('change','.filter_assignments',function(){var n=a('#tableResult').DataTable(),o=a(this).parent().index()+1,p=a(this).parent().find(':selected').text();n.columns(o-1).search(this.value).draw()}),a(document).on('change','.select_filter_statuses',function(){var n=a('#tableResult').DataTable(),o=a(this).parent().index()+1,p=a(this).parent().find(':selected').text();n.columns(o-1).search(p?'^'+p+'$':'',!0,!1).draw()}),a(document).on('click','.summary-title',function(){var n=a(a(this).data('icon'));n.hasClass('glyphicon-chevron-right')?(n.removeClass('glyphicon-chevron-right'),n.addClass('glyphicon-chevron-down')):(n.addClass('glyphicon-chevron-right'),n.removeClass('glyphicon-chevron-down'));var o=a(a(this).data('target'));'none'==o.css('display')?o.show(300):o.hide(300)}),a('.panel-heading-summary').on('click',function(){var n=a(this).find('.icon-group-cohort');n.hasClass('glyphicon-chevron-right')?(n.removeClass('glyphicon-chevron-right'),n.addClass('glyphicon-chevron-down')):(n.addClass('glyphicon-chevron-right'),n.removeClass('glyphicon-chevron-down'));var o=a(a(this).data('target'));'none'==o.css('display')?o.show(300):o.hide(300)})},load_defaults_students:function load_defaults_students(n){a('#div_table').html(''),a('#div_table').fadeIn(1e3).append('<table id="tableResult" class="stripe row-border order-column" cellspacing="0" width="100%"><thead> </thead></table>'),a('#tableResult').DataTable(n)},create_table:function create_table(){},get_id_instance:function get_id_instance(){var n=location.search.split('&');for(x in n)if(0<=n[x].indexOf('instanceid')){var o=n[x].split('=');return o[1]}return 0}}});