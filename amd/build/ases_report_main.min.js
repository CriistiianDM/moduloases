define(["jquery","block_ases/jszip","block_ases/pdfmake","block_ases/jquery.dataTables","block_ases/dataTables.autoFill","block_ases/dataTables.buttons","block_ases/buttons.html5","block_ases/buttons.flash","block_ases/buttons.print","block_ases/bootstrap","block_ases/sweetalert"],function(a,b,c,d,e,f,g,h,i,j,k){function l(){var b=a("#form_general_report").serializeArray();b.push({name:"instance_id",value:m()}),a("#div_table").html('<img class="icon-loading" src="../icon/loading.gif"/>'),a.ajax({type:"POST",data:b,url:"../managers/ases_report/asesreport_server_processing.php",success:function(b){a("#div_table").html(""),a("#div_table").fadeIn(1e3).append('<table id="tableResult" class="display" cellspacing="0" width="100%"><thead> </thead></table>'),a("#tableResult").DataTable(b),a("#tableResult tr").each(function(){a.each(this.cells,function(){"Bajo"==a(this).html()?a(this).addClass("riesgo_bajo"):"Medio"==a(this).html()?a(this).addClass("riesgo_medio"):"Alto"==a(this).html()&&a(this).addClass("riesgo_alto")})}),a("#tableResult").bind("DOMSubtreeModified",function(){a("#tableResult tr").each(function(){a.each(this.cells,function(){"Bajo"==a(this).html()?a(this).addClass("riesgo_bajo"):"Medio"==a(this).html()?a(this).addClass("riesgo_medio"):"Alto"==a(this).html()&&a(this).addClass("riesgo_alto")})})})},dataType:"json",cache:"false",error:function(a){alert("Error al conectar con el servidor")}})}function m(){var a=location.search.split("&");for(x in a)if(a[x].indexOf("instanceid")>=0){var b=a[x].split("=");return b[1]}return 0}return{init:function(){window.JSZip=b,a("#send_form_btn").on("click",function(){l()}),a(document).on("click","#tableResult tbody tr td",function(){var b="student_profile.php",c=a("#tableResult").DataTable(),d=c.cell(this).index().column;d<=2&&(a("#formulario").each(function(){this.reset}),location.href=b+location.search+"&student_code="+c.cell(c.row(this).index(),0).data())}),a("#conditions").on("change",function(){"TODOS"!=a("#conditions").val()?a("#cohort_check").prop("checked",!1):a("#cohort_check").prop("checked",!0)}),a("#contact_fields_check").on("change",function(){a("#contact_fields_check").prop("checked")?a("#contact_fields input[type='checkbox']").prop("checked",!0):a("#contact_fields input[type='checkbox']").prop("checked",!1)}),a("#status_fields_check").on("change",function(){a("#status_fields_check").prop("checked")?a("input[name='status_fields[]']").prop("checked",!0):a("input[name='status_fields[]']").prop("checked",!1)}),a("#academic_fields_check").on("change",function(){a("#academic_fields_check").prop("checked")?a("input[name='academic_fields[]']").prop("checked",!0):a("input[name='academic_fields[]']").prop("checked",!1)}),a("#risk_fields_check").on("change",function(){a("#risk_fields_check").prop("checked")?a("input[name='risk_fields[]']").prop("checked",!0):a("input[name='risk_fields[]']").prop("checked",!1)}),a("#assignment_fields_check").on("change",function(){a("#assignment_fields_check").prop("checked")?a("input[name='assignment_fields[]']").prop("checked",!0):a("input[name='assignment_fields[]']").prop("checked",!1)}),a(document).on("change",".select_risk",function(){var b=a("#tableResult").DataTable(),c=a(this).parent().index()+1;a(this).parent().find(":selected").text();b.columns(c-1).search(this.value).draw()}),a(document).on("change",".filter_assignments",function(){var b=a("#tableResult").DataTable(),c=a(this).parent().index()+1;a(this).parent().find(":selected").text();b.columns(c-1).search(this.value).draw()})},load_defaults_students:function(b){a("#div_table").html(""),a("#div_table").fadeIn(1e3).append('<table id="tableResult" class="stripe row-border order-column" cellspacing="0" width="100%"><thead> </thead></table>'),a("#tableResult").DataTable(b)},create_table:function(){},get_id_instance:function(){var a=location.search.split("&");for(x in a)if(a[x].indexOf("instanceid")>=0){var b=a[x].split("=");return b[1]}return 0}}});