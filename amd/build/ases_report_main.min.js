define(["jquery","block_ases/datatables.net","block_ases/datatables.net-buttons","block_ases/buttons.flash","block_ases/jszip","block_ases/bootstrap","block_ases/sweetalert","block_ases/buttons.html5","block_ases/buttons.print","block_ases/jqueryui"],function(t){function e(){var e=t("#form_general_report").serializeArray();e.push({name:"instance_id",value:a()}),t("#div_table").html('<img class="icon-loading" src="../icon/loading.gif"/>'),t.ajax({type:"POST",data:e,url:"../managers/ases_report/asesreport_server_processing.php",success:function(e){t("#div_table").html(""),t("#div_table").fadeIn(1e3).append('<table id="tableResult" class="display" cellspacing="0" width="100%"><thead> </thead></table>'),t("#tableResult").DataTable(e),t("#tableResult tr").each(function(){t.each(this.cells,function(){"Bajo"==t(this).html()?t(this).addClass("bajo"):"Medio"==t(this).html()?t(this).addClass("medio"):"Alto"==t(this).html()&&t(this).addClass("alto")})}),t("#tableResult").bind("DOMSubtreeModified",function(){t("#tableResult tr").each(function(){t.each(this.cells,function(){"bajo"==t(this).html()?t(this).addClass("bajo"):"medio"==t(this).html()?t(this).addClass("medio"):"alto"==t(this).html()&&t(this).addClass("alto")})})})},dataType:"json",cache:"false",error:function(t){alert("Error al conectar con el servidor")}})}function a(){var t=location.search.split("&");for(x in t)if(t[x].indexOf("instanceid")>=0)return t[x].split("=")[1];return 0}return{init:function(){t("#send_form_btn").on("click",function(){e()}),t(document).on("click","#tableResult tbody tr td",function(){var e=t("#tableResult").DataTable({fixedHeader:{header:!0,footer:!0}});e.cell(this).index().column<=2&&(t("#formulario").each(function(){this.reset}),location.href="student_profile.php"+location.search+"&student_code="+e.cell(e.row(this).index(),0).data())}),t(document).on("change","#tableResult thead tr th select",function(){var e=t("#tableResult").DataTable(),a=t(this).parent().index()+1;t(this).parent().find(":selected").text();e.columns(a-1).search(this.value).draw()})}}});