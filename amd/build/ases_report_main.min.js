'use strict';define(['jquery','block_ases/jszip','block_ases/pdfmake','block_ases/jquery.dataTables','block_ases/dataTables.autoFill','block_ases/dataTables.buttons','block_ases/buttons.html5','block_ases/buttons.flash','block_ases/buttons.print','block_ases/dataTables.fixedColumns','block_ases/bootstrap','block_ases/sweetalert'],function(a,b){function m(){var o=a('#form_general_report').serializeArray();o.push({name:'instance_id',value:n()}),a('#div_table').html('<img class="icon-loading" src="../icon/loading.gif"/>'),a.ajax({type:'POST',data:o,url:'../managers/ases_report/asesreport_server_processing.php',success:function success(p){a('#div_table').html(''),a('#div_table').fadeIn(1e3).append('<table id="tableResult" class="display" cellspacing="0" width="100%"><thead> </thead></table>'),a('#tableResult').DataTable(p),a('#tableResult tr').each(function(){a.each(this.cells,function(){'Bajo'==a(this).html()?a(this).addClass('bajo'):'Medio'==a(this).html()?a(this).addClass('medio'):'Alto'==a(this).html()&&a(this).addClass('alto')})}),a('#tableResult').bind('DOMSubtreeModified',function(){a('#tableResult tr').each(function(){a.each(this.cells,function(){'bajo'==a(this).html()?a(this).addClass('bajo'):'medio'==a(this).html()?a(this).addClass('medio'):'alto'==a(this).html()&&a(this).addClass('alto')})})})},dataType:'json',cache:'false',error:function error(){alert('Error al conectar con el servidor')}})}function n(){var o=location.search.split('&');for(x in o)if(0<=o[x].indexOf('instanceid')){var p=o[x].split('=');return p[1]}return 0}return{init:function init(){window.JSZip=b,a('#send_form_btn').on('click',function(){m()}),a(document).on('click','#tableResult tbody tr td',function(){var p=a('#tableResult').DataTable(),q=p.cell(this).index().column;2>=q&&(a('#formulario').each(function(){this.reset}),location.href='student_profile.php'+location.search+'&student_code='+p.cell(p.row(this).index(),0).data())}),a('#conditions').on('change',function(){'TODOS'==a('#conditions').val()?a('#cohort_check').prop('checked',!0):a('#cohort_check').prop('checked',!1)}),a('#contact_fields_check').on('change',function(){a('#contact_fields_check').prop('checked')?a('#contact_fields input[type=\'checkbox\']').prop('checked',!0):a('#contact_fields input[type=\'checkbox\']').prop('checked',!1)}),a('#status_fields_check').on('change',function(){a('#status_fields_check').prop('checked')?a('input[name=\'status_fields[]\']').prop('checked',!0):a('input[name=\'status_fields[]\']').prop('checked',!1)}),a('#academic_fields_check').on('change',function(){a('#academic_fields_check').prop('checked')?a('input[name=\'academic_fields[]\']').prop('checked',!0):a('input[name=\'academic_fields[]\']').prop('checked',!1)}),a('#risk_fields_check').on('change',function(){a('#risk_fields_check').prop('checked')?a('input[name=\'risk_fields[]\']').prop('checked',!0):a('input[name=\'risk_fields[]\']').prop('checked',!1)}),a(document).on('change','#tableResult thead tr th select',function(){var o=a('#tableResult').DataTable(),p=a(this).parent().index()+1,q=a(this).parent().find(':selected').text();o.columns(p-1).search(this.value).draw()})},load_defaults_students:function load_defaults_students(o){a('#div_table').html(''),a('#div_table').fadeIn(1e3).append('<table id="tableResult" class="stripe row-border order-column" cellspacing="0" width="100%"><thead> </thead></table>'),a('#tableResult').DataTable(o)},create_table:function create_table(){},get_id_instance:function get_id_instance(){var o=location.search.split('&');for(x in o)if(0<=o[x].indexOf('instanceid')){var p=o[x].split('=');return p[1]}return 0}}});