define(["jquery","block_ases/bootstrap","block_ases/sweetalert"],function(i,a,e){return{init:function(){function a(){var a=i("#selector").val();switch(i("#informacion").empty(),a){case"matricula":i("#informacion").append('<div class="alert alert-info"><h4 align="center">Información de carga histórico académico</h4><br><strong>Para tener en cuenta...</strong> <br><p>Columnas obligatorias:<ul> <li>codigo_estudiante</li> <li>codigo_programa</li> <li>codigo_asignatura</li> <li>nombre_asignatura</li> <li>semestre</li> </ul> </div>');break;case"academic":i("#informacion").append('<div class="alert alert-info"><h4 align="center">Información de carga histórico académico</h4><br><strong>Para tener en cuenta...</strong> <br><p>Columnas obligatorias:<ul> <li>codigo_estudiante</li> <li>semestre</li> <li>programa</li> <li>promedio_semestre</li> <li>promedio_acumulado</li> </ul> </p><p>Columnas extras aceptadas: <ul> <li>numero_bajo</li> <li>puesto_estimulo</li> <li>fecha_cancelacion</li> </ul> </p></div>');break;case"materias":i("#informacion").append('<div class="alert alert-info"><h4 align="center">Información de carga materias</h4><br><strong>Para tener en cuenta...</strong> <br><p>Columnas obligatorias:<ul> <li>codigo_estudiante</li> <li>semestre</li> <li>programa</li> <li>nombre_materia</li> <li>codigo_materia</li> <li>creditos</li> <li>nota</li> <li>fecha_cancelacion_materia</li> </ul> </p></div>');break;case"icetex":i("#informacion").append('<div class="alert alert-info"><h4 align="center">Información de carga histórico ICETEX</h4><br> <strong>Para tener en cuenta...</strong> <br><p>Columnas obligatorias:<ul><li>cedula_estudiante</li><li>programa</li><li>codigo_resolucion</li> <li>monto_estudiante</li></ul> </p></div>');break;case"resolution":i("#informacion").append('<div class="alert alert-info"><h4 align="center">Información de carga resolución ICETEX</h4><br> <strong>Para tener en cuenta...</strong> <br><p>Columnas obligatorias:<ul><li>codigo_resolucion</li><li>nombre_semestre</li><li>fecha</li><li>total_girado</li></ul></p> <p>Columnas extras aceptadas: <ul> <li>nota_credito</li> <li>cantidad_estudiantes</li></div>');break;case"historic_icetex_status":i("#informacion").append('<div class="alert alert-info"><h4 align="center">Información de carga histórico de estados ICETEX</h4><br> <strong>Para tener en cuenta...</strong> <br><p>Columnas obligatorias:<ul><li>cedula_estudiante</li><li>semestre</li><li>estado_icetex</li></ul> </p></div>');break;case"student_status":i("#informacion").append('<div class="alert alert-info"><h4 align="center">Información de carga de estado de estudiantes</h4><br> <strong>Para tener en cuenta...</strong> <br><p>Columnas obligatorias:<ul><li>codigo_estudiante</li><li>codigo_programa</li><li>semestre</li></ul> </p><p>Columnas extras aceptadas: <ul><li>estado_grado</li> <li>cancelo_semestre</li></ul> </p></div>')}}a(),i("#selector").on("change",function(){a()}),i("#boton_subir").on("click",function(){i("#informacion").empty(),function(){var e=new FormData;if(null==i("#archivo")[0].files[0])return swal({title:"Archivo no registrado.",text:"Seleccione el archivo a subir",html:!0,type:"error",confirmButtonColor:"#d51b23"}),void a();e.append("file",i("#archivo")[0].files[0]);const r=window.location.href.split("instance_id=")[1];e.append("instanceid",r);var n=i("#selector").val()+"_processing.php";i.ajax({url:"../managers/historic_management/"+n,data:e,type:"POST",dataType:"json",cache:!1,contentType:!1,processData:!1,beforeSend:function(){i("#response").html("<img src='../icon/facebook.gif' />")},success:function(a){swal({title:"Exito",text:"Archivo Cargado. Por favor consulte los detalles",html:!0,type:"warning",showCancelButton:!1,showConfirmButton:!1,timer:1300}),i("#response").empty(),i("#informacion").empty(),a.success?i("#informacion").append('<div class="alert alert-success"><h4 align="center">Información</h4><strong>Exito!</strong> <br><p>'+a.success+"</p></div>"):a.warning?i("#informacion").append('<div class="alert alert-warning"><h4 align="center">Información</h4><strong>Cargado con inconsitencias!</strong> <br>'+a.warning+"</div>"):a.error&&i("#informacion").append('<div class="alert alert-danger"><h4 align="center">Información</h4><strong>Error!</strong> <br>'+a.error+"</div>"),i("#informacion").append(a.urlzip)},error:function(e){console.log(e),swal({title:"Error en conexion al servidor.",text:"No se ha podido establecer conexion al servidor",html:!0,type:"error",confirmButtonColor:"#d51b23"}),i("#response").html(""),a()}})}()})}}});