define(["jquery","block_ases/bootstrap","block_ases/sweetalert"],function(e,a,i){return{init:function(){function a(){var a=e("#selector").val();switch(e("#informacion").empty(),a){case"academic":e("#informacion").append('<div class="alert alert-info"><h4 align="center">Información de carga histórico académico</h4><br><strong>Para tener en cuenta...</strong> <br><p>Columnas obligatorias:<ul> <li>codigo_estudiante</li> <li>semestre</li> <li>programa</li> <li>promedio_semestre</li> <li>promedio_acumulado</li> </ul> </p><p>Columnas extras aceptadas: <ul> <li>numero_bajo</li> <li>puesto_estimulo</li> <li>fecha_cancelacion</li> </ul> </p></div>');break;case"materias":e("#informacion").append('<div class="alert alert-info"><h4 align="center">Información de carga materias</h4><br><strong>Para tener en cuenta...</strong> <br><p>Columnas obligatorias:<ul> <li>codigo_estudiante</li> <li>semestre</li> <li>programa</li> <li>nombre_materia</li> <li>codigo_materia</li> <li>creditos</li> <li>nota</li> <li>fecha_cancelacion_materia</li> </ul> </p></div>');break;case"icetex":e("#informacion").append('<div class="alert alert-info"><h4 align="center">Información de carga histórico ICETEX</h4><br> <strong>Para tener en cuenta...</strong> <br><p>Columnas obligatorias:<ul><li>cedula_estudiante</li><li>programa</li><li>codigo_resolucion</li> <li>monto_estudiante</li></ul> </p></div>');break;case"resolution":e("#informacion").append('<div class="alert alert-info"><h4 align="center">Información de carga resolución ICETEX</h4><br> <strong>Para tener en cuenta...</strong> <br><p>Columnas obligatorias:<ul><li>codigo_resolucion</li><li>nombre_semestre</li><li>fecha</li><li>total_girado</li></ul></p> <p>Columnas extras aceptadas: <ul> <li>nota_credito</li> <li>cantidad_estudiantes</li></div>');break;case"historic_icetex_status":e("#informacion").append('<div class="alert alert-info"><h4 align="center">Información de carga histórico de estados ICETEX</h4><br> <strong>Para tener en cuenta...</strong> <br><p>Columnas obligatorias:<ul><li>cedula_estudiante</li><li>semestre</li><li>estado_icetex</li></ul> </p></div>');break;case"student_status":e("#informacion").append('<div class="alert alert-info"><h4 align="center">Información de carga de estado de estudiantes</h4><br> <strong>Para tener en cuenta...</strong> <br><p>Columnas obligatorias:<ul><li>codigo_estudiante</li><li>codigo_programa</li><li>semestre</li></ul> </p><p>Columnas extras aceptadas: <ul><li>estado_grado</li> <li>cancelo_semestre</li></ul> </p></div>')}}a(),e("#selector").on("change",function(){a()}),e("#boton_subir").on("click",function(){e("#informacion").empty(),function(){var i=new FormData;if(null==e("#archivo")[0].files[0])return swal({title:"Archivo no registrado.",text:"Seleccione el archivo a subir",html:!0,type:"error",confirmButtonColor:"#d51b23"}),void a();i.append("file",e("#archivo")[0].files[0]);var r=e("#selector").val()+"_processing.php";e.ajax({url:"../managers/historic_management/"+r,data:i,type:"POST",dataType:"json",cache:!1,contentType:!1,processData:!1,beforeSend:function(){e("#response").html("<img src='../icon/facebook.gif' />")},success:function(a){swal({title:"Exito",text:"Archivo Cargado. Por favor consulte los detalles",html:!0,type:"warning",showCancelButton:!1,showConfirmButton:!1,timer:1300}),e("#response").empty(),e("#informacion").empty(),a.success?e("#informacion").append('<div class="alert alert-success"><h4 align="center">Información</h4><strong>Exito!</strong> <br><p>'+a.success+"</p></div>"):a.warning?e("#informacion").append('<div class="alert alert-warning"><h4 align="center">Información</h4><strong>Cargado con inconsitencias!</strong> <br>'+a.warning+"</div>"):a.error&&e("#informacion").append('<div class="alert alert-danger"><h4 align="center">Información</h4><strong>Error!</strong> <br>'+a.error+"</div>"),e("#informacion").append(a.urlzip)},error:function(i){console.log(i),swal({title:"Error en conexion al servidor.",text:"No se ha podido establecer conexion al servidor",html:!0,type:"error",confirmButtonColor:"#d51b23"}),e("#response").html(""),a()}})}()})}}});