define(["jquery","block_ases/bootstrap","block_ases/d3","block_ases/sweetalert","block_ases/jqueryui"],function(e,a,t,o,r){function n(){e("#editar_ficha").click(function(){e("#ficha_estudiante").find("input").prop("readonly",!1),e("#observations_profile").prop("readonly",!1),e("#profesional_ps").prop("readonly",!0),e("#practicante_ps").prop("readonly",!0),e("#monitor_ps").prop("readonly",!0),e("#ficha_estudiante").find("select").prop("disabled",!1),e(this).hide(),e("#ficha_estudiante #cancel").fadeIn(),e("#ficha_estudiante #save").fadeIn(),e("#ficha_estudiante #codigo").attr("readonly",!0),e("#ficha_estudiante #search").fadeOut()})}function s(){e("#ficha_estudiante").find("input, textarea").prop("readonly",!0),e("#ficha_estudiante").find("select").prop("disabled",!0),e(this).hide(),e("#ficha_estudiante #save").fadeOut(),e("#ficha_estudiante #cancel").fadeOut(),e("#ficha_estudiante #editar_ficha").fadeIn(),e("#ficha_estudiante #codigo").attr("readonly",!1),e("#ficha_estudiante #search").fadeIn()}function l(){e("#go_back").on("click",function(){var e="ases_report.php",a=location.search.split("&");location.href=e+a[0]+"&"+a[1]})}function c(){var a=e("#ficha_estudiante").serializeArray();if(d(a)){JSON.stringify(a);e.ajax({type:"POST",data:{func:"save_profile",form:a},url:"../managers/student_profile/studentprofile_serverproc.php",success:function(e){swal(e.title,e.msg,e.status)},dataType:"json",cache:"false",error:function(e){swal(e.title,e.msg,e.status)}})}s()}function d(e){return u(e[4].value)?(swal("Error",'El campo "Documento" solo debe contener números',"error"),0):""==e[4].value?(swal("Error",'El campo "Documento" no puede estar vacio',"error"),0):""==e[6].value?(swal("Error",'El campo "Documento" no puede estar vacio',"error"),0):u(e[7].value)?(swal("Error",'El campo "Teléfono 1" solo debe contener números',"error"),0):u(e[8].value)?(swal("Error",'El campo "Teléfono 2" solo debe contener números',"error"),0):u(e[9].value)?(swal("Error",'El campo "Teléfono 3" solo debe contener números',"error"),0):""==e[10].value?(swal("Error",'El campo "Email alternativo" no puede estar vacio',"error"),0):p(e[10].value)?(swal("Error","El formato del correo alternativo es incorrecto. \n El formato correcto debería ser ejemplo@ejemplo.com","error"),0):""==e[11].value?(swal("Error",'El campo "Nombre acudiente" no puede estar vacio',"error"),0):u(e[12].value)?(swal("Error",'El campo "Teléfono acudiente" solo debe contener números',"error"),0):1}function u(e){var a="abcdefghyjklmnñopqrstuvwxyz";for(e=e.toLowerCase(),i=0;i<e.length;i++)if(-1!=a.indexOf(e.charAt(i),0))return 1;return 0}function p(e){var a=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;return a.test(e)?0:1}function v(){e("#description_dropout").val(""),e("#no_reason_option").attr("selected","selected")}function m(){var a;e("#estado").on("focus",function(){a=e("#estado option:selected").text()}).change(function(){var t=e("#estado option:selected").text();"RETIRADO"==t?(e("#modal_dropout").show(),e("#save_changes_dropout").click(function(){""==e("reasons_select").val()?swal({title:"Error",text:"Seleccione un mótivo",type:"error"}):_()})):"APLAZADO"==t?(e("#modal_dropout").show(),e("#save_changes_dropout").click(function(){""==e("reasons_select").val()?swal({title:"Error",text:"Seleccione un mótivo",type:"error"}):_()})):"NO REGISTRA"==t?swal({title:"Error",text:"Por favor seleccione un Estado Ases.",type:"error"}):swal({title:"¿Está seguro/a de realizar este cambio?",text:"El estado Icetex del estudiante pasará de "+a+" a "+t,type:"warning",showCancelButton:!0,confirmButtonColor:"#d51b23",confirmButtonText:"Si",cancelButtonText:"No",closeOnConfirm:!0,allowEscapeKey:!1},function(t){if(t){var i=_();swal(i.title,i.msg,resul_status.status)}else e("#estado").val(a)})})}function f(){var a;e("#estadoAses").on("focus",function(){a=e("#estadoAses option:selected").text()}).change(function(){var t=e("#estadoAses option:selected").text();"RETIRADO"==t?(e("#modal_dropout").show(),e("#save_changes_dropout").click(function(){""==e("reasons_select").val()?swal({title:"Error",text:"Seleccione un mótivo",type:"error"}):h()})):"APLAZADO"==t?(e("#modal_dropout").show(),e("#save_changes_dropout").click(function(){""==e("reasons_select").val()?swal({title:"Error",text:"Seleccione un mótivo",type:"error"}):h()})):"NO REGISTRA"==t?swal({title:"Error",text:"Por favor seleccione un Estado Ases.",type:"error"}):swal({title:"¿Está seguro/a de realizar este cambio?",text:"El estado ASES del estudiante pasará de "+a+" a "+t,type:"warning",showCancelButton:!0,confirmButtonColor:"#d51b23",confirmButtonText:"Si",cancelButtonText:"No",closeOnConfirm:!0,allowEscapeKey:!1},function(t){if(t){var i=h();swal(i.title,i.msg,resul_status.status)}else e("#estadoAses").val(a)})})}function _(){var a=new Array,t=e("#estado").val(),i=e("#id_ases").val(),o=e("#reasons_select").val(),r=e("#description_dropout").val();a.push({name:"func",value:"save_icetex_status"}),a.push({name:"new_status",value:t}),a.push({name:"id_ases",value:i}),""!=o&&a.push({name:"id_reason",value:o}),""!=r&&a.push({name:"observations",value:r}),e.ajax({type:"POST",data:a,url:"../../ases/managers/student_profile/studentprofile_serverproc.php",success:function(a){swal({title:a.title,text:a.msg,type:a.type}),e("#modal_dropout").hide(),v()},dataType:"json",cache:"false",error:function(e){swal("Error","No se puede contactar con el servidor.","error")}})}function h(){var a=new Array,t=e("#estadoAses").val(),i=e("#id_ases").val(),o=e("#reasons_select").val(),r=e("#description_dropout").val();a.push({name:"func",value:"save_ases_status"}),a.push({name:"new_status",value:t}),a.push({name:"id_ases",value:i}),""!=o&&a.push({name:"id_reason",value:o}),""!=r&&a.push({name:"observations",value:r}),e.ajax({type:"POST",data:a,url:"../../ases/managers/student_profile/studentprofile_serverproc.php",success:function(a){swal({title:a.title,text:a.msg,type:a.type}),e("#modal_dropout").hide(),v()},dataType:"json",cache:"false",error:function(e){swal("Error","El estado no fue actualizado. Error al contactarse con el servidor.","error")}})}function g(){var a=e("#modal_dropout"),t=e(".mymodal-close"),i=e("#goback_backdrop");i.on("click",function(){a.hide()}),t.on("click",function(){a.hide()})}function y(){var a=e("#modal_peer_tracking"),t=e(".mymodal-close"),i=e("#cancel_peer_tracking");i.on("click",function(){a.hide()}),t.on("click",function(){a.hide()});var o=e(".panel-heading.heading_semester_tracking");o.on("click",function(){"collapsed"==e(this).parent().attr("class")?(e("h4>span",this).removeClass("glyphicon-chevron-left"),e("h4>span",this).addClass("glyphicon-chevron-down")):(e("h4>span",this).removeClass("glyphicon-chevron-down"),e("h4>span",this).addClass("glyphicon-chevron-left"))})}function k(){var a=e("#modal_risk_span"),t=e("#modal_risk_close");a.on("click",function(){e("#modal_risk_graph").hide()}),t.on("click",function(){e("#modal_risk_graph").hide()})}function x(){e("#date").datepicker({dateFormat:"yy-mm-dd"});for(var a=new Date,t=(a.getDate(),a.getMonth()+1,a.getFullYear(),a.getMinutes()),i=a.getHours(),o="",r=0;24>r;r++)r==i?(10>i&&(i="0"+i),o+='<option value="'+i+'" selected>'+i+"</option>"):o+=10>r?'<option value="0'+r+'">0'+r+"</option>":'<option value="'+r+'">'+r+"</option>";for(var n="",r=0;60>r;r++)r==t?(10>t&&(t="0"+t),n+='<option value="'+t+'" selected>'+t+"</option>"):n+=10>r?'<option value="0'+r+'">0'+r+"</option>":'<option value="'+r+'">'+r+"</option>";e("#h_ini").append(o),e("#m_ini").append(n),e("#h_fin").append(o),e("#m_fin").append(n),e("#infomonitor").addClass("hide"),e("#seguimiento").find("input:text, textarea").val(""),e("#seguimiento").find("input:radio,input:checkbox").prop("checked",!1),e("#upd_seg").attr("disabled",!1),e("#upd_seg").attr("title",""),e("#seguimiento").find("select, textarea, input").attr("disabled",!1),e("#no_value_individual").hide(),e("#no_value_familiar").hide(),e("#no_value_academic").hide(),e("#no_value_economic").hide(),e("#no_value_life").hide(),e("#id_tracking_peer").val(""),e("#place").val(""),e("#topic_textarea").val(""),e("#objetivos").val(""),e("#individual").val(""),e("#familiar").val(""),e("#academico").val(""),e("#economico").val(""),e("#vida_uni").val(""),e("#observaciones").val(""),e("#no_value_individual").prop("checked",!0),e("#no_value_familiar").prop("checked",!0),e("#no_value_academic").prop("checked",!0),e("#no_value_economic").prop("checked",!0),e("#no_value_life").prop("checked",!0)}function w(){var a=e("#tracking_peer_form"),t=e("#modal_peer_tracking"),i=a.serializeArray(),o=E(document.location.search),r=b(i);if("success"!=r)swal({title:"Advertencia",text:r,type:"warning",html:!0});else{i.push({name:"func",value:"save_tracking_peer"});var n=e("#id_ases").val();i.push({name:"id_ases",value:n}),i.push({name:"id_instance",value:o.instanceid}),e.ajax({type:"POST",data:i,url:"../../ases/managers/student_profile/studentprofile_serverproc.php",success:function(e){swal({title:e.title,text:e.msg,type:e.type},function(){t.hide();var e=E(document.location.search);e.tab?location.reload():location.href=location.search+"&tab=socioed_tab"})},dataType:"json",cache:"false",error:function(e){console.log(e)}})}}function b(e){var a=/^\d{4}\-(0?[1-9]|1[012])\-(0?[1-9]|[12][0-9]|3[01])$/,t=a.exec(e[1].value);return console.log(a.exec(e[1].value)),""==e[1].value?"Debe introducir la fecha en la cual se realizó el seguimiento":null===t?"La fecha no sigue el patrón yyyy-mm-dd. Ejemplo 2017-10-13":""==e[2].value?"Debe introducir el lugar donde se realizó el seguimiento":""==e[7].value?"El campo tema se encuentra vacio":""==e[8].value?"El campo objetivos se encuentra vacio":parseInt(e[5].value)<parseInt(e[3].value)?"La hora de finalización debe ser mayor a la hora inicial":parseInt(e[3].value)==parseInt(e[5].value)&&parseInt(e[6].value)<=parseInt(e[4].value)?"La hora de finalización debe ser mayor a la hora inicial":""!=e[9].value&&0==e[10].value?"El riesgo asociado al campo Actividad Invidual no está marcado. Si usted escribió información en el campo Actividad Individual debe marcar un nivel de riesgo.":""!=e[11].value&&0==e[12].value?"El riesgo asociado al campo Actividad Familiar no está marcado. Si usted escribió información en el campo Actividad Familiar debe marcar un nivel de riesgo.":""!=e[13].value&&0==e[14].value?"El riesgo asociado al campo Actividad Académico no está marcado. Si usted escribió información en el campo Actividad Académico debe marcar un nivel de riesgo.":""!=e[15].value&&0==e[16].value?"El riesgo asociado al campo Actividad Económico no está marcado. Si usted escribió información en el campo Actividad Económico debe marcar un nivel de riesgo.":""!=e[17].value&&0==e[18].value?"El riesgo asociado al campo Actividad Vida Universitaria no está marcado. Si usted escribió información en el campo Actividad Vida Universitaria debe marcar un nivel de riesgo.":""==e[9].value&&0!=e[10].value?"Usted ha marcado el nivel de riesgo asociado a la actividad Individual, debe digitar información en el campo Actividad Individual. O puede utilizar el icono (<span style='color:gray;' class='glyphicon glyphicon-erase'></span>) de limpiar riesgo.":""==e[11].value&&0!=e[12].value?"Usted ha marcado el nivel de riesgo asociado a la actividad Familiar, debe digitar información en el campo Actividad Familiar. O puede utilizar el icono (<span style='color:gray;' class='glyphicon glyphicon-erase'></span>) de limpiar riesgo.":""==e[13].value&&0!=e[14].value?"Usted ha marcado el nivel de riesgo asociado a la actividad Académico, debe digitar información en el campo Actividad Académico. O puede utilizar el icono (<span style='color:gray;' class='glyphicon glyphicon-erase'></span>) de limpiar riesgo.":""==e[15].value&&0!=e[16].value?"Usted ha marcado el nivel de riesgo asociado a la actividad Económico, debe digitar información en el campo Actividad Económico. O puede utilizar el icono (<span style='color:gray;' class='glyphicon glyphicon-erase'></span>) de limpiar riesgo.":""==e[17].value&&0!=e[18].value?"Usted ha marcado el nivel de riesgo asociado a la actividad Vida Universitaria, debe digitar información en el campo Actividad Vida Universitaria. O puede utilizar el icono (<span style='color:gray;' class='glyphicon glyphicon-erase'></span>) de limpiar riesgo.":"success"}function E(e){for(var a=[],t=document.location.search.substring(1),i=t.split("&"),o=0;o<i.length;o++){var r=i[o].split("=");a[r[0]]=r[1]}return a}function A(a){x();var t=new Date(e("#"+a+" .date_tracking_peer").text()),i=e("#"+a+" .place_tracking_peer").text(),o=e("#"+a+" .init_time_tracking_peer").text(),r=e("#"+a+" .ending_time_tracking_peer").text(),n=e("#"+a+" .topic_tracking_peer").text(),s=e("#"+a+" .objectives_tracking_peer").text(),l=e("#"+a+" .individual_tracking_peer").text(),c=e("#"+a+" .ind_risk_tracking_peer").text(),d=e("#"+a+" .familiar_tracking_peer").text(),u=e("#"+a+" .fam_risk_tracking_peer").text(),p=e("#"+a+" .academico_tracking_peer").text(),v=e("#"+a+" .aca_risk_tracking_peer").text(),m=e("#"+a+" .economico_tracking_peer").text(),f=e("#"+a+" .econ_risk_tracking_peer").text(),_=e("#"+a+" .lifeu_tracking_peer").text(),h=e("#"+a+" .lifeu_risk_tracking_peer").text(),g=e("#"+a+" .observations_tracking_peer").text(),y=new Object;y.bajo=1,y.medio=2,y.alto=3;var k=t.getFullYear(),w=t.getMonth()+1;k+=t.getMonth()<10?"-0"+w:"-"+w,k+=t.getDate()<10?"-0"+t.getDate():"-"+t.getDate();var b=o.substring(0,2),E=o.substring(3,5),A=r.substring(0,2),M=r.substring(3,5);e('#h_ini option[value="'+b+'"]').attr("selected",!0),e('#m_ini option[value="'+E+'"]').attr("selected",!0),e('#h_fin option[value="'+A+'"]').attr("selected",!0),e('#m_fin option[value="'+M+'"]').attr("selected",!0);var C=y[c.toLowerCase()],T=y[u.toLowerCase()],O=y[f.toLowerCase()],I=y[v.toLowerCase()],S=y[h.toLowerCase()];""!=c?e("input[name='riesgo_ind'][value='"+C+"']").prop("checked",!0):e("input[name='riesgo_ind'][value='0']").prop("checked",!0),""!=u?e("input[name='riesgo_familiar'][value='"+T+"']").prop("checked",!0):e("input[name='riesgo_familiar'][value='0']").prop("checked",!0),""!=f?e("input[name='riesgo_econom'][value='"+O+"']").prop("checked",!0):e("input[name='riesgo_econom'][value='0']").prop("checked",!0),""!=v?e("input[name='riesgo_aca'][value='"+I+"']").prop("checked",!0):e("input[name='riesgo_aca'][value='0']").prop("checked",!0),""!=h?e("input[name='riesgo_uni'][value='"+S+"']").prop("checked",!0):e("input[name='riesgo_uni'][value='0']").prop("checked",!0),e("#date").val(k),e("#place").val(i),e("#topic_textarea").val(n),e("#objetivos").val(s),e("#individual").val(l),e("#familiar").val(d),e("#academico").val(p),e("#economico").val(m),e("#vida_uni").val(_),e("#observaciones").val(g),e("#id_tracking_peer").val(a);var j=e("#modal_peer_tracking");j.show()}function M(a){e.ajax({type:"POST",data:{func:"delete_tracking_peer",id_tracking:a},url:"../managers/student_profile/studentprofile_serverproc.php",success:function(e){swal(e.title,e.msg,e.status);var a=E(document.location.search);a.tab?location.reload():location.href=location.search+"&tab=socioed_tab"},dataType:"json",cache:"false",error:function(e){swal(e.title,e.msg,e.status)}})}return{init:function(){var a=E(document.location.search),i=e(".panel-collapse.collapse.in");switch(a.tab){case"socioed_tab":e("#general_li").removeClass("active"),e("#socioed_li").addClass("active"),e("#general_tab").removeClass("active"),e("#socioed_tab").addClass("active"),i.removeClass("in"),e("#collapseOne").addClass("in");break;default:i.removeClass("in")}e("#search").on("click",function(){var a=e("#codigo").val();load_student(a)});var o=e("#modal_peer_tracking");n(),l(),m(),f(),g(),y(),k(),e("#save").click(function(){c()}),e("#cancel").click(function(){swal({title:"¿Estas seguro/a de cancelar?",text:"Los cambios realizados no serán tomados en cuenta y se perderán",type:"warning",showCancelButton:!0,confirmButtonColor:"#d51b23",confirmButtonText:"Si!",cancelButtonText:"No",closeOnConfirm:!0},function(e){e&&s()})}),e("#button_add_track").on("click",function(){e("#save_seg").removeClass("hide"),e("#div_created").addClass("hide"),e("#upd_seg").addClass("hide"),e("#myModalLabel").attr("name","PARES"),o.show(),x()}),e("#save_tracking_btn").on("click",function(){w()}),e("#clean_individual_risk").on("click",function(){e("#no_value_individual").prop("checked",!0)}),e("#clean_familiar_risk").on("click",function(){e("#no_value_familiar").prop("checked",!0)}),e("#clean_academic_risk").on("click",function(){e("#no_value_academic").prop("checked",!0)}),e("#clean_economic_risk").on("click",function(){e("#no_value_economic").prop("checked",!0)}),e("#clean_life_risk").on("click",function(){e("#no_value_life").prop("checked",!0)}),e(".btn-primary.edit_peer_tracking").on("click",function(){var a=e(this).attr("id"),t=a.substring(14);A(t)}),e(".btn-danger.delete_peer_tracking").on("click",function(){var a=e(this).attr("id"),t=a.substring(21);swal({title:"Advertencia",text:"¿Está seguro(a) que desea borrar este seguimiento?",type:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No",closeOnConfirm:!1},function(e){e&&M(t)})});var r={draw:function(e,a,i){var o={radius:5,w:600,h:600,factor:1,factorLegend:.85,levels:3,maxValue:0,radians:2*Math.PI,opacityArea:.5,ToRight:5,TranslateX:80,TranslateY:30,ExtraWidthX:100,ExtraWidthY:100,color:t.scale.category10()};if("undefined"!=typeof i)for(var r in i)"undefined"!=typeof i[r]&&(o[r]=i[r]);o.maxValue=Math.max(o.maxValue,t.max(a,function(e){return t.max(e.map(function(e){return e.value}))}));var n=a[0].map(function(e,a){return e.axis}),s=n.length,l=o.factor*Math.min(o.w/2,o.h/2),c=t.format("");t.select(e).select("svg").remove();for(var d,u=t.select(e).append("svg").attr("width",o.w+o.ExtraWidthX).attr("height",o.h+o.ExtraWidthY).append("g").attr("transform","translate("+o.TranslateX+","+o.TranslateY+")"),p=0;p<o.levels-1;p++){var v=o.factor*l*((p+1)/o.levels);u.selectAll(".levels").data(n).enter().append("svg:line").attr("x1",function(e,a){return v*(1-o.factor*Math.sin(a*o.radians/s))}).attr("y1",function(e,a){return v*(1-o.factor*Math.cos(a*o.radians/s))}).attr("x2",function(e,a){return v*(1-o.factor*Math.sin((a+1)*o.radians/s))}).attr("y2",function(e,a){return v*(1-o.factor*Math.cos((a+1)*o.radians/s))}).attr("class","line").style("stroke","grey").style("stroke-opacity","0.75").style("stroke-width","0.3px").attr("transform","translate("+(o.w/2-v)+", "+(o.h/2-v)+")")}for(var p=0;p<o.levels;p++){var v=o.factor*l*((p+1)/o.levels);u.selectAll(".levels").data([1]).enter().append("svg:text").attr("x",function(e){return v*(1-o.factor*Math.sin(0))}).attr("y",function(e){return v*(1-o.factor*Math.cos(0))}).attr("class","legend").style("font-family","sans-serif").style("font-size","10px").attr("transform","translate("+(o.w/2-v+o.ToRight)+", "+(o.h/2-v)+")").attr("fill","#737373").text(c((p+1)*o.maxValue/o.levels))}series=0;var m=u.selectAll(".axis").data(n).enter().append("g").attr("class","axis");m.append("line").attr("x1",o.w/2).attr("y1",o.h/2).attr("x2",function(e,a){return o.w/2*(1-o.factor*Math.sin(a*o.radians/s))}).attr("y2",function(e,a){return o.h/2*(1-o.factor*Math.cos(a*o.radians/s))}).attr("class","line").style("stroke","grey").style("stroke-width","1px"),m.append("text").attr("class","legend").text(function(e){return e}).style("font-family","sans-serif").style("font-size","11px").attr("text-anchor","middle").attr("dy","1.5em").attr("transform",function(e,a){return"translate(0, -10)"}).attr("x",function(e,a){return o.w/2*(1-o.factorLegend*Math.sin(a*o.radians/s))-60*Math.sin(a*o.radians/s)}).attr("y",function(e,a){return o.h/2*(1-Math.cos(a*o.radians/s))-20*Math.cos(a*o.radians/s)}),a.forEach(function(e,a){dataValues=[],u.selectAll(".nodes").data(e,function(e,a){dataValues.push([o.w/2*(1-parseFloat(Math.max(e.value,0))/o.maxValue*o.factor*Math.sin(a*o.radians/s)),o.h/2*(1-parseFloat(Math.max(e.value,0))/o.maxValue*o.factor*Math.cos(a*o.radians/s))])}),dataValues.push(dataValues[0]),u.selectAll(".area").data([dataValues]).enter().append("polygon").attr("class","radar-chart-serie"+series).style("stroke-width","2px").style("stroke",o.color(series)).attr("points",function(e){for(var a="",t=0;t<e.length;t++)a=a+e[t][0]+","+e[t][1]+" ";return a}).style("fill",function(e,a){return o.color(series)}).style("fill-opacity",o.opacityArea).on("mouseover",function(e){z="polygon."+t.select(this).attr("class"),u.selectAll("polygon").transition(200).style("fill-opacity",.1),u.selectAll(z).transition(200).style("fill-opacity",.7)}).on("mouseout",function(){u.selectAll("polygon").transition(200).style("fill-opacity",o.opacityArea)}),series++}),series=0,a.forEach(function(e,a){u.selectAll(".nodes").data(e).enter().append("svg:circle").attr("class","radar-chart-serie"+series).attr("r",o.radius).attr("alt",function(e){return Math.max(e.value,0)}).attr("cx",function(e,a){return dataValues.push([o.w/2*(1-parseFloat(Math.max(e.value,0))/o.maxValue*o.factor*Math.sin(a*o.radians/s)),o.h/2*(1-parseFloat(Math.max(e.value,0))/o.maxValue*o.factor*Math.cos(a*o.radians/s))]),o.w/2*(1-Math.max(e.value,0)/o.maxValue*o.factor*Math.sin(a*o.radians/s))}).attr("cy",function(e,a){return o.h/2*(1-Math.max(e.value,0)/o.maxValue*o.factor*Math.cos(a*o.radians/s))}).attr("data-id",function(e){return e.axis}).style("fill",o.color(series)).style("fill-opacity",.9).on("mouseover",function(e){newX=parseFloat(t.select(this).attr("cx"))-10,newY=parseFloat(t.select(this).attr("cy"))-5,d.attr("x",newX).attr("y",newY).text(c(e.value)).transition(200).style("opacity",1),z="polygon."+t.select(this).attr("class"),u.selectAll("polygon").transition(200).style("fill-opacity",.1),u.selectAll(z).transition(200).style("fill-opacity",.7)}).on("mouseout",function(){d.transition(200).style("opacity",0),u.selectAll("polygon").transition(200).style("fill-opacity",o.opacityArea)}).append("svg:title").text(function(e){return Math.max(e.value,0)}),series++}),d=u.append("text").style("opacity",0).style("font-family","sans-serif").style("font-size","13px")}};e("#view_graphic_button").on("click",function(){var a=new Object;a.div_no_risk=0,a.div_high_risk=1,a.div_medium_risk=2,a.div_low_risk=3;var i=document.getElementById("individual_risk").className.split(/\s+/),o=document.getElementById("familiar_risk").className.split(/\s+/),n=document.getElementById("academic_risk").className.split(/\s+/),s=document.getElementById("economic_risk").className.split(/\s+/),l=document.getElementById("life_risk").className.split(/\s+/),c=document.getElementById("geo_risk").className.split(/\s+/),d=a[i[0]],u=a[o[0]],p=a[s[0]],v=a[n[0]],m=(a[l[0]],a[c[0]]),f=500,_=500,h=(t.scale.category10(),[[{axis:"Individual",value:d},{axis:"Económico",value:p},{axis:"Familiar",value:u},{axis:"Vida Universitaria",value:1},{axis:"Académico",value:v},{axis:"Geográfico",value:m}]]),g={w:f,h:_,maxValue:3,levels:3,ExtraWidthX:300};r.draw("#modal_risk_body",h,g);t.select("#body").selectAll("svg").append("svg").attr("width",f+300).attr("height",_);e("#modal_risk_graph").show()})}}});