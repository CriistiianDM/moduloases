define(["jquery","block_ases/bootstrap","block_ases/jquery.dataTables","block_ases/sweetalert","block_ases/dphpforms_form_renderer"],function(t,a,e,s,n){return{init:function(){var a=this.get_id_instance(),e=this.generate_attendance_table();t("#modal_v2_groupal_tracking").find("form").find("h1").after(e);this.load_attendance_list(void 0,void 0,a),this.load_students_of_monitor(a)},load_students_of_monitor:function(a){var e=new Array;e.push({name:"function",value:"load_grupal"}),e.push({name:"idinstancia",value:a}),t.ajax({type:"POST",data:e,url:"../managers/user_management/usermanagement_report.php",success:function(a){if(t("#mytable tbody").html(""),0!=a.rows){var e=a.content;for(x in e)t("#mytable tbody").append("<tr> <td>"+e[x].username+"</td> <td>"+e[x].firstname+"</td> <td>"+e[x].lastname+'</td>  <td class="hide">'+e[x].idtalentos+"</td> </tr>")}else t("#list_grupal_seg").append("<a>No registra ningún estudiante a su cargo.Por favor dirigete a la oficina de Sistemas de talentos pilos para gestionar su situación</a>")},dataType:"json",cache:"false",error:function(t){alert("Error al cargar lista de estudiantes asignados del monitor")}})},generate_attendance_table:function(){return'<div class="mymodal-body mymodal-body_v2 col-sm-12">','<div class="row">','<div class= "form-group">','<div data-spy="scroll" data-target=".navbar" data-offset="50" class="well col-md-12" id="list_grupal_seg_consult" name="list_grupal_seg_consult">','<table id="list_students_attendance" class="table table-striped">',"<thead>","<tr>","<th>Código</th><th>Nombre</th><th>Apellido</th><th>Presente</th>","</tr>","</thead>",'<tbody id="mytbody"></tbody></table>',"</div></div></div></div>",'<div class="mymodal-body mymodal-body_v2 col-sm-12"><div class="row"><div class= "form-group"><div data-spy="scroll" data-target=".navbar" data-offset="50" class="well col-md-12" id="list_grupal_seg_consult" name="list_grupal_seg_consult"><table id="list_students_attendance" class="table table-striped"><thead><tr><th>Código</th><th>Nombre</th><th>Apellido</th><th>Presente</th></tr></thead><tbody id="mytbody"></tbody></table></div></div></div></div>'},get_id_instance:function(){var t=location.search.split("&");for(var a in t){if(t[a].indexOf("instanceid")>=0)return t[a].split("=")[1]}return 0},load_attendance_list:function(a,e,s){void 0===a&&(a=null),void 0===e&&(e=null);var n=new Array;n.push({name:"function",value:"load_grupal"}),n.push({name:"idinstancia",value:s}),t.ajax({type:"POST",data:n,url:"../managers/user_management/usermanagement_report.php",success:function(e){if(t("#list_students_attendance tbody").html(""),0!=e.rows){var s=e.content;if(a)for(x in s)-1!=a.indexOf(x)?t("#modal_v2_groupal_tracking #list_students_attendance tbody").append(" <tr> <td>"+s[x].username+"</td> <td>"+s[x].firstname+"</td> <td>"+s[x].lastname+'</td>  <td><input type="checkbox" checked="checked" id="asistencia" name="asistencia"  value="'+s[x].idtalentos+'"/></td>  </tr>'):t("#modal_v2_groupal_tracking #list_students_attendance tbody").append("<tr> <td>"+s[x].username+"</td> <td>"+s[x].firstname+"</td> <td>"+s[x].lastname+'</td>  <td><input type="checkbox" id="asistencia" name="asistencia" value="'+s[x].idtalentos+'"/></td>  </tr>');else for(x in s)t("#modal_v2_groupal_tracking #list_students_attendance tbody").append("<tr> <td>"+s[x].username+"</td> <td>"+s[x].firstname+"</td> <td>"+s[x].lastname+'</td>  <td><input type="checkbox" id="asistencia" name="asistencia" value="'+s[x].idtalentos+'"/></td>  </tr>')}else t("#modal_v2_groupal_tracking #list_students_attendance").append("<a>No registra ningun estudiante a su cargo.Por favor dirigete a la oficina de Sistemas de talentos pilos para gestionar tu situación</a>")},dataType:"json",cache:"false",error:function(t){alert("error al cargar listado de asistencia")}})}}});