define(["jquery","block_ases/bootstrap","block_ases/datatables","block_ases/sweetalert","block_ases/dphpforms_form_renderer"],function(t,a,e,n,s){return{init:function(){var a=this,e=a.get_id_instance(),n=a.generate_attendance_table();t("#modal_v2_groupal_tracking").find("form").find("h1").after(n),t("#modal_v2_edit_groupal_tracking").find("form").find("h1").after(n);a.load_attendance_list(void 0,void 0,e),a.load_students_of_monitor(e)},load_students_of_monitor:function(a){var e=new Array;e.push({name:"function",value:"load_grupal"}),e.push({name:"idinstancia",value:a}),t.ajax({type:"POST",data:e,url:"../managers/user_management/usermanagement_report.php",success:function(a){if(t("#mytable tbody").html(""),0!=a.rows){var e=a.content;for(x in e)t("#mytable tbody").append("<tr> <td>"+e[x].username+"</td> <td>"+e[x].firstname+"</td> <td>"+e[x].lastname+'</td>  <td class="hide">'+e[x].idtalentos+"</td> </tr>")}else t("#list_grupal_seg").append("<a>No registra ningún estudiante a su cargo.Por favor dirigete a la oficina de Sistemas de talentos pilos para gestionar su situación</a>")},dataType:"json",cache:"false",error:function(t){alert("Error al cargar lista de estudiantes asignados del monitor")}})},generate_attendance_table:function(){var t="";return t+='<div class="mymodal-body mymodal-body_v2 col-sm-12">',t+='<div class="row">',t+='<div class= "form-group">',t+='<div data-spy="scroll" data-target=".navbar" data-offset="50" class="well col-md-12" id="list_grupal_seg_consult" name="list_grupal_seg_consult">',t+='<table id="list_students_attendance" class="table table-striped">',t+="<thead>",t+="<tr>",t+="<th>Código</th><th>Nombre</th><th>Apellido</th><th>Presente</th>",t+="</tr>",t+="</thead>",t+='<tbody id="mytbody"></tbody></table>',t+="</div></div></div></div>"},get_id_instance:function(){var t=location.search.split("&");for(var a in t){if(t[a].indexOf("instanceid")>=0)return t[a].split("=")[1]}return 0},load_attendance_list:function(a,e,n){void 0===a&&(a=null),void 0===e&&(e=null);var s=new Array;s.push({name:"function",value:"load_grupal"}),s.push({name:"idinstancia",value:n}),t.ajax({type:"POST",data:s,url:"../managers/user_management/usermanagement_report.php",success:function(e){if(t("#list_students_attendance tbody").html(""),0!=e.rows){var n=e.content;if(a)for(x in n)-1!=a.indexOf(x)?t("#modal_v2_groupal_tracking #list_students_attendance tbody").append(" <tr> <td>"+n[x].username+"</td> <td>"+n[x].firstname+"</td> <td>"+n[x].lastname+'</td>  <td><input type="checkbox" checked="checked" id="asistencia" name="asistencia"  value="'+n[x].idtalentos+'"/></td>  </tr>'):t("#modal_v2_groupal_tracking #list_students_attendance tbody").append("<tr> <td>"+n[x].username+"</td> <td>"+n[x].firstname+"</td> <td>"+n[x].lastname+'</td>  <td><input type="checkbox" id="asistencia" name="asistencia" value="'+n[x].idtalentos+'"/></td>  </tr>');else for(x in n)t("#modal_v2_groupal_tracking #list_students_attendance tbody").append("<tr> <td>"+n[x].username+"</td> <td>"+n[x].firstname+"</td> <td>"+n[x].lastname+'</td>  <td><input type="checkbox" id="asistencia" name="asistencia" value="'+n[x].idtalentos+'"/></td>  </tr>')}else t("#modal_v2_groupal_tracking #list_students_attendance").append("<a>No registra ningun estudiante a su cargo.Por favor dirigete a la oficina de Sistemas de talentos pilos para gestionar tu situación</a>")},dataType:"json",cache:"false",error:function(t){alert("error al cargar listado de asistencia")}})}}});