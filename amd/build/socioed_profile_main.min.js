define(["jquery","block_ases/loading_indicator","block_ases/mustache"],function(a,i,e){return{init:function(){const r=function(a){for(var i=[],e=document.location.search.substring(1).split("&"),r=0;r<e.length;r++){var n=e[r].split("=");i[n[0]]=n[1]}return i}(document.location.search);var n=a("#dphpforms_ases_student_code").attr("data-info");a("#button_add_v2_track").on("click",function(){var i=a("#current_user_id").val(),e=a("#dphpforms_block_instance").attr("data-info");a("div").removeClass("regla_incumplida"),a("#modal_v2_peer_tracking").fadeIn(300),a(".id_estudiante").find("input").val(n),a(".id_creado_por").find("input").val(i),a(".id_instancia").find("input").val(e),a(".id_monitor").find("input").val(a("#dphpforms_monitor_id").data("info")),a(".id_practicante").find("input").val(a("#dphpforms_practicing_id").data("info")),a(".id_profesional").find("input").val(a("#dphpforms_professional_id").data("info")),a(".username").find("input").val(a("#dphpforms_username").data("info"));["relacion_pareja","composicion_familiar","influencia","aspec_academicos","estra_academicas","inter_autoe_ocupacional","carac_socioeconomicas","icetex","oferta_servicios","induccion","vida_universitaria","retor_ciuda_origen"].forEach(i=>{a(`input[value=${i}]`).parent().css("display","none")})}),a("#button_carga_Hisotricos").on("click",function(){var r=a("#id_ases").val(),n=document.querySelector("#dphpforms_block_instance").dataset.info;a.ajax({type:"POST",data:JSON.stringify({function:"cargar_historicos",params:[r,n]}),url:"../managers/student_profile/studentprofile_api.php",success:function(r){0==r.status_code?a.ajax({url:"../templates/socioed_historic.mustache",data:null,dataType:"text",async:!1,success:function(n){i.hide();let o=a(e.render(n,r.data_response));a("#socioed_historic").append(o)},error:function(a){i.hide(),console.log(a)}}):(i.hide(),console.log(r))},dataType:"json",cache:"false",error:function(a){i.hide(),console.log(a)}})}),a("#button_primer_acercamiento").on("click",function(){var i=a("#current_user_id").val();a("div").removeClass("regla_incumplida"),a("#modal_primer_acercamiento").fadeIn(300),a(".primer_acerca_id_estudiante_field").find("input").val(n),a(".primer_acerca_id_creado_por_field").find("input").val(i)}),a("#button_actualizar_primer_acercamiento").click(function(){a("div").removeClass("regla_incumplida"),a.get("../managers/dphpforms/dphpforms_forms_core.php?form_id=primer_acercamiento&instance_id="+r.instanceid+"&record_id="+a(this).attr("data-record-id"),function(i){a("#primer_acercamiento_form").html(""),a("#primer_acercamiento_form").append(i),a("#modal_primer_acercamiento").fadeIn(300);var e=a("#modal_primer_acercamiento").find(".pa_id_creado_por").find("input").val();a.get("../managers/user_management/api_user.php?function=get_user_information&arg="+e,function(i){var e=i.firstname+" "+i.lastname;a("#modal_primer_acercamiento").find("h1").after('<hr style="border-color:#444;"><h3>Registrado por: <strong>'+e+"</strong></h3>");var r=a(".dphpforms-record .btn-dphpforms-univalle").length;2==r?a(".dphpforms-record .btn-dphpforms-univalle:eq(0)").css({"margin-left":a(".dphpforms-updater").width()/2-72+"px"}):3==r&&a(".dphpforms-record .btn-dphpforms-univalle:eq(0)").css({"margin-left":a(".dphpforms-updater").width()/2-72-30+"px"})})})})}}});