define(["jquery","block_ases/loading_indicator","block_ases/mustache"],function(a,i,r){return{init:function(){const e=function(a){for(var i=[],r=document.location.search.substring(1).split("&"),e=0;e<r.length;e++){var n=r[e].split("=");i[n[0]]=n[1]}return i}(document.location.search);var n=a("#dphpforms_ases_student_code").attr("data-info");a("#button_add_v2_track").on("click",function(){var i=a("#current_user_id").val(),r=a("#dphpforms_block_instance").attr("data-info");a("div").removeClass("regla_incumplida"),a("#modal_v2_peer_tracking").fadeIn(300),a(".id_estudiante").find("input").val(n),a(".id_creado_por").find("input").val(i),a(".id_instancia").find("input").val(r),a(".id_monitor").find("input").val(a("#dphpforms_monitor_id").data("info")),a(".id_practicante").find("input").val(a("#dphpforms_practicing_id").data("info")),a(".id_profesional").find("input").val(a("#dphpforms_professional_id").data("info")),a(".username").find("input").val(a("#dphpforms_username").data("info"));["relacion_pareja","composicion_familiar","influencia","aspec_academicos","estra_academicas","inter_autoe_ocupacional","carac_socioeconomicas","icetex","oferta_servicios","induccion","vida_universitaria","retor_ciuda_origen"].forEach(i=>{a(`input[value=${i}]`).parent().css("display","none")})}),a("#button_carga_Hisotricos").on("click",function(){i.show();var e=a("#id_ases").val(),n=document.querySelector("#dphpforms_block_instance").dataset.info;a.ajax({type:"POST",data:JSON.stringify({function:"cargar_historicos",params:[e,n]}),url:"../managers/student_profile/studentprofile_api.php",success:function(i){0==i.status_code?a.ajax({url:"../templates/socioed_historic.mustache",data:null,dataType:"text",async:!1,success:function(e){let n=a(r.render(e,i.data_response));a("#socioed_historic").append(n)},error:function(a){console.log(a)}}):console.log(i)},dataType:"json",cache:"false",error:function(a){console.log(a)}}),i.hide(),a("#button_carga_Hisotricos").prop("disabled",!0)}),a("#button_primer_acercamiento").on("click",function(){var i=a("#current_user_id").val();a("div").removeClass("regla_incumplida"),a("#modal_primer_acercamiento").fadeIn(300),a(".primer_acerca_id_estudiante_field").find("input").val(n),a(".primer_acerca_id_creado_por_field").find("input").val(i)}),a("#button_actualizar_primer_acercamiento").click(function(){a("div").removeClass("regla_incumplida"),a.get("../managers/dphpforms/dphpforms_forms_core.php?form_id=primer_acercamiento&instance_id="+e.instanceid+"&record_id="+a(this).attr("data-record-id"),function(i){a("#primer_acercamiento_form").html(""),a("#primer_acercamiento_form").append(i),a("#modal_primer_acercamiento").fadeIn(300);var r=a("#modal_primer_acercamiento").find(".pa_id_creado_por").find("input").val();a.get("../managers/user_management/api_user.php?function=get_user_information&arg="+r,function(i){var r=i.firstname+" "+i.lastname;a("#modal_primer_acercamiento").find("h1").after('<hr style="border-color:#444;"><h3>Registrado por: <strong>'+r+"</strong></h3>");var e=a(".dphpforms-record .btn-dphpforms-univalle").length;2==e?a(".dphpforms-record .btn-dphpforms-univalle:eq(0)").css({"margin-left":a(".dphpforms-updater").width()/2-72+"px"}):3==e&&a(".dphpforms-record .btn-dphpforms-univalle:eq(0)").css({"margin-left":a(".dphpforms-updater").width()/2-72-30+"px"})})})})}}});