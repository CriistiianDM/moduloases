{"version":3,"sources":["../src/men_report_main.js"],"names":["define","$","bootstrap","datatables","sweetalert","select2","loading_indicator","cfg","csv","get_report_string","semester_name","ajax","type","data","JSON","stringify","semestre","function","url","get_semester_name","val","download_report_csv","then","report_csv_string","csv_string_to_file_for_download","catch","err","console","log","init","click"],"mappings":"AAOAA,OAAM,8BACF,CAAC,QAAD,CACA,sBADA,CAEA,8BAFA,CAGA,uBAHA,CAIA,oBAJA,CAKA,8BALA,CAMA,aANA,CAOA,gBAPA,CADE,CASH,SAASC,CAAT,CAAWC,CAAX,CAAsBC,CAAtB,CAAkCC,CAAlC,CAA8CC,CAA9C,CAAuDC,CAAvD,CAA0EC,CAA1E,CAA+EC,CAA/E,CAAoF,IAW3EC,CAAAA,CAAiB,CAAG,SAAUC,CAAV,CAAyB,CAC7C,MAAQT,CAAAA,CAAC,CAACU,IAAF,CAAO,CACXC,IAAI,CAAE,MADK,CAEXC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAACC,QAAQ,CAAEN,CAAX,CAA0BO,QAAQ,CAAE,uBAApC,CAAf,CAFK,CAGXC,GAAG,CAAE,6DAHM,CAAP,CAKX,CAjB8E,CAkB3EC,CAAiB,CAAG,UAAY,CAChC,MAAOlB,CAAAA,CAAC,oBAAD,CAA4BmB,GAA5B,EACV,CApB8E,CAqB3EC,CAAmB,CAAG,UAAW,CACjCZ,CAAiB,CAACU,CAAiB,EAAlB,CAAjB,CACKG,IADL,CAEQ,SAAAC,CAAiB,CAAI,CACjBf,CAAG,CAACgB,+BAAJ,CAAoCD,CAApC,CAvBD,gBAuBC,CACH,CAJT,EAMKE,KANL,CAMW,SAAAC,CAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ,CAAJ,CANd,CAOH,CA7B8E,CA8BnF,MAAO,CACHG,IAAI,CAAE,eAAY,CACd5B,CAAC,CAAC,oBAAD,CAAD,CAAwB6B,KAAxB,CAA8BT,CAA9B,CACH,CAHE,CAKV,CA5CK,CAAN","sourcesContent":[" /**\r\n * Management - Report (Reporte Ministerio de Educación)\r\n * @module amd/src/men_report_main \r\n * @author Juan Pablo Moreno Muñoz <isabella.serna@correounivalle.edu.co>\r\n * @license  http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\ndefine(\r\n    ['jquery',\r\n    'block_ases/bootstrap', \r\n    'block_ases/jquery.dataTables',  \r\n    'block_ases/sweetalert', \r\n    'block_ases/select2',\r\n    'block_ases/loading_indicator',\r\n    'core/config',\r\n    'block_ases/csv'\r\n], function($,bootstrap, datatables, sweetalert, select2, loading_indicator, cfg, csv) {\r\n        var SEMESTER_SELECT_SELECTOR = '#semester-select';\r\n        var CSV_NAME = 'report_men.csv';\r\n        /**\r\n         * Return the Men Report in csv string described by the class `MenReport` at men_report_lib\r\n         * @see MenReport\r\n         * @see men_report_lib\r\n         * @see men_report_api\r\n         * @param semester_name Nombre de el semestre, ejemplos: ['2018A', '2019B']\r\n         * @returns Promise<string>\r\n         */\r\n        var get_report_string = function (semester_name) {\r\n            return  $.ajax({\r\n                type: \"POST\",\r\n                data: JSON.stringify({semestre: semester_name, function: \"create_men_report_csv\"}),\r\n                url: \"../../../blocks/ases/managers/men_report/men_report_api.php\",\r\n            });\r\n        };\r\n        var get_semester_name = function () {\r\n            return $(SEMESTER_SELECT_SELECTOR).val();\r\n        };\r\n        var download_report_csv = function() {\r\n            get_report_string(get_semester_name())\r\n                .then(\r\n                    report_csv_string => {\r\n                        csv.csv_string_to_file_for_download(report_csv_string, CSV_NAME)\r\n                    }\r\n                )\r\n                .catch(err => console.log(err));\r\n        };\r\n    return {\r\n        init: function () {\r\n            $(\"#report-men-button\").click(download_report_csv);\r\n        }\r\n    };    \r\n});"],"file":"men_report_main.min.js"}