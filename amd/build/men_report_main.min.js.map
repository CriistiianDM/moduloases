{"version":3,"sources":["../src/men_report_main.js"],"names":["define","$","bootstrap","datatables","sweetalert","select2","loading_indicator","cfg","csv","get_report_string","semester_name","ajax","type","data","JSON","stringify","semestre","function","url","get_semester_name","val","download_report_csv","then","report_csv_string","csv_string_to_file_for_download","catch","err","console","log","init","click"],"mappings":"AAOAA,OAAM,8BACF,CAAC,QAAD,CACA,sBADA,CAEA,8BAFA,CAGA,uBAHA,CAIA,oBAJA,CAKA,8BALA,CAMA,aANA,CAOA,gBAPA,CADE,CASH,SAASC,CAAT,CAAWC,CAAX,CAAsBC,CAAtB,CAAkCC,CAAlC,CAA8CC,CAA9C,CAAuDC,CAAvD,CAA0EC,CAA1E,CAA+EC,CAA/E,CAAoF,IAW3EC,CAAAA,CAAiB,CAAG,SAAUC,CAAV,CAAyB,CAC7C,MAAQT,CAAAA,CAAC,CAACU,IAAF,CAAO,CACXC,IAAI,CAAE,MADK,CAEXC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAACC,QAAQ,CAAEN,CAAX,CAA0BO,QAAQ,CAAE,uBAApC,CAAf,CAFK,CAGXC,GAAG,CAAE,6DAHM,CAAP,CAKX,CAjB8E,CAkB3EC,CAAiB,CAAG,UAAY,CAChC,MAAOlB,CAAAA,CAAC,oBAAD,CAA4BmB,GAA5B,EACV,CApB8E,CAqB3EC,CAAmB,CAAG,UAAW,CACjCZ,CAAiB,CAACU,CAAiB,EAAlB,CAAjB,CACKG,IADL,CAEQ,SAAAC,CAAiB,CAAI,CACjBf,CAAG,CAACgB,+BAAJ,CAAoCD,CAApC,CAvBD,gBAuBC,CACH,CAJT,EAMKE,KANL,CAMW,SAAAC,CAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ,CAAJ,CANd,CAOH,CA7B8E,CA8BnF,MAAO,CACHG,IAAI,CAAE,eAAY,CACd5B,CAAC,CAAC,oBAAD,CAAD,CAAwB6B,KAAxB,CAA8BT,CAA9B,CACH,CAHE,CAKV,CA5CK,CAAN","sourcesContent":[" /**\n * Management - Report (Reporte Ministerio de Educación)\n * @module amd/src/men_report_main \n * @author Juan Pablo Moreno Muñoz <isabella.serna@correounivalle.edu.co>\n * @license  http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(\n    ['jquery',\n    'block_ases/bootstrap', \n    'block_ases/jquery.dataTables',  \n    'block_ases/sweetalert', \n    'block_ases/select2',\n    'block_ases/loading_indicator',\n    'core/config',\n    'block_ases/csv'\n], function($,bootstrap, datatables, sweetalert, select2, loading_indicator, cfg, csv) {\n        var SEMESTER_SELECT_SELECTOR = '#semester-select';\n        var CSV_NAME = 'report_men.csv';\n        /**\n         * Return the Men Report in csv string described by the class `MenReport` at men_report_lib\n         * @see MenReport\n         * @see men_report_lib\n         * @see men_report_api\n         * @param semester_name Nombre de el semestre, ejemplos: ['2018A', '2019B']\n         * @returns Promise<string>\n         */\n        var get_report_string = function (semester_name) {\n            return  $.ajax({\n                type: \"POST\",\n                data: JSON.stringify({semestre: semester_name, function: \"create_men_report_csv\"}),\n                url: \"../../../blocks/ases/managers/men_report/men_report_api.php\",\n            });\n        };\n        var get_semester_name = function () {\n            return $(SEMESTER_SELECT_SELECTOR).val();\n        };\n        var download_report_csv = function() {\n            get_report_string(get_semester_name())\n                .then(\n                    report_csv_string => {\n                        csv.csv_string_to_file_for_download(report_csv_string, CSV_NAME)\n                    }\n                )\n                .catch(err => console.log(err));\n        };\n    return {\n        init: function () {\n            $(\"#report-men-button\").click(download_report_csv);\n        }\n    };    \n});"],"file":"men_report_main.min.js"}