'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a};define(['jquery','block_ases/jszip','block_ases/jquery.dataTables','block_ases/dataTables.autoFill','block_ases/dataTables.buttons','block_ases/buttons.html5','block_ases/buttons.flash','block_ases/buttons.print','block_ases/bootstrap','block_ases/sweetalert','block_ases/jqueryui','block_ases/select2','block_ases/loading_indicator'],function(a,b,c,d,f,g,h,j,k,l,m,n,o){return{init:function init(){function p(w,x){o.show(),a.ajax({type:'POST',data:{loadF:'get_like',cadena:w,atributo:x},url:'../managers/dphpforms/dphpforms_dwarehouse_api.php',success:function success(y){if(o.hide(),0===y.length)swal('ATTRIBUTE NOT FOUND','Oooops! Zero results','warning');else{a('#div_table_forms').empty(),a('#div_table_forms').append('<table id="tableBackupForms" class="display" cellspacing="0" width="100%"><thead><thead></table>');a('#tableBackupForms').DataTable(y);a('#div_table_forms').css('cursor','pointer')}},cache:!1,async:!0,failure:function failure(){o.hide(),alert('No encontrado')}})}function q(w,x){var y=[];y.push(w),y.push(x),o.show(),a.ajax({type:'POST',data:{loadF:'get_id_user',params:y},url:'../managers/dphpforms/dphpforms_dwarehouse_api.php',success:function success(z){o.hide(),0===z.length?swal('USER NOT FOUND','Oooops! Incorrect code','warning'):(a('#div_code_user').empty(),a('#div_code_user').append('<strong>Usuario: </strong>'+z[0].cod_user),a('#div_name_user').empty(),a('#div_name_user').append('<strong>Nombre: </strong>'+z[0].name_user))},cache:!1,async:!0,failure:function failure(){o.hide(),alert('No encontrado')}})}function r(w){o.show(),a.ajax({type:'POST',data:{loadF:'get_values',params:w},url:'../managers/dphpforms/dphpforms_dwarehouse_api.php',success:function success(x){if(o.hide(),0===x.length)swal('QUESTION NOT FOUND','Oooops! Incorrect code','warning');else{opciones=x[0].options_c,tipo_campo=x[0].tipo_campo;var y='"respuesta":"MODIFIQUE ESTE VALOR","opciones":"'+opciones+'","tipo_campo":"'+tipo_campo+'","id_pregunta":"'+a('#typekey_select').val()+'"';a('#filtroLike').val(y)}},cache:!1,async:!0,failure:function failure(){o.hide(),alert('No encontrado')}})}function t(w,x){o.show(),a.ajax({type:'POST',data:{loadF:w,params:x},url:'../managers/dphpforms/dphpforms_dwarehouse_api.php',dataType:'json',cache:!1,async:!0,success:function success(y){if(o.hide(),''!=y[x].datos_previos){var z=JSON.parse(y[x].datos_previos);if('get_form'==w&&(y[x].datos_previos=z),'get_form_general_logs'==w)if(Array.isArray(z))y[x].datos_previos=z;else{var A=[];for(data in z){var B={};B[data]=JSON.parse(z[data]),A.push(B)}y[x].datos_previos=A}}''!=y[x].datos_enviados&&(y[x].datos_enviados=JSON.parse(y[x].datos_enviados)),''!=y[x].datos_almacenados&&(y[x].datos_almacenados=JSON.parse(y[x].datos_almacenados)),u(y)},failure:function failure(){o.hide()}})}function u(w){a('#div_JSONform').empty();var x=JSON.stringify(w);a('#div_JSONform').append(x),a('#div_JSONform').beautifyJSON({type:'flexible',hoverable:!0,collapsible:!0,color:!0}),a('#modal_JSON').fadeIn(300)}window.JSZip=b,a(document).on('mousedown','.slider.round',function(){var x=a(this).data('status');'off'==x?(a(this).data('status','on'),a('#busqueda-simplificada').hide(),a('#busqueda-avanzada').show()):(a(this).data('status','off'),a('#busqueda-avanzada').hide(),a('#busqueda-simplificada').show())}),a(document).on('click','#generarFiltroSimplificado',function(){var w=a('#simple_cod_user').val(),x=a('#simple_criteria_select option:selected').val();o.show(),a.ajax({type:'POST',data:{loadF:'get_records_simple',username:w,is_student:x},url:'../managers/dphpforms/dphpforms_dwarehouse_api.php',cache:!1,async:!0,success:function success(y){if(o.hide(),0===y.length)swal('ATTRIBUTE NOT FOUND','Oooops! Zero results','warning');else{a('#div_table_forms').empty(),a('#div_table_forms').append('<table id="tableBackupForms" class="display" cellspacing="0" width="100%"><thead><thead></table>');a('#tableBackupForms').DataTable(y);a('#div_table_forms').css('cursor','pointer')}},failure:function failure(){o.hide(),alert('No encontrado')}})}),a(document).ready(function(){o.show(),a.ajax({type:'POST',data:{loadF:'loadForms'},url:'../managers/dphpforms/dphpforms_dwarehouse_api.php',success:function success(w){o.hide(),a('#div_table_forms').empty(),a('#div_table_forms').append('<table id="tableBackupForms" class="display" cellspacing="0" width="100%"><thead><thead></table>');a('#tableBackupForms').DataTable(w);a('#div_table_forms').css('cursor','pointer')},dataType:'json',cache:!1,async:!0,failure:function failure(){o.hide()}}),a.ajax({type:'POST',data:{loadF:'loadGeneralLogs'},url:'../managers/dphpforms/dphpforms_dwarehouse_api.php',success:function success(w){a('#div_table_general_logs').empty(),a('#div_table_general_logs').append('<table id="tableBackupGeneralLogs" class="display" cellspacing="0" width="100%"><thead><thead></table>');a('#tableBackupGeneralLogs').DataTable(w);a('#div_table_general_logs').css('cursor','pointer')},dataType:'json',cache:!1,async:!0,failure:function failure(){}})}),a(document).on('click','#tableBackupForms tbody tr td',function(){var w='';w=a(this).parents('tr').find('td:first').html(),t('get_form',w)}),a(document).on('click','#tableBackupGeneralLogs tbody tr td',function(){var w='';w=a(this).parents('tr').find('td:first').html(),t('get_form_general_logs',w)}),a('#generarFiltro').on('click',function(){var w=document.getElementById('filtroCodigoUsuario').value,x=document.getElementById('selectTable').value;q(w,x)}),a('#load_like').on('click',function(){var w=document.getElementById('typecolumn_select').value,x=document.getElementById('filtroLike').value;p(x,w)}),a('#typecolumn_select').on('click',function(){'datos_previos'==a('#typecolumn_select').val()||'datos_enviados'==a('#typecolumn_select').val()||'datos_almacenados'==a('#typecolumn_select').val()?a('#typekey_select').parent().parent().show():a('#typekey_select').parent().parent().hide()}),a('#typekey_select').on('click',function(){if('datos_enviados'==a('#typecolumn_select').val()){var w='"id":"'+a(this).val()+'","valor":"MODIFIQUE ESTE VALOR"';a('#filtroLike').val(w)}('datos_previos'==a('#typecolumn_select').val()||'datos_almacenados'==a('#typecolumn_select').val())&&r(a(this).val())}),a('.outside').click(function(){var w=a(this);swal({title:'Confirmaci\xF3n de salida',text:'',type:'warning',showCancelButton:!0,confirmButtonText:'Salir'},function(x){x&&(a(w).parent('.mymodal').fadeOut(300),console.log(a(this).parent('.mymodal')))})}),function(w){w.fn.beautifyJSON=function(x){var z=jQuery.extend({},{type:'strict',hoverable:!0,collapsible:!0,color:!0},x);this.each(function(){if('plain'==z.type){var L=function(Q){var R=Q.pop();return Q.push(R),R},A='&ensp;&ensp;&ensp;',B=[],C='',D=this.innerHTML,E=D.split('"').map(function(Q,R){return R%2?Q:Q.replace(/\s/g,'')}).join('"'),F='';for(i=0;i<D.length;i++)if('{'==D.charAt(i))B.push(D.charAt(i)),F+=D.charAt(i)+'<br>',C+=A,F+=C;else if('"'==D.charAt(i)&&'"'!=L(B))F+=D.charAt(i),B.push(D.charAt(i));else if('['==D.charAt(i)&&']'==D.charAt(i+1))B.push(D.charAt(i)),F+=D.charAt(i),C+=A;else if('['==D.charAt(i))B.push(D.charAt(i)),F+=D.charAt(i)+'<br>',C+=A,F+=C;else if(']'==D.charAt(i))C=C.substring(0,C.length-18),F+='<br>'+C,F+=D.charAt(i),B.pop();else if('}'==D.charAt(i))C=C.substring(0,C.length-18),F+='<br>'+C+D.charAt(i),B.pop(),0!=B.length&&'['!=L(B)&&'{'!=L(B)&&(F+=C);else if('"'==D.charAt(i)&&'"'==L(B))F+=D.charAt(i),B.pop();else if(','==D.charAt(i)&&'"'!=L(B))F+=D.charAt(i)+'<br>',F+=C;else if('\n'==D.charAt(i));else if(' '==D.charAt(i)&&'"'!=L(B));else F+=D.charAt(i);this.innerHTML=F}else if('flexible'==z.type){var M=function(Q){var R=Q.pop();return Q.push(R),R},B=[],G=[],D=this.innerHTML,F='';if(z.collapsible)var H='<span class=\'ellipsis\'></span><div class=\'collapser\'></div><ul class=\'array collapsible\'>';else var H='<div></div><ul class=\'array\'>';if(z.hoverable)var I='<div class=\'hoverable\'>';else var I='<div>';for(F+='<div id=\'json\'>',G.push('</div>'),i=0;i<D.length;i++)if('{'==D.charAt(i))B.push(D.charAt(i)),F+=D.charAt(i),F+=H,G.push('</ul>'),F+='<li>'+I,G.push('</div></li>');else if('"'==D.charAt(i)&&'"'!=M(B))F+=D.charAt(i),B.push(D.charAt(i));else if('['==D.charAt(i)&&']'==D.charAt(i+1))B.push(D.charAt(i)),F+=D.charAt(i),F+=H,G.push('</ul>'),F+='<li>'+I,G.push('</div></li>');else if('['==D.charAt(i))B.push(D.charAt(i)),F+=D.charAt(i),F+=H,G.push('</ul>'),F+='<li>'+I,G.push('</div></li>');else if(']'==D.charAt(i))F+=G.pop()+G.pop(),F+=D.charAt(i),B.pop();else if('}'==D.charAt(i))F+=G.pop()+G.pop(),F+=D.charAt(i),B.pop(),0!=B.length&&'['!=M(B)&&'{'!=M(B)&&(F+=G.pop());else if('"'==D.charAt(i)&&'"'==M(B))F+=D.charAt(i),B.pop();else if(','==D.charAt(i)&&'"'!=M(B))F+=D.charAt(i),F+=G.pop(),F+='<li>'+I,G.push('</div></li>');else if('\n'==D.charAt(i));else if(' '==D.charAt(i)&&'"'!=M(B));else F+=D.charAt(i);this.innerHTML=F}else{var O=function(Q){w.each(Q,function(R,S){null==S?F+='<li>'+I+'<span class=\'property\'>'+R+'</span>: <span class=\'type-null\'>'+S+'</span></div></li>':S instanceof Array?(F+='<li>'+I+'<span class=\'property\'>'+R+'</span>: ['+H,G.push('</li>'),G.push('</div>'),G.push('</ul>'),P(S)):'object'==('undefined'==typeof S?'undefined':_typeof(S))?(F+='<li>'+I+'<span class=\'property\'>'+R+'</span>: {'+J,G.push('</li>'),G.push('</div>'),G.push('</ul>'),O(S)):'number'==typeof S?F+='<li>'+I+'<span class=\'property\'>'+R+'</span>: <span class=\'type-number\'>'+S+'</span></div></li>':'string'==typeof S?F+='<li>'+I+'<span class=\'property\'>'+R+'</span>: <span class=\'type-string\'>"'+S+'"</span></div></li>':'boolean'==typeof S?F+='<li>'+I+'<span class=\'property\'>'+R+'</span>: <span class=\'type-boolean\'>'+S+'</span></div></li>':F+='<li>'+I+'<span class=\'property\'>'+R+'</span>: '+S+'</div></li>'}),F+=G.pop()+'}'+G.pop()+G.pop()},P=function(Q){w.each(Q,function(R,S){null==S?F+='<li>'+I+'<span class=\'property\'>'+R+'</span>: <span class=\'type-null\'>'+S+'</span></div></li>':S instanceof Array?(F+='<li>'+I+'['+H,G.push('</li>'),G.push('</div>'),G.push('</ul>'),P(S)):'object'==('undefined'==typeof S?'undefined':_typeof(S))?(F+='<li>'+I+'{'+J,G.push('</li>'),G.push('</div>'),G.push('</ul>'),O(S)):'number'==typeof S?F+='<li>'+I+'<span class=\'property\'>'+R+'</span>: <span class=\'type-number\'>'+S+'</span></div></li>':'string'==typeof S?F+='<li>'+I+'<span class=\'property\'>'+R+'</span>: <span class=\'type-string\'>"'+S+'"</span></div></li>':'boolean'==typeof S?F+='<li>'+I+'<span class=\'property\'>'+R+'</span>: <span class=\'type-boolean\'>'+S+'</span></div></li>':F+='<li>'+I+'<span class=\'property\'>'+R+'</span>: '+S+'</div></li>'}),F+=G.pop()+']'+G.pop()+G.pop()},F='',G=[];if(z.collapsible)var H='<span class=\'ellipsis\'></span><div class=\'collapser\'></div><ul class=\'array collapsible\'>',J='<span class=\'ellipsis\'></span><div class=\'collapser\'></div><ul class=\'obj collapsible\'>';else var H='<div></div><ul class=\'array\'>',J='<div></div><ul class=\'obj\'>';if(z.hoverable)var I='<div class=\'hoverable\'>';else var I='<div>';var D=this.innerHTML,K=jQuery.parseJSON(D);F='',F+='<div id=\'json\'>',F+=I+'{'+J,G.push(''),G.push('</div>'),G.push('</ul>'),O(K),F+='</ul></div></div>',this.innerHTML=F}w('.hoverable').hover(function(Q){Q.stopPropagation(),w('.hoverable').removeClass('hovered'),w(this).addClass('hovered')},function(Q){Q.stopPropagation(),w(this).addClass('hovered')}),w('.collapser').off().click(function(){w(this).parent('.hoverable').toggleClass('collapsed')})})}}(jQuery),a('.mymodal-close').click(function(){a('#modal_JSON').hide()}),a('.btn-danger-close').click(function(){a('#modal_JSON').hide()})}}});