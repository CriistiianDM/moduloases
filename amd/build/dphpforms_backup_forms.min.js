'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a};define(['jquery','block_ases/jszip','block_ases/jquery.dataTables','block_ases/dataTables.autoFill','block_ases/dataTables.buttons','block_ases/buttons.html5','block_ases/buttons.flash','block_ases/buttons.print','block_ases/bootstrap','block_ases/sweetalert','block_ases/jqueryui','block_ases/select2','block_ases/loading_indicator','block_ases/_general_modal_manager'],function(a,b,c,d,f,g,h,j,k,l,m,n,o){return{init:function init(){function q(x,y){o.show(),a.ajax({type:'POST',data:{loadF:'get_like',cadena:x,atributo:y},url:'../managers/dphpforms/dphpforms_dwarehouse_api.php',success:function success(z){if(o.hide(),0===z.length)swal('ATTRIBUTE NOT FOUND','Oooops! Zero results','warning');else{a('#div_table_forms').empty(),a('#div_table_forms').append('<table id="tableBackupForms" class="display" cellspacing="0" width="100%"><thead><thead></table>');a('#tableBackupForms').DataTable(z);a('#div_table_forms').css('cursor','pointer')}},cache:!1,async:!0,failure:function failure(){o.hide(),alert('No encontrado')}})}function r(x,y){var z=[];z.push(x),z.push(y),o.show(),a.ajax({type:'POST',data:{loadF:'get_id_user',params:z},url:'../managers/dphpforms/dphpforms_dwarehouse_api.php',success:function success(A){o.hide(),0===A.length?swal('USER NOT FOUND','Oooops! Incorrect code','warning'):(a('#div_code_user').empty(),a('#div_code_user').append('<strong>Usuario: </strong>'+A[0].cod_user),a('#div_name_user').empty(),a('#div_name_user').append('<strong>Nombre: </strong>'+A[0].name_user))},cache:!1,async:!0,failure:function failure(){o.hide(),alert('No encontrado')}})}function t(x){o.show(),a.ajax({type:'POST',data:{loadF:'get_values',params:x},url:'../managers/dphpforms/dphpforms_dwarehouse_api.php',success:function success(y){if(o.hide(),0===y.length)swal('QUESTION NOT FOUND','Oooops! Incorrect code','warning');else{opciones=y[0].options_c,tipo_campo=y[0].tipo_campo;var z='"respuesta":"MODIFIQUE ESTE VALOR","opciones":"'+opciones+'","tipo_campo":"'+tipo_campo+'","id_pregunta":"'+a('#typekey_select').val()+'"';a('#filtroLike').val(z)}},cache:!1,async:!0,failure:function failure(){o.hide(),alert('No encontrado')}})}function u(x,y){o.show(),a.ajax({type:'POST',data:{loadF:x,params:y},url:'../managers/dphpforms/dphpforms_dwarehouse_api.php',dataType:'json',cache:!1,async:!0,success:function success(z){if(o.hide(),''!=z[y].datos_previos){var A=JSON.parse(z[y].datos_previos);if('get_form'==x&&(z[y].datos_previos=A),'get_form_general_logs'==x)if(Array.isArray(A))z[y].datos_previos=A;else{var B=[];for(data in A){var C={};C[data]=JSON.parse(A[data]),B.push(C)}z[y].datos_previos=B}}''!=z[y].datos_enviados&&(z[y].datos_enviados=JSON.parse(z[y].datos_enviados)),''!=z[y].datos_almacenados&&(z[y].datos_almacenados=JSON.parse(z[y].datos_almacenados)),w(z)},failure:function failure(){o.hide()}})}function w(x){a('#div_JSONform').empty();var y=JSON.stringify(x);a('#div_JSONform').append(y),a('#div_JSONform').beautifyJSON({type:'flexible',hoverable:!0,collapsible:!0,color:!0});var z=Object.keys(x)[0],A=x[z];-1==A.id_registro_respuesta_form?(a('.dphpforms-peer-record').attr('disabled',!0),a('.dphpforms-restore').attr('disabled',!0)):(a('.dphpforms-peer-record').attr('data-record-id',A.id_registro_respuesta_form),a('.dphpforms-restore').attr('data-record-id',z),a('.dphpforms-peer-record').attr('disabled',!1),a('.dphpforms-restore').attr('disabled',!1)),a('#modal_JSON').fadeIn(300)}window.JSZip=b,a(document).on('mousedown','.slider.round',function(){var y=a(this).data('status');'off'==y?(a(this).data('status','on'),a('#busqueda-simplificada').hide(),a('#busqueda-avanzada').show()):(a(this).data('status','off'),a('#busqueda-avanzada').hide(),a('#busqueda-simplificada').show())}),a(document).on('click','#generarFiltroSimplificado',function(){var x=a('#simple_cod_user').val(),y=a('#simple_criteria_select option:selected').val();o.show(),a.ajax({type:'POST',data:{loadF:'get_records_simple',username:x,is_student:y},url:'../managers/dphpforms/dphpforms_dwarehouse_api.php',cache:!1,async:!0,success:function success(z){if(o.hide(),0===z.length)swal('ATTRIBUTE NOT FOUND','Oooops! Zero results','warning');else{a('#div_table_forms').empty(),a('#div_table_forms').append('<table id="tableBackupForms" class="display" cellspacing="0" width="100%"><thead><thead></table>');a('#tableBackupForms').DataTable(z);a('#div_table_forms').css('cursor','pointer')}},failure:function failure(){o.hide(),alert('No encontrado')}})}),a(document).ready(function(){o.show(),a.ajax({type:'POST',data:{loadF:'loadForms'},url:'../managers/dphpforms/dphpforms_dwarehouse_api.php',success:function success(x){o.hide(),a('#div_table_forms').empty(),a('#div_table_forms').append('<table id="tableBackupForms" class="display" cellspacing="0" width="100%"><thead><thead></table>');a('#tableBackupForms').DataTable(x);a('#div_table_forms').css('cursor','pointer')},dataType:'json',cache:!1,async:!0,failure:function failure(){o.hide()}}),a.ajax({type:'POST',data:{loadF:'loadGeneralLogs'},url:'../managers/dphpforms/dphpforms_dwarehouse_api.php',success:function success(x){a('#div_table_general_logs').empty(),a('#div_table_general_logs').append('<table id="tableBackupGeneralLogs" class="display" cellspacing="0" width="100%"><thead><thead></table>');a('#tableBackupGeneralLogs').DataTable(x);a('#div_table_general_logs').css('cursor','pointer')},dataType:'json',cache:!1,async:!0,failure:function failure(){}})}),a(document).on('click','#tableBackupForms tbody tr td',function(){var x='';x=a(this).parents('tr').find('td:first').html(),u('get_form',x)}),a(document).on('click','#tableBackupGeneralLogs tbody tr td',function(){var x='';x=a(this).parents('tr').find('td:first').html(),u('get_form_general_logs',x)}),a('#generarFiltro').on('click',function(){var x=document.getElementById('filtroCodigoUsuario').value,y=document.getElementById('selectTable').value;r(x,y)}),a('#load_like').on('click',function(){var x=document.getElementById('typecolumn_select').value,y=document.getElementById('filtroLike').value;q(y,x)}),a('#typecolumn_select').on('click',function(){'datos_previos'==a('#typecolumn_select').val()||'datos_enviados'==a('#typecolumn_select').val()||'datos_almacenados'==a('#typecolumn_select').val()?a('#typekey_select').parent().parent().show():a('#typekey_select').parent().parent().hide()}),a('#typekey_select').on('click',function(){if('datos_enviados'==a('#typecolumn_select').val()){var x='"id":"'+a(this).val()+'","valor":"MODIFIQUE ESTE VALOR"';a('#filtroLike').val(x)}('datos_previos'==a('#typecolumn_select').val()||'datos_almacenados'==a('#typecolumn_select').val())&&t(a(this).val())}),a('.outside').click(function(){var x=a(this);swal({title:'Confirmaci\xF3n de salida',text:'',type:'warning',showCancelButton:!0,confirmButtonText:'Salir'},function(y){y&&(a(x).parent('.mymodal').fadeOut(300),console.log(a(this).parent('.mymodal')))})}),function(x){x.fn.beautifyJSON=function(y){var A=jQuery.extend({},{type:'strict',hoverable:!0,collapsible:!0,color:!0},y);this.each(function(){if('plain'==A.type){var M=function(R){var S=R.pop();return R.push(S),S},B='&ensp;&ensp;&ensp;',C=[],D='',E=this.innerHTML,F=E.split('"').map(function(R,S){return S%2?R:R.replace(/\s/g,'')}).join('"'),G='';for(i=0;i<E.length;i++)if('{'==E.charAt(i))C.push(E.charAt(i)),G+=E.charAt(i)+'<br>',D+=B,G+=D;else if('"'==E.charAt(i)&&'"'!=M(C))G+=E.charAt(i),C.push(E.charAt(i));else if('['==E.charAt(i)&&']'==E.charAt(i+1))C.push(E.charAt(i)),G+=E.charAt(i),D+=B;else if('['==E.charAt(i))C.push(E.charAt(i)),G+=E.charAt(i)+'<br>',D+=B,G+=D;else if(']'==E.charAt(i))D=D.substring(0,D.length-18),G+='<br>'+D,G+=E.charAt(i),C.pop();else if('}'==E.charAt(i))D=D.substring(0,D.length-18),G+='<br>'+D+E.charAt(i),C.pop(),0!=C.length&&'['!=M(C)&&'{'!=M(C)&&(G+=D);else if('"'==E.charAt(i)&&'"'==M(C))G+=E.charAt(i),C.pop();else if(','==E.charAt(i)&&'"'!=M(C))G+=E.charAt(i)+'<br>',G+=D;else if('\n'==E.charAt(i));else if(' '==E.charAt(i)&&'"'!=M(C));else G+=E.charAt(i);this.innerHTML=G}else if('flexible'==A.type){var N=function(R){var S=R.pop();return R.push(S),S},C=[],H=[],E=this.innerHTML,G='';if(A.collapsible)var I='<span class=\'ellipsis\'></span><div class=\'collapser\'></div><ul class=\'array collapsible\'>';else var I='<div></div><ul class=\'array\'>';if(A.hoverable)var J='<div class=\'hoverable\'>';else var J='<div>';for(G+='<div id=\'json\'>',H.push('</div>'),i=0;i<E.length;i++)if('{'==E.charAt(i))C.push(E.charAt(i)),G+=E.charAt(i),G+=I,H.push('</ul>'),G+='<li>'+J,H.push('</div></li>');else if('"'==E.charAt(i)&&'"'!=N(C))G+=E.charAt(i),C.push(E.charAt(i));else if('['==E.charAt(i)&&']'==E.charAt(i+1))C.push(E.charAt(i)),G+=E.charAt(i),G+=I,H.push('</ul>'),G+='<li>'+J,H.push('</div></li>');else if('['==E.charAt(i))C.push(E.charAt(i)),G+=E.charAt(i),G+=I,H.push('</ul>'),G+='<li>'+J,H.push('</div></li>');else if(']'==E.charAt(i))G+=H.pop()+H.pop(),G+=E.charAt(i),C.pop();else if('}'==E.charAt(i))G+=H.pop()+H.pop(),G+=E.charAt(i),C.pop(),0!=C.length&&'['!=N(C)&&'{'!=N(C)&&(G+=H.pop());else if('"'==E.charAt(i)&&'"'==N(C))G+=E.charAt(i),C.pop();else if(','==E.charAt(i)&&'"'!=N(C))G+=E.charAt(i),G+=H.pop(),G+='<li>'+J,H.push('</div></li>');else if('\n'==E.charAt(i));else if(' '==E.charAt(i)&&'"'!=N(C));else G+=E.charAt(i);this.innerHTML=G}else{var P=function(R){x.each(R,function(S,T){null==T?G+='<li>'+J+'<span class=\'property\'>'+S+'</span>: <span class=\'type-null\'>'+T+'</span></div></li>':T instanceof Array?(G+='<li>'+J+'<span class=\'property\'>'+S+'</span>: ['+I,H.push('</li>'),H.push('</div>'),H.push('</ul>'),Q(T)):'object'==('undefined'==typeof T?'undefined':_typeof(T))?(G+='<li>'+J+'<span class=\'property\'>'+S+'</span>: {'+K,H.push('</li>'),H.push('</div>'),H.push('</ul>'),P(T)):'number'==typeof T?G+='<li>'+J+'<span class=\'property\'>'+S+'</span>: <span class=\'type-number\'>'+T+'</span></div></li>':'string'==typeof T?G+='<li>'+J+'<span class=\'property\'>'+S+'</span>: <span class=\'type-string\'>"'+T+'"</span></div></li>':'boolean'==typeof T?G+='<li>'+J+'<span class=\'property\'>'+S+'</span>: <span class=\'type-boolean\'>'+T+'</span></div></li>':G+='<li>'+J+'<span class=\'property\'>'+S+'</span>: '+T+'</div></li>'}),G+=H.pop()+'}'+H.pop()+H.pop()},Q=function(R){x.each(R,function(S,T){null==T?G+='<li>'+J+'<span class=\'property\'>'+S+'</span>: <span class=\'type-null\'>'+T+'</span></div></li>':T instanceof Array?(G+='<li>'+J+'['+I,H.push('</li>'),H.push('</div>'),H.push('</ul>'),Q(T)):'object'==('undefined'==typeof T?'undefined':_typeof(T))?(G+='<li>'+J+'{'+K,H.push('</li>'),H.push('</div>'),H.push('</ul>'),P(T)):'number'==typeof T?G+='<li>'+J+'<span class=\'property\'>'+S+'</span>: <span class=\'type-number\'>'+T+'</span></div></li>':'string'==typeof T?G+='<li>'+J+'<span class=\'property\'>'+S+'</span>: <span class=\'type-string\'>"'+T+'"</span></div></li>':'boolean'==typeof T?G+='<li>'+J+'<span class=\'property\'>'+S+'</span>: <span class=\'type-boolean\'>'+T+'</span></div></li>':G+='<li>'+J+'<span class=\'property\'>'+S+'</span>: '+T+'</div></li>'}),G+=H.pop()+']'+H.pop()+H.pop()},G='',H=[];if(A.collapsible)var I='<span class=\'ellipsis\'></span><div class=\'collapser\'></div><ul class=\'array collapsible\'>',K='<span class=\'ellipsis\'></span><div class=\'collapser\'></div><ul class=\'obj collapsible\'>';else var I='<div></div><ul class=\'array\'>',K='<div></div><ul class=\'obj\'>';if(A.hoverable)var J='<div class=\'hoverable\'>';else var J='<div>';var E=this.innerHTML,L=jQuery.parseJSON(E);G='',G+='<div id=\'json\'>',G+=J+'{'+K,H.push(''),H.push('</div>'),H.push('</ul>'),P(L),G+='</ul></div></div>',this.innerHTML=G}x('.hoverable').hover(function(R){R.stopPropagation(),x('.hoverable').removeClass('hovered'),x(this).addClass('hovered')},function(R){R.stopPropagation(),x(this).addClass('hovered')}),x('.collapser').off().click(function(){x(this).parent('.hoverable').toggleClass('collapsed')})})}}(jQuery),a('.mymodal-close').click(function(){a('#modal_JSON').hide()}),a('.btn-danger-close').click(function(){a('#modal_JSON').hide()})}}});