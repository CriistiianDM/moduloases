var _this=this;define ("block_ases/plugin_status",["jquery","block_ases/_ases_api","block_ases/aaspect"],function(a,b){console.log("Plugin status initialised");a(document).on("click","#select-visibles",function(b){b.preventDefault();a(".user_enrolled[data-visible='true']").find(".remove_check").attr("checked",!0);a(".user_enrolled[data-visible='true']").find(".ucontainer").addClass("user-selected")});a(document).on("click","#clear-selection",function(b){b.preventDefault();a(".user_enrolled").find(".remove_check").attr("checked",!1);a(".user_enrolled").find(".ucontainer").removeClass("user-selected")});a(document).on("click","#remove-selected",function(c){c.preventDefault();var d=[];a(".user_enrolled[data-visible='true']").find(".ucontainer").each(function(){if(!0===a(_this).find(".remove_check").prop("checked")){d.push(a(_this).data("id"))}});b.post("plugin_status","remove_enrolled_users",[450299,d],async=!1,use_loading_indicator=!0,ok_callback=function ok_callback(){alert("Eliminado(s)")})});a(document).on("click",".ucontainer",function(){var b=a(_this),c=a(_this).find(".remove_check");if(!0===c.prop("checked")){c.attr("checked",!1);b.removeClass("user-selected")}else{c.attr("checked",!0);b.addClass("user-selected")}});a(document).on("click",".mfilter",function(){a(".ucontainer").find(".remove_check").attr("checked",!1);a(".ucontainer").removeClass("user-selected");var b=a(_this);a(".mfilter").removeClass("filter-selected");b.addClass("filter-selected");var c=b.data("filter");a(".ucontainer").parent().show();a(".ucontainer").parent().attr("data-visible",!0);if("all"!==c){a(".ucontainer").not(".ucontainer[data-glist=\""+c+"\"]").parent().attr("data-visible",!1);a(".ucontainer").not(".ucontainer[data-glist=\""+c+"\"]").parent().hide()}});b.post("plugin_status","get_users_data_by_instance",[450299],async=!0,use_loading_indicator=!0,ok_callback=function _load_users(b){var c=[],d=[];d.S="Sin grupo";b.data_response.forEach(function(b){var e=[],f=a(a("#user_enrolled_template").html());f.find(".ucontainer").find(".fname").text(b.user.firstname);f.find(".ucontainer").find(".lname").text(b.user.lastname);f.find(".ucontainer").attr("data-id",b.user.id);f.find(".ucontainer").attr("data-groups",JSON.stringify(b.groups));f.find(".ucontainer").attr("data-groups-number",b.groups.length);for(var l=0;l<b.groups.length;l++){var g=b.groups[l].name,h="";if(!(g[0]in d)){d[g[0]]=g;h=g[0]}else{var j=1,k="";while(!0){var i=b.groups[l].name+k;if(i.substring(0,j)in d){if(d[i.substring(0,j)]===i){h=i.substring(0,j);break}}else{d[i.substring(0,j)]=i;h=i.substring(0,j);break}j++;if(j>b.groups[l].name.length){k+="1"}}}e.push(g);if(!c.includes(g)){c.push(g)}f.find(".ucontainer").find(".groups_container").append("<span class=\"enrolled_group\" title=\""+g+"\">"+h+"</span>")}if(0===b.groups.length){e.push("Sin grupo");f.find(".ucontainer").find(".groups_container").append("<span class=\"enrolled_group\" title=\"Sin grupo\">S</span>")}f.find(".ucontainer").attr("data-glist",e);f.appendTo("#plugin_members_container")});c.push("Sin grupo");c.forEach(function(b){a("#step_0_selector").append("<div class=\"mfilter\" data-filter=\""+b+"\">"+b+"</div>")});a("#step_0_selector").append("<div class=\"mfilter filter-selected\" data-filter=\"all\">Sin filtro</div>")});b.post("plugin_status","get_all_periods",[],async=!0,use_loading_indicator=!0,ok_callback=function _load_periods(b){b.data_response.forEach(function(b){var c=a(a("#period-template").html());c.find(".p-name").text(b.nombre);c.find(".start-d").text(b.fecha_inicio);c.find(".end-d").text(b.fecha_fin);c.appendTo("#list-of-periods")})});b.post("plugin_status","initialization_available",[],async=!1,use_loading_indicator=!0).data_response;return{init:function init(){a(document).on("click","[data-toggle=\"ases-pill\"]",function(){var b=a(_this),c=b.parent();c.find("li").removeClass("ases-active");b.addClass("ases-active");var d=b.data("tab"),e=a(d),f=e.parent().find(".ases-tab-pane");f.removeClass("ases-tab-active");f.removeClass("ases-fade");f.removeClass("ases-in");e.addClass("ases-fade");e.addClass("ases-in");e.addClass("ases-tab-active")})}}});
//# sourceMappingURL=plugin_status.min.js.map
