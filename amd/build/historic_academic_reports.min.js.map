{"version":3,"sources":["../src/historic_academic_reports.js"],"names":["define","$","init","document","ready","on","table","DataTable","colIndex","parent","index","columns","search","value","draw","valor","cell","column","row","data","codigo","programa","semestre","checkEstimulo","checkLoses","location","href","load_table_students","html","fadeIn","append","console","log","load_total_table","ajax","type","url","success","msg","swal","title","text","showCancelButton","customClass","confirmButtonColor","confirmButtonText","closeOnConfirm","css","dataType","cache","error"],"mappings":"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","sourcesContent":["/**\r\n * Academic report management\r\n * @module amd/src/historic_academic_reports\r\n * @author Camilo José Cruz rivera\r\n * @copyright 2018 Camilo José Cruz Rivera <cruz.camilo@correounivalle.edu.co>\r\n * @license  http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\ndefine(['jquery', 'block_ases/bootstrap', 'block_ases/jquery.dataTables', 'block_ases/sweetalert2'], function ($) {\r\n\r\n    return {\r\n        /**\r\n         *\r\n         */\r\n\r\n        init: function () {\r\n            $(document).ready(function () {\r\n\r\n                ////Controles para la tabla historica academica\r\n                $(document).on('change', '#tableResultStudent thead tr th select', function () {\r\n                    var table = $(\"#tableResultStudent\").DataTable();\r\n\r\n                    var colIndex = $(this).parent().index() + 1;\r\n                    table.columns(colIndex - 1).search(this.value).draw();\r\n                });\r\n\r\n                //Controles para la tabla historica totales\r\n                $(document).on('change', '#tableResultTotal thead tr th select', function () {\r\n                    var table = $(\"#tableResultTotal\").DataTable();\r\n\r\n                    var colIndex = $(this).parent().index() + 1;\r\n                    var valor = this.value;\r\n                    table.columns(colIndex - 1).search(valor).draw();\r\n                });\r\n\r\n                $(document).on('click', '#tableResultStudent tbody tr td', function () {\r\n                    var table = $(\"#tableResultStudent\").DataTable();\r\n                    var colIndex = table.cell(this).index().column;\r\n\r\n                    if (colIndex == 10) {\r\n                        if (table.cell(table.row(this).index(), 10).data() == 'SI') {\r\n                            var codigo = table.cell(table.row(this).index(), 2).data();\r\n                            var programa = table.cell(table.row(this).index(), 6).data();\r\n                            var semestre = table.cell(table.row(this).index(), 5).data();\r\n                            checkEstimulo(codigo, programa, semestre);\r\n                        }\r\n                    } else if (colIndex == 7) {\r\n                        if (table.cell(table.row(this).index(), 7).data() != '0') {\r\n                            var codigo = table.cell(table.row(this).index(), 2).data();\r\n                            var programa = table.cell(table.row(this).index(), 6).data();\r\n                            var semestre = table.cell(table.row(this).index(), 5).data();\r\n                            checkLoses(codigo, programa, semestre);\r\n                        }\r\n                    } else if (colIndex >= 1 || colIndex <=4) {\r\n                        location.href = \"student_profile.php\" + location.search + \"&student_code=\" + table.cell(table.row(this).index(), 2).data() + \"-\";\r\n                    }\r\n\r\n\r\n                });\r\n            });\r\n        },\r\n        load_table_students: function (data) {\r\n\r\n            $(\"#div_table_students\").html('');\r\n            $(\"#div_table_students\").fadeIn(1000).append('<table id=\"tableResultStudent\" class=\"table\"' +\r\n                ' cellspacing=\"0\" width=\"100%\"><thead> </thead></table>');\r\n\r\n            $(\"#tableResultStudent\").DataTable(data);\r\n            console.log(data);\r\n\r\n        },\r\n        load_total_table: function (data) {\r\n\r\n            $(\"#div_totales_historic\").html('');\r\n            $(\"#div_totales_historic\").fadeIn(1000).append('<table id=\"tableResultTotal\" class=\"table\"' +\r\n                ' cellspacing=\"0\" width=\"100%\"><thead> </thead></table>');\r\n\r\n            $(\"#tableResultTotal\").DataTable(data);\r\n            console.log(data);\r\n        }\r\n    };\r\n\r\n\r\n    /**\r\n     * @method checkLoses\r\n     * @desc Check the loses subjects\r\n     * @return {void}\r\n     */\r\n    function checkLoses(codigo, programa, semestre) {\r\n        $.ajax({\r\n            type: \"POST\",\r\n            data: {\r\n                codigo: codigo,\r\n                programa: programa,\r\n                type: \"check_loses\",\r\n                semestre: semestre,\r\n            },\r\n            url: \"../managers/historic_academic_reports/historic_academic_reports_processing.php\",\r\n            success: function (msg) {\r\n                console.log(msg);\r\n                swal({\r\n                    title: \"Materias Perdidas\",\r\n                    type: \"info\",\r\n                    text: msg,\r\n                    html: true,\r\n                    showCancelButton: false,\r\n                    customClass: 'swal-wide',\r\n                    confirmButtonColor: \"#DD6B55\",\r\n                    confirmButtonText: \"Cerrar\",\r\n                    closeOnConfirm: true\r\n                });\r\n                $(\".swal-wide\").css({ 'width': '600px', 'margin-left': '-300px' });\r\n            },\r\n            dataType: \"text\",\r\n            cache: \"false\",\r\n            error: function (msg) {\r\n                console.log(msg);\r\n            },\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @method checkEstimulo\r\n     * @desc Check the position of the \"estimulo academico\"\r\n     * @return {void}\r\n     */\r\n    function checkEstimulo(codigo, programa, semestre) {\r\n        $.ajax({\r\n            type: \"POST\",\r\n            data: {\r\n                codigo: codigo,\r\n                programa: programa,\r\n                type: \"check_estimulo\",\r\n                semestre: semestre,\r\n            },\r\n            url: \"../managers/historic_academic_reports/historic_academic_reports_processing.php\",\r\n            success: function (msg) {\r\n                console.log(msg);\r\n                swal({\r\n                    title: \"Estímulo Académico\",\r\n                    type: \"info\",\r\n                    text: msg,\r\n                    html: true,\r\n                    showCancelButton: false,\r\n                    confirmButtonColor: \"#DD6B55\",\r\n                    confirmButtonText: \"Cerrar\",\r\n                    closeOnConfirm: true\r\n                });\r\n            },\r\n            dataType: \"text\",\r\n            cache: \"false\",\r\n            error: function (msg) {\r\n                console.log(msg);\r\n            },\r\n        });\r\n    }\r\n});"],"file":"historic_academic_reports.min.js"}