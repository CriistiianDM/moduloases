{"version":3,"sources":["../src/historic_academic_reports.js"],"names":["define","$","init","document","ready","on","table","DataTable","colIndex","parent","index","columns","search","value","draw","valor","cell","column","row","data","codigo","programa","semestre","checkEstimulo","checkLoses","location","href","load_table_students","html","fadeIn","append","console","log","load_total_table","ajax","type","url","success","msg","swal","title","text","showCancelButton","customClass","confirmButtonColor","confirmButtonText","closeOnConfirm","css","dataType","cache","error"],"mappings":"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","sourcesContent":["/**\n * Academic report management\n * @module amd/src/historic_academic_reports\n * @author Camilo José Cruz rivera\n * @copyright 2018 Camilo José Cruz Rivera <cruz.camilo@correounivalle.edu.co>\n * @license  http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'block_ases/bootstrap', 'block_ases/jquery.dataTables', 'block_ases/sweetalert2'], function ($) {\n\n    return {\n        /**\n         *\n         */\n\n        init: function () {\n            $(document).ready(function () {\n\n                ////Controles para la tabla historica academica\n                $(document).on('change', '#tableResultStudent thead tr th select', function () {\n                    var table = $(\"#tableResultStudent\").DataTable();\n\n                    var colIndex = $(this).parent().index() + 1;\n                    table.columns(colIndex - 1).search(this.value).draw();\n                });\n\n                //Controles para la tabla historica totales\n                $(document).on('change', '#tableResultTotal thead tr th select', function () {\n                    var table = $(\"#tableResultTotal\").DataTable();\n\n                    var colIndex = $(this).parent().index() + 1;\n                    var valor = this.value;\n                    table.columns(colIndex - 1).search(valor).draw();\n                });\n\n                $(document).on('click', '#tableResultStudent tbody tr td', function () {\n                    var table = $(\"#tableResultStudent\").DataTable();\n                    var colIndex = table.cell(this).index().column;\n\n                    if (colIndex == 10) {\n                        if (table.cell(table.row(this).index(), 10).data() == 'SI') {\n                            var codigo = table.cell(table.row(this).index(), 2).data();\n                            var programa = table.cell(table.row(this).index(), 6).data();\n                            var semestre = table.cell(table.row(this).index(), 5).data();\n                            checkEstimulo(codigo, programa, semestre);\n                        }\n                    } else if (colIndex == 7) {\n                        if (table.cell(table.row(this).index(), 7).data() != '0') {\n                            var codigo = table.cell(table.row(this).index(), 2).data();\n                            var programa = table.cell(table.row(this).index(), 6).data();\n                            var semestre = table.cell(table.row(this).index(), 5).data();\n                            checkLoses(codigo, programa, semestre);\n                        }\n                    } else if (colIndex >= 1 || colIndex <=4) {\n                        location.href = \"student_profile.php\" + location.search + \"&student_code=\" + table.cell(table.row(this).index(), 2).data() + \"-\";\n                    }\n\n\n                });\n            });\n        },\n        load_table_students: function (data) {\n\n            $(\"#div_table_students\").html('');\n            $(\"#div_table_students\").fadeIn(1000).append('<table id=\"tableResultStudent\" class=\"table\"' +\n                ' cellspacing=\"0\" width=\"100%\"><thead> </thead></table>');\n\n            $(\"#tableResultStudent\").DataTable(data);\n            console.log(data);\n\n        },\n        load_total_table: function (data) {\n\n            $(\"#div_totales_historic\").html('');\n            $(\"#div_totales_historic\").fadeIn(1000).append('<table id=\"tableResultTotal\" class=\"table\"' +\n                ' cellspacing=\"0\" width=\"100%\"><thead> </thead></table>');\n\n            $(\"#tableResultTotal\").DataTable(data);\n            console.log(data);\n        }\n    };\n\n\n    /**\n     * @method checkLoses\n     * @desc Check the loses subjects\n     * @return {void}\n     */\n    function checkLoses(codigo, programa, semestre) {\n        $.ajax({\n            type: \"POST\",\n            data: {\n                codigo: codigo,\n                programa: programa,\n                type: \"check_loses\",\n                semestre: semestre,\n            },\n            url: \"../managers/historic_academic_reports/historic_academic_reports_processing.php\",\n            success: function (msg) {\n                console.log(msg);\n                swal({\n                    title: \"Materias Perdidas\",\n                    type: \"info\",\n                    text: msg,\n                    html: true,\n                    showCancelButton: false,\n                    customClass: 'swal-wide',\n                    confirmButtonColor: \"#DD6B55\",\n                    confirmButtonText: \"Cerrar\",\n                    closeOnConfirm: true\n                });\n                $(\".swal-wide\").css({ 'width': '600px', 'margin-left': '-300px' });\n            },\n            dataType: \"text\",\n            cache: \"false\",\n            error: function (msg) {\n                console.log(msg);\n            },\n        });\n    }\n\n    /**\n     * @method checkEstimulo\n     * @desc Check the position of the \"estimulo academico\"\n     * @return {void}\n     */\n    function checkEstimulo(codigo, programa, semestre) {\n        $.ajax({\n            type: \"POST\",\n            data: {\n                codigo: codigo,\n                programa: programa,\n                type: \"check_estimulo\",\n                semestre: semestre,\n            },\n            url: \"../managers/historic_academic_reports/historic_academic_reports_processing.php\",\n            success: function (msg) {\n                console.log(msg);\n                swal({\n                    title: \"Estímulo Académico\",\n                    type: \"info\",\n                    text: msg,\n                    html: true,\n                    showCancelButton: false,\n                    confirmButtonColor: \"#DD6B55\",\n                    confirmButtonText: \"Cerrar\",\n                    closeOnConfirm: true\n                });\n            },\n            dataType: \"text\",\n            cache: \"false\",\n            error: function (msg) {\n                console.log(msg);\n            },\n        });\n    }\n});"],"file":"historic_academic_reports.min.js"}