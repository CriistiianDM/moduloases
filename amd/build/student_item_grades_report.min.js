'use strict';define(['jquery','block_ases/ases_jquery_datatable','core/notification','core/templates','block_ases/jquery.dataTables'],function(a,b){return{init:function init(){a(document).ready(function(){})},load_report:function load_report(f){function g(t){var v={data:t,bsort:0,columns:[{title:'C\xF3digo',name:'codigo_asignatura',data:'codigo_asignatura',description:'Identificador de la asignatura en formato Sede-Codigo-Grupo'},{title:'Nombre Asignatura',name:'nombre_asignatura',data:'nombre_asignatura',description:'Nombre completo de la asignatura'},{title:'Profesor',name:'nombre_profesor',data:'nombre_profesor',description:'Nombre completo de el profesor'},{title:'Notas',name:'notas',data:'notas',description:'Identificador de la asignatura en formato Sede-Codigo-Grupo'},{title:'Nota Final',name:'nota_final',data:'nota_final',description:'Nota final de la asignatura calculada con las categorias de notas terminadas'}],language:b.common_lang_config(),order:0};return v}function h(t,u){var v=[],w;for(w=0;w<u.length;w++)t.includes(u[w])&&v.push(w);return v}function k(t){a(o+' th').each(function(u){a(this).attr('title',t[u].description)})}function l(t,u){var v=t.data(),w=v.mdl_user_id,x='../managers/student_grades/student_item_grades_report_api.php/student_grades/item_summary/'+w;a.ajax({method:'get',url:x}).done(function(y){var z=g(y);t.child('<table id="student_item_grades_explicit'+w+'"></table>').show(),a('#student_item_grades_explicit'+w).DataTable(z),console.log(x)}).fail(function(y){u.removeClass('shown'),console.log(x),console.log(y)})}function m(){a(o+' tbody').on('click','td.details-control',function(){var t=a(this).closest('tr'),u=s.row(t);u.child.isShown()?(u.child.hide(),t.removeClass('shown')):(u.child('<img class="icon-loading" src="../icon/loading.gif"/>').show(),callback=function callback(v,w){w.child(v).show()},l(u,t),t.addClass('shown'))})}a(document).on('click','#tableStudentItemGradesReport tbody tr td',function(){var u=a('#tableStudentItemGradesReport').DataTable(),v=u.cell(this).index().column;1<=v&&4>=v&&(location.href='student_profile.php'+location.search+'&student_code='+u.cell(u.row(this).index(),0).data().codigo)});var o='#tableStudentItemGradesReport';a(o).html('<img class="icon-loading" src="../icon/loading.gif"/>');var p=null,q=f.instance_id,s=null;(function(){a.ajax({method:'GET',url:'../managers/student_grades/student_item_grades_report_api.php/'+q,dataType:'json'}).done(function(t){a(o).html(''),s=a(o).DataTable({data:t.data,bsort:t.bsort,columns:t.columns,language:t.language,order:t.order,initComplete:function initComplete(){var u,v}}),k(t.columns),m()}).fail(function(t){console.log(t)})})()}}});