define ("block_ases/student_item_grades_report",["jquery","block_ases/ases_jquery_datatable","core/notification","core/templates","block_ases/jquery.dataTables"],function(a,b,c,d){return{init:function init(){a(document).ready(function(){})},load_report:function load_report(c){var j=function(){function a(a,b,c){this.est_items_perdidos=a?a:0;this.cantidad_estudiantes=c?c:0;this.est_mas_items_perdidos_que_ganados=b?b:0}a.return_total_report=function(b){var c=new a;c.cantidad_estudiantes=b.length;for(var d=0;d<b.length;d++){if(1<=b[d].cantidad_items_perdidos){c.est_items_perdidos++}if(b[d].cantidad_items_perdidos>b[d].cantidad_items_ganados){c.est_mas_items_perdidos_que_ganados++}}return c};return a}();a(document).on("click","#tableStudentItemGradesReport tbody tr td",function(){var b=a("#tableStudentItemGradesReport").DataTable(),c=b.cell(this).index().column;if(1<=c&&4>=c){var d="student_profile.php"+location.search+"&student_code="+b.cell(b.row(this).index(),0).data().codigo,e=window.open(d,"_blank");e.focus()}});a("#tableStudentItemGradesReport").html("<img class=\"icon-loading\" src=\"../icon/loading.gif\"/>");var k=c.instance_id,l=null;function e(a){var c={data:a,bsort:0,paging:!1,columns:[{title:"C\xF3digo",name:"codigo_asignatura",data:"codigo_asignatura",description:"Identificador de la asignatura en formato Sede-Codigo-Grupo"},{title:"Nombre Asignatura",name:"nombre_asignatura",data:"nombre_asignatura",description:"Nombre completo de la asignatura"},{title:"Profesor",name:"nombre_profesor",data:"nombre_profesor",description:"Nombre completo de el profesor"},{title:"Notas",name:"notas",data:"notas",description:"Identificador de la asignatura en formato Sede-Codigo-Grupo"},{title:"Nota Final",name:"nota_final",data:"nota_final",description:"Nota final de la asignatura calculada con las categorias de notas terminadas"}],searching:!1,language:b.common_lang_config(),order:0};return c}function f(a,b){var c=[],d;for(d=0;d<b.length;d++){if(a.includes(b[d])){c.push(d)}}return c}function g(b){a("#tableStudentItemGradesReport th").each(function(c){a(this).attr("title",b[c].description)})}function h(b,c){var d=b.data(),f=d.mdl_user_id;a.ajax({method:"get",url:"../managers/student_grades/student_item_grades_report_api.php/student_grades/item_summary/"+f}).done(function(c){var d=e(c);b.child("<table align=\"center\" id=\"student_item_grades_explicit"+f+"\"></table>").show();a("#student_item_grades_explicit"+f).DataTable(d)}).fail(function(a){c.removeClass("shown");console.log(a)})}function i(){a("#tableStudentItemGradesReport tbody").on("click","td.details-control",function(){var b=a(this).closest("tr"),c=l.row(b);if(c.child.isShown()){c.child.hide();b.removeClass("shown")}else{c.child("<img class=\"icon-loading\" src=\"../icon/loading.gif\"/>").show();callback=function callback(a,b){b.child(a).show()};h(c,b);b.addClass("shown")}})}(function(){a.ajax({method:"GET",url:"../managers/student_grades/student_item_grades_report_api.php/"+k,dataType:"json"}).done(function(b){a("#tableStudentItemGradesReport").html("");var c=j.return_total_report(b.data);d.render("block_ases/student_item_grades_report_summary",{resume_report:c}).then(function(a,b){d.appendNodeContents(".student_item_grades_report .summary",a,b)}).fail(function(){});console.log(c);l=a("#tableStudentItemGradesReport").DataTable({data:b.data,bsort:b.bsort,columns:b.columns,language:b.language,order:b.order,initComplete:function initComplete(){var a=b.columns.map(function(a){return a.name?a.name:null}),c=f(null,a)}});g(b.columns);i()}).fail(function(a){console.log(a)})})()}}});
//# sourceMappingURL=student_item_grades_report.min.js.map
