define(["jquery","block_ases/Modernizr-v282","block_ases/bootstrap","block_ases/datatables","block_ases/sweetalert","block_ases/select2","block_ases/dphpforms_form_renderer"],function(a,b,c,d,e,f,g){return{init:function(){function b(b){var d=c(".puntuacion_riesgo_individual"),e=a(".comentarios_individual").find("textarea").val(),f=c(".puntuacion_riesgo_familiar"),g=a(".comentarios_familiar").find("textarea").val(),h=c(".puntuacion_riesgo_academico"),i=a(".comentarios_academico").find("textarea").val(),j=c(".puntuacion_riesgo_economico"),k=a(".comentarios_economico").find("textarea").val(),l=c(".puntuacion_vida_uni"),m=a(".comentarios_vida_uni").find("textarea").val();if("3"==d||"3"==f||"3"==h||"3"==j||"3"==l){var n={"function":"send_email_dphpforms",student_code:get_student_code(),risks:[{name:"Individual",risk_lvl:d,observation:e},{name:"Familiar",risk_lvl:f,observation:g},{name:"Académico",risk_lvl:h,observation:i},{name:"Económico",risk_lvl:j,observation:k},{name:"Vida Universitaria",risk_lvl:l,observation:m}],date:a(".fecha").find("input").val(),url:window.location.href};a.ajax({type:"POST",data:JSON.stringify(n),url:"../managers/pilos_tracking/send_risk_email.php",success:function(a){console.log(a)},dataType:"text",cache:"false",error:function(a){console.log(a)}})}}function c(b){var c=0;return a(b).find(".opcionesRadio").find("div").each(function(){a(this).find("label").find("input").is(":checked")&&(c=a(this).find("label").find("input").val())}),c}function d(b,c){a.get("../managers/dphpforms/dphpforms_forms_core.php?form_id="+b+"&record_id="+c,function(b){a("#body_editor").html(""),a("#body_editor").append(b),a("#permissions_informationr").html("");var c=a(".dphpforms-record").find(".revisado_profesional").find(".checkbox").find("input[type=checkbox]").prop("checked"),d=a(".dphpforms-record").find(".revisado_practicante").find(".checkbox").find("input[type=checkbox]").prop("checked");(c||d)&&a(".dphpforms-record").find(".btn-dphpforms-delete-record").remove();for(var e=JSON.parse(a("#permissions_information").text()),f=0;f<e.behaviors_permissions.length;f++){for(var g=e.behaviors_permissions[f].behaviors[0],h=g.behaviors_accessibility,i=0;i<h.length;i++){var j=h[i].disabled;"true"==j?j=!0:"false"==j&&(j=!1),a(".dphpforms-record").find("#"+h[i].id).prop("disabled",j),a(".dphpforms-record").find("."+h[i]["class"]).prop("disabled",j)}for(var k=g.behaviors_fields_to_remove,i=0;i<k.length;i++)a(".dphpforms-record").find("#"+k[i].id).remove(),a(".dphpforms-record").find("."+k[i]["class"]).remove();for(var l=g.limpiar_to_eliminate,i=0;i<l.length;i++)a(".dphpforms-record").find("."+l[i]["class"]+".limpiar ").remove()}a("#permissions_informationr").html("")})}function e(b,c){a("#periodos").change(function(){if("sistemas"!=namerol){var e=a("#periodos").val(),f=y;a.ajax({type:"POST",data:{id_persona:f,id_semestre:e,instance:b,otro:!0,type:"consulta_sistemas"},url:"../../../blocks/ases/managers/pilos_tracking/pilos_tracking_report.php",async:!1,success:function(b){""==b?(a("#reemplazarToogle").html("<label> No se encontraron registros </label>"),g(c)):a("#reemplazarToogle").html(b),a(".well.col-md-10.col-md-offset-1.reporte-seguimiento.oculto").slideDown("slow"),g(c)},dataType:"text",cache:"false",error:function(a){alert("error al consultar seguimientos de personas")}}),a(".dphpforms-peer-record").on("click",function(){var b=a(this).attr("data-record-id");d("seguimiento_pares",b),a("#modal_v2_edit_peer_tracking").fadeIn(300)})}})}function f(b){a("#personas").val("").change(),a("#personas").select2({placeholder:"Seleccionar persona",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando.."}}}),a("#periodos").select2({language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando.."}}}),p(b,namerol),a("#consultar_persona").on("click",function(){var c=a("#personas").children(":selected").attr("value"),e=a("#periodos").children(":selected").attr("value");void 0==c?swal({title:"Debe escoger una persona para realizar la consulta",html:!0,type:"warning",confirmButtonColor:"#d51b23"}):(a(".well.col-md-10.col-md-offset-1.reporte-seguimiento.oculto").show(),a(".se-pre-con").show(),a("#reemplazarToogle").hide(),a.ajax({type:"POST",data:{id_persona:c,id_semestre:e,instance:b,type:"consulta_sistemas"},url:"../../../blocks/ases/managers/pilos_tracking/pilos_tracking_report.php",async:!1,success:function(b){""==b?a("#reemplazarToogle").html("<label> No se encontraron registros </label>"):(a("#reemplazarToogle").html(b),a("input[name=practicante]").prop("disabled",!0),a("input[name=profesional]").prop("disabled",!0)),a(".well.col-md-10.col-md-offset-1.reporte-seguimiento.oculto").slideDown("slow")},dataType:"text",cache:"false",error:function(a){alert("error al consultar seguimientos de personas")},complete:function(){a(".se-pre-con").hide(),a("#reemplazarToogle").fadeIn()}}),a(".dphpforms-peer-record").on("click",function(){var b=a(this).attr("data-record-id");d("seguimiento_pares",b),a("#modal_v2_edit_peer_tracking").fadeIn(300)}))})}function g(b){var c=a("#periodos option:selected").text(),d=0,e="";if("monitor_ps"==b.namerol){var f=h(b);e='<div class="row"><div class="col-sm-12"><h2>Información monitor - PERIODO :'+c+' </h2><div class="panel panel-default"> <div class="panel-body"><h4 class="panel-title"><span class="pull-left"> Revisados  :<label for="revisado_monitor_'+d+'">'+f[0]+'</label><b></b> - NO Revisados :<label for="norevisado_monitor_'+d+'">'+f[1]+'</label><b></b> - Total  :<label for="total_monitor_'+d+'">'+f[2]+"</label> <b></b> </span></h4></div></div></div></div>",a("#conteo_principal").empty(),a("#conteo_principal").html(e)}else if("practicante_ps"==b.namerol){var g=h(b);e='<div class="row"><div class="col-sm-12"><h2>Información practicante - PERIODO :'+c+' </h2><div class="panel panel-default"> <div class="panel-body"><h4 class="panel-title"><span class="pull-left"> Revisados  :'+g[0]+" <b></b> - NO Revisados :"+g[1]+" <b></b> - Total  :"+g[2]+" <b></b> </span></h4></div></div></div></div>",a("#conteo_principal").empty(),a("#conteo_principal").html(e)}else if("profesional_ps"==b.namerol){var i=h(b);e='<div class="row"><div class="col-sm-12"><h2>Información profesional - PERIODO :'+c+' </h2><div class="panel panel-default"> <div class="panel-body"><h4 class="panel-title"><span class="pull-left"> Revisados  :'+i[0]+" <b></b> - NO Revisados :"+i[1]+" <b></b> - Total  :"+i[2]+" <b></b> </span></h4></div></div></div></div>",a("#conteo_principal").empty(),a("#conteo_principal").html(e)}else"sistemas"==b.namerol}function h(b,c){void 0===c&&(c="ninguno");var d=[],e=0,f=0,g=0,i=0;if("monitor_ps"==b.namerol){var j=0,k=0;"ninguno"==c?(j=a(".panel-heading.pares").children().length,k=a(".panel-heading.grupal").children().length):(j=a("#collapse"+b.id+" .panel-heading.pares").children().length,k=a("#collapse"+b.id+" .panel-heading.grupal").children().length),a("label[for='norevisado_grupal_"+b.id+"']").html(k),a("label[for='total_grupal_"+b.id+"']").html(k);for(var l=0;l<j;l++)g+=Number(a("label[for='revisado_pares_"+b.id+"_"+l+"']").text()),i+=Number(a("label[for='norevisado_pares_"+b.id+"_"+l+"']").text());for(var l=0;l<k;l++)e+=0,f=k;return total=g+e+(i+f),new Array(g+e,i+f,total)}if("practicante_ps"==b.namerol){var m=0;d=[0,0,0];var n=[];if("ninguno"==c){m=a(".panel-heading.practicante").children().length;for(var o=0;o<m;o++){var p=a(".panel-heading.practicante:eq("+o+")").find("a").attr("href"),q=p.split("#collapse")[1],r=[];r.id=q,r.namerol="monitor_ps",n=h(r,"practicante"),a("label[for='revisado_monitor_"+q+"']").html(n[0]),a("label[for='norevisado_monitor_"+q+"']").html(n[1]),a("label[for='total_monitor_"+q+"']").html(n[2]),d[0]+=n[0],d[1]+=n[1],d[2]+=n[2]}}else{m=a("#collapse"+b.id+" .panel-heading.practicante").children().length;for(var o=0;o<m;o++){var p=a("#collapse"+b.id+" .panel-heading.practicante:eq("+o+")").find("a").attr("href"),q=p.split("#collapse")[1],r=[];r.id=q,r.namerol="monitor_ps",n=h(r,"practicante"),a("label[for='revisado_monitor_"+q+"']").html(n[0]),a("label[for='norevisado_monitor_"+q+"']").html(n[1]),a("label[for='total_monitor_"+q+"']").html(n[2]),d[0]+=n[0],d[1]+=n[1],d[2]+=n[2]}}return d}if("profesional_ps"==b.namerol){d=[0,0,0];for(var s=a(".panel-heading.profesional").children().length,t=[],u=0;u<s;u++){var p=a(".panel-heading.profesional:eq("+u+")").find("a").attr("href"),v=p.split("#collapse")[1],w=[];w.id=v,w.namerol="practicante_ps",t=h(w,"practicante"),a("label[for='revisado_practicante_"+v+"']").html(t[0]),a("label[for='norevisado_practicante_"+v+"']").html(t[1]),a("label[for='total_practicante_"+v+"']").html(t[2]),d[0]+=t[0],d[1]+=t[1],d[2]+=t[2]}return d}}function i(b){a("body").on("click",".btn.btn-info.btn-lg.botonCorreo",function(){var b=a(this).attr("value"),c=a("#textarea_"+b);if(""==c.val())swal({title:"Para enviar una observación debe llenar el campo correspondiente",html:!0,type:"error",confirmButtonColor:"#d51b23"});else{var d=c.attr("name").split("_"),e=d[0],f=d[1],g=d[2],h=d[3],i=d[4],j=c.val();a.ajax({type:"POST",data:{type:"send_email_to_user",tipoSeg:e,codigoEnviarN1:f,codigoEnviarN2:g,fecha:h,nombre:i,message:j},url:"../../../blocks/ases/managers/pilos_tracking/pilos_tracking_report.php",async:!1,success:function(a){"Error"!=a?(swal({title:"Correo enviado",html:!0,type:"success",confirmButtonColor:"#d51b23"}),c.val("")):swal({title:"error al enviar el correo al monitor",html:!0,type:"error",confirmButtonColor:"#d51b23"})},dataType:"text",cache:"false",error:function(a){swal({title:"error al enviar el correo",html:!0,type:"error",confirmButtonColor:"#d51b23"})}})}})}function j(b){a("body").on("click","span.btn.btn-info.btn-lg.botonModificarSeguimiento",function(){var c=a(this).attr("value"),d="",e="",f=document.getElementById("h_ini_"+c),g=document.getElementById("h_fin_"+c),h=document.getElementById("m_ini_"+c),i=document.getElementById("m_fin_"+c),j=f.options[f.selectedIndex].text,k=g.options[g.selectedIndex].text,l=h.options[h.selectedIndex].text,m=i.options[i.selectedIndex].text,n=q(j,k,l,m);if(o(c,b),""==n){d=a("#profesional_"+c).is(":checked")?1:0,e=a("#practicante_"+c).is(":checked")?1:0;var p=a(this).parent().parent().parent(),r=a(this).attr("value"),s=p.find("#lugar_"+r).val(),t=p.find("#tema_"+c).val(),u=p.find("#objetivos_"+c).val(),v=p.find("#fecha_"+c).val(),w=j+":"+l,x=k+":"+m,y=p.find("#obindividual_"+c).val(),z=a("input[name='riesgo_individual_"+c+"']:checked").val();void 0==z&&(z="0");var A=p.find("#obfamiliar_"+c).val(),B=a("input[name='riesgo_familiar_"+c+"']:checked").val();void 0==B&&(B="0");var C=p.find("#obacademico_"+c).val(),D=a("input[name='riesgo_academico_"+c+"']:checked").val();void 0==D&&(D="0");var E=p.find("#obeconomico_"+c).val(),F=a("input[name='riesgo_economico_"+c+"']:checked").val();void 0==F&&(F="0");var G=p.find("#obuniversitario_"+c).val(),H=a("input[name='riesgo_universitario_"+c+"']:checked").val();void 0==H&&(H="0");var I=p.find("#observacionesGeneral_"+c).val();if(""==s||""==t||""==u)swal({title:"Debe ingresar los datos completamente",html:!0,type:"warning",confirmButtonColor:"#d51b23"});else if(""!=y&&0==z||""!=A&&0==B||""!=C&&0==D||""!=E&&0==F||""!=G&&0==H||""==y&&z>0||""==A&&B>0||""==C&&D>0||""==E&&F>0||""==G&&H>0)swal({title:"Debe ingresar correctamente los riesgos",html:!0,type:"warning",confirmButtonColor:"#d51b23"});else{var J=new Object;J.id=r,J.lugar=s,J.tema=t,J.objetivos=u,J.individual=y,J.individual_riesgo=z,J.familiar_desc=A,J.familiar_riesgo=B,J.academico=C,J.academico_riesgo=D,J.economico=E,J.economico_riesgo=F,J.vida_uni=G,J.vida_uni_riesgo=H,J.observaciones=I,J.revisado_practicante=e,J.revisado_profesional=d,J.fecha=v,J.hora_ini=w,J.hora_fin=x,a.ajax({type:"POST",data:{seguimiento:J,type:"actualizar_registro"},url:"../../../blocks/ases/managers/pilos_tracking/pilos_tracking_report.php",async:!1,success:function(a){"0"==a?swal({title:"error al actualizar registro",html:!0,type:"error",confirmButtonColor:"#d51b23"}):"1"==a?swal("¡Hecho!","El registro ha sido actualizado","success"):swal({title:"Debe ingresar correctamente los riesgos",html:!0,type:"warning",confirmButtonColor:"#d51b23"})},error:function(a){}})}}else swal({title:n,html:!0,type:"warning",confirmButtonColor:"#d51b23"})})}function k(b){a("body").on("click","span.btn-info.btn-lg.botonesSeguimiento.botonEditarSeguimiento",function(){var c=a(this).attr("value"),d=a(this).parent().parent().parent(),e=!1;"monitor_ps"==b?e=a("#profesional_"+c).is(":checked"):"practicante_ps"==b?a("input[name=practicante]").prop("disabled",!1):"profesional_ps"==b?a("input[name=profesional]").prop("disabled",!1):"sistemas"==b&&(a("input[name=profesional]").prop("disabled",!1),a("input[name=practicante]").prop("disabled",!1)),0==e?(d.find(".editable").removeAttr("readonly"),d.find(".botonesSeguimiento").toggleClass("ocultar"),d.find(".quitar-ocultar").toggleClass("ocultar"),d.find(".radio-ocultar").toggleClass("ocultar"),u(c),w(c)):swal("¡Advertencia!","No es posible editar el seguimiento, debido a que ya ha sido revisado por un profesional","warning")})}function l(b){a("body").on("click","span.btn.btn-info.btn-lg.botonBorrar",function(){var c=a(this).attr("value"),d=!1;"monitor_ps"==b&&(d=a("#profesional_"+y).is(":checked")),0==d&&swal({title:"¿Seguro que desea eliminar el registro?",text:"No podrás deshacer este paso",type:"warning",showCancelButton:!0,cancelButtonText:"No",confirmButtonColor:"#d51b23",confirmButtonText:"Si",closeOnConfirm:!1},function(){a.ajax({type:"POST",data:{id:c,type:"eliminar_registro"},url:"../../../blocks/ases/managers/pilos_tracking/pilos_tracking_report.php",async:!1,success:function(a){swal({title:a.title,html:!0,text:a.msg,type:a.type,confirmButtonColor:"#d51b23"}),setTimeout("document.location.reload()",500)},dataType:"json",cache:"false",error:function(a){}})})})}function m(b){a("body").on("click","span.btn.btn-info.btn-lg.botonesSeguimiento.botonCancelarSeguimiento",function(){var c=a(this).attr("value");"monitor_ps"==b||("practicante_ps"==b?a("input[name=practicante]").prop("disabled",!0):"profesional_ps"==b?a("input[name=profesional]").prop("disabled",!0):"sistemas"==b&&(a("input[name=profesional]").prop("disabled",!0),a("input[name=practicante]").prop("disabled",!0)));var d=a(this).parent().parent().parent();d.find(".editable").attr("readonly",!0),d.find(".botonesSeguimiento").toggleClass("ocultar"),d.find(".quitar-ocultar").toggleClass("ocultar"),d.find(".radio-ocultar").toggleClass("ocultar"),t(c)})}function n(){a("body").on("click",".limpiar",function(){var b=a(this).closest("div").attr("id").split("_"),c=b[2].split("div").pop();switch(b[1]){case"individual":a("#obindividual_"+c).val(""),v("riesgo_individual_",c);break;case"familiar":a("#obfamiliar_"+c).val(""),v("riesgo_familiar_",c);break;case"academico":a("#obacademico_"+c).val(""),v("riesgo_academico_",c);break;case"economico":a("#obeconomico_"+c).val(""),v("riesgo_economico_",c);break;case"universitario":a("#obuniversitario_"+c).val(""),v("riesgo_universitario_",c);break;default:alert("Dato invalido")}})}function o(b,c){var d=new Array,e=new Array,f=a("input:radio[name=riesgo_individual_"+b+"]:checked").val(),g=a("input:radio[name=riesgo_familiar_"+b+"]:checked").val(),h=a("input:radio[name=riesgo_academico_"+b+"]:checked").val(),i=a("input:radio[name=riesgo_economico_"+b+"]:checked").val(),j=a("input:radio[name=riesgo_universitario_"+b+"]:checked").val();"3"==f&&(d.push("Individual"),e.push(a("#obindividual_"+b).val())),"3"==g&&(d.push("Familiar"),e.push(a("#obfamiliar_"+b).val())),"3"==h&&(d.push("Académico"),e.push(a("#obacademico_"+b).val())),"3"==i&&(d.push("Económico"),e.push(a("#obeconomico_"+b).val())),"3"==j&&(d.push("Vida universitaria"),e.push(a("#obuniversitario_"+b).val()));var k=new Array;k.push({name:"function",value:"send_email"}),k.push({name:"id_student_moodle",value:c}),k.push({name:"id_student_pilos",value:b}),k.push({name:"risk_array",value:d}),k.push({name:"observations_array",value:e}),k.push({name:"date",value:a("#fecha_"+b).val()}),k.push({name:"url",value:window.location}),0!=d.length&&a.ajax({type:"POST",data:k,url:"../managers/pilos_tracking/send_risk_email.php",success:function(a){console.log(a)},dataType:"text",cache:"false",error:function(a){console.log(a)}})}function p(b,c){a("#periodos").change(function(){var d=a("#periodos").val();a.ajax({type:"POST",data:{id:d,instance:b,type:"actualizar_personas"},url:"../../../blocks/ases/managers/pilos_tracking/pilos_tracking_report.php",async:!1,success:function(b){if(a("#personas").empty(),a("#personas").select2({placeholder:"Seleccionar persona",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando.."}}}),"sistemas"==c){var d='<option value="">Seleccionar persona</option>';a("#personas").attr("selectedIndex","-1").find("option:selected").removeAttr("selected"),a("#personas").append(d+b)}},dataType:"text",cache:"false",error:function(a){alert("error al cargar personas")}})})}function q(a,b,c,d){var e="";return a>b?e+="* La hora final debe ser mayor a la inicial<br>":a==b&&(c>d?(isvalid=!1,e+="* La hora final debe ser mayor a la inicial<br>"):c==d&&(e+="* Las horas seleccionadas deben ser diferentes<br>")),e}function r(b){for(var c=new Date,d=c.getMinutes(),e=c.getHours(),f="",g=0;g<24;g++)g==e?(e<10&&(e="0"+e),f+='<option value="'+e+'" selected>'+e+"</option>"):f+=g<10?'<option value="0'+g+'">0'+g+"</option>":'<option value="'+g+'">'+g+"</option>";for(var h="",g=0;g<60;g++)g==d?(d<10&&(d="0"+d),h+='<option value="'+d+'" selected>'+d+"</option>"):h+=g<10?'<option value="0'+g+'">0'+g+"</option>":'<option value="'+g+'">'+g+"</option>";a("#h_ini_"+b).append(f),a("#m_ini_"+b).append(h),a("#h_fin_"+b).append(f),a("#m_fin_"+b).append(h),a("#seguimiento #m_fin").append(h)}function s(){a(document).ready(function(){a("input:radio").change(function(){var b=a(this).parent().parent().parent().attr("id"),c=a(this).attr("value");1==c?(a("#"+b).removeClass(),a("#"+b).addClass("table-info-pilos col-sm-12 riesgo_bajo")):2==c?(a("#"+b).removeClass(),a("#"+b).addClass("table-info-pilos col-sm-12 riesgo_medio")):3==c&&(a("#"+b).removeClass(),a("#"+b).addClass("table-info-pilos col-sm-12 riesgo_alto"))})})}function t(b){a("#titulo_fecha_"+b).hide(),a("#borrar_"+b).show(),a("#editar_"+b).show(),a("#enviar_"+b).show(),a("#hora_final_"+b).show(),a("#mod_hora_final_"+b).hide(),a("#hora_inicial_"+b).show(),a("#mod_hora_ini_"+b).hide()}function u(b){a("#borrar_"+b).hide(),a("#editar_"+b).hide(),a("#enviar_"+b).hide(),a("#hora_final_"+b).hide(),a("#hora_inicial_"+b).hide(),a("#titulo_fecha_"+b).show(),a("#mod_hora_final_"+b).show(),a("#mod_hora_ini_"+b).show();var c=a("#h_inicial_texto_"+b).val(),d=a("#h_final_texto_"+b).val(),e=c.split(":"),f=d.split(":");r(b),a("#h_ini_"+b+" option[value="+e[0]+"]").prop("selected",!0),a("#m_ini_"+b+" option[value="+e[1]+"]").prop("selected",!0),a("#h_fin_"+b+" option[value="+f[0]+"]").prop("selected",!0),a("#m_fin_"+b+" option[value="+f[1]+"]").prop("selected",!0)}function v(b,c){a("input:radio[name="+b+c+"]").parent().parent().parent().removeClass("riesgo_bajo"),a("input:radio[name="+b+c+"]").parent().parent().parent().removeClass("riesgo_medio"),a("input:radio[name="+b+c+"]").parent().parent().parent().removeClass("riesgo_alto");var d='"'+b.replace("#","")+c+'"';a("input:radio[name="+d+"]").each(function(a){this.checked=!1})}function w(b){a("#riesgo_individual_"+b).is(".riesgo_bajo")?a("input[name=riesgo_individual_"+b+"][value=1]").prop("checked","checked"):a("#riesgo_individual_"+b).is(".riesgo_medio")?a("input[name=riesgo_individual_"+b+"][value=2]").prop("checked","checked"):a("#riesgo_individual_"+b).is(".riesgo_alto")?a("input[name=riesgo_individual_"+b+"][value=3]").prop("checked","checked"):a("input[name=riesgo_individual_"+b+"][value=0]").prop("checked","checked"),a("#riesgo_familiar_"+b).is(".riesgo_bajo")?a("input[name=riesgo_familiar_"+b+"][value=1]").prop("checked","checked"):a("#riesgo_familiar_"+b).is(".riesgo_medio")?a("input[name=riesgo_familiar_"+b+"][value=2]").prop("checked","checked"):a("#riesgo_familiar_"+b).is(".riesgo_alto")?a("input[name=riesgo_familiar_"+b+"][value=3]").prop("checked","checked"):a("input[name=riesgo_familiar_"+b+"][value=0]").prop("checked","checked"),a("#riesgo_academico_"+b).is(".riesgo_bajo")?a("input[name=riesgo_academico_"+b+"][value=1]").prop("checked","checked"):a("#riesgo_academico_"+b).is(".riesgo_medio")?a("input[name=riesgo_academico_"+b+"][value=2]").prop("checked","checked"):a("#riesgo_academico_"+b).is(".riesgo_alto")?a("input[name=riesgo_academico_"+b+"][value=3]").prop("checked","checked"):a("input[name=riesgo_academico_"+b+"][value=0]").prop("checked","checked"),a("#riesgo_economico_"+b).is(".riesgo_bajo")?a("input[name=riesgo_economico_"+b+"][value=1]").prop("checked","checked"):a("#riesgo_economico_"+b).is(".riesgo_medio")?a("input[name=riesgo_economico_"+b+"][value=2]").prop("checked","checked"):a("#riesgo_economico_"+b).is(".riesgo_alto")?a("input[name=riesgo_economico_"+b+"][value=3]").prop("checked","checked"):a("input[name=riesgo_economico_"+b+"][value=0]").prop("checked","checked"),a("#riesgo_universitario_"+b).is(".riesgo_bajo")?a("input[name=riesgo_universitario_"+b+"][value=1]").prop("checked","checked"):a("#riesgo_universitario_"+b).is(".riesgo_medio")?a("input[name=riesgo_universitario_"+b+"][value=2]").prop("checked","checked"):a("#riesgo_universitario_"+b).is(".riesgo_alto")?a("input[name=riesgo_universitario_"+b+"][value=3]").prop("checked","checked"):a("input[name=riesgo_universitario_"+b+"][value=0]").prop("checked","checked")}var x=0,y=0,z="",A="";a(document).ready(function(){a(".se-pre-con").fadeOut("slow"),a("#reemplazarToogle").fadeIn("slow");for(var b="",c=window.location.search.split("&"),d=0;d<c.length;d++){var h=c[d].split("=");if("?instanceid"==h[0]||"instanceid"==h[0])var o=h[1]}a.ajax({type:"POST",data:{type:"getInfo",instance:o},url:"../../../blocks/ases/managers/pilos_tracking/pilos_tracking_report.php",async:!1,success:function(b){$data=a.parseJSON(b),z=$data.username,y=$data.id,A=$data.email,x=$data.rol,namerol=$data.name_rol},dataType:"text",cache:"false",error:function(a){swal({title:"error al obtener información del usuario, getInfo.",html:!0,type:"error",confirmButtonColor:"#d51b23"})}}),z="","monitor_ps"==namerol?b="monitor":"practicante_ps"==namerol?b="practicante":"profesional_ps"==namerol?b="profesional":"sistemas"==namerol&&(b="sistemas");var b=[];b.id=y,b.name=z,b.namerol=namerol,g(b),"practicante_ps"==namerol?(a("input[name=profesional]").prop("disabled",!0),a("input[name=practicante]").prop("disabled",!0),n(),k(namerol),m(namerol),l(namerol),j(y),s(),i(o),e(o,b)):"profesional_ps"==namerol?(a("input[name=practicante]").prop("disabled",!0),a("input[name=profesional]").prop("disabled",!0),n(),m(namerol),k(namerol),j(y),l(namerol),s(),i(o),e(o,b)):"monitor_ps"==namerol?(n(),k(namerol),m(namerol),l(namerol),j(y),s(),e(o,b)):"sistemas"==namerol&&(n(),k(namerol),m(namerol),l(namerol),j(y),s(),i(o),f(o))}),a(document).on("click",".dphpforms",function(c){c.preventDefault();var d=a(c.target).attr("class");if("btn btn-sm btn-danger btn-dphpforms-univalle"==d){var e=new FormData(this),f=a(this),g=f.attr("action");"procesador.php"==f.attr("action")&&(g="../managers/dphpforms/procesador.php"),a.ajax({type:"POST",url:g,data:e,cache:!1,contentType:!1,processData:!1,success:function(c){var d=JSON.parse(c);if(console.log(c),0==d.status){var e="";"Stored"==d.message?e="Almacenado":"Updated"==d.message&&(e="Actualizado"),b(),swal({title:"Información",text:e,type:"success"},function(){"Updated"==d.message&&a("#dphpforms-peer-record-"+a("#dphpforms_record_id").val()).stop().animate({backgroundColor:"rgb(175, 255, 173)"},400).animate({backgroundColor:"#f5f5f5"},4e3)}),a(".dphpforms-response").trigger("reset"),a("#modal_v2_edit_peer_tracking").fadeOut(300),a("#modal_v2_peer_tracking").fadeOut(300)}else if(d.status==-2){var e="";"Without changes"==d.message?e="No hay cambios que registrar":"Unfulfilled rules"==d.message&&(e="Revise los valores ingresados"),swal("Alerta",e,"warning")}else d.status==-1&&(console.log(c),swal("ERROR!","Oops!, informe de este error","error"))},error:function(a){console.log(a),swal("Error!","Oops!, informe de este error","error")}})}}),a(".dphpforms-peer-record").on("click",function(){var b=a(this).attr("data-record-id");d("seguimiento_pares",b),a("#modal_v2_edit_peer_tracking").fadeIn(300)})}}});