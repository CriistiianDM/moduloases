define(["jquery","block_ases/bootstrap","block_ases/tagging","block_ases/smart_wizard","block_ases/mustache"],function(e,t,a,i,n){return{init:function(){e(document).ready(function(){var t,a;function i(t,a){e.ajax({type:"POST",data:JSON.stringify({function:a,params:"1"}),url:"../managers/student_profile/studentprofile_api.php",success:function(e){var a=JSON.parse(e);for(var i in a)t.append("<option value='"+a[i].id+"'>"+Object.values(a[i])[1]+"</option>")},error:function(e){swal("Error","Error al comunicarse con el servidor, por favor inténtelo nuevamente.","error")}})}function n(t,a){e("#"+t).find("[name="+a+"]").on("click",function(){var a=e("#"+t+" .otro").parent().next();e(this).hasClass("otro")?a.attr("hidden",!1):a.attr("hidden",!0)})}e("#mostrar").on("click",function(){e(".select-registro").map(function(){return e(this).attr("id")}).get();i(e("#select_ciudad_nacimiento"),"get_ciudades"),i(e("#select_acompañamientos"),"get_otros_acompañamientos"),i(e("#s_excepcion"),"get_cond_excepcion"),i(e("#select_estado_civil"),"get_estados_civiles"),i(e("#select_sexo"),"get_sex_options"),i(e("#select_genero"),"get_generos"),i(e("#s_act_simultanea"),"get_act_simultaneas"),i(e("#select_etnia"),"get_etnias"),i(e("#s_tipo_documento"),"get_document_types"),i(e("#discapacidad"),"get_discapacities"),i(e("#select_pais_nacimiento"),"get_paises"),i(e("#select_barrio"),"get_barrios"),i(e("#select_ciudad"),"get_ciudades"),i(e("#select_programa"),"get_programas_academicos"),i(e("#select_pais_res"),"get_paises"),i(e("#select_barrio_procedencia"),"get_barrios"),i(e("#select_ciudad_procedencia"),"get_ciudades"),i(e("#s_tipo_documento_ingreso"),"get_document_types"),i(e("#select_sede"),"get_sedes"),i(e("#s_programa_1"),"get_programas_academicos"),i(e("#s_programa_2"),"get_programas_academicos"),i(e("#s_programa_3"),"get_programas_academicos"),i(e("#s_programa_4"),"get_programas_academicos"),n("set-permanencia","option"),n("set-desplazamiento","option"),n("set-certificado-discapacidad","option"),n("set-apoyo","option"),n("set-participacion","option"),n("set-salud","option"),n("set-orientacion","orientacion_sexual"),n("set-sexo","sexo"),n("set-identidad-gen","identidad_genero"),n("set-beca","beca"),(t=new Tagging(e("#deportes_tag"),e("#tags_deportes"),1,3)).createTag(),new Tagging(e("#tiempo_libre"),e("#tags_tiempo_libre")).createTag(),e("#modalExample").show()}),e(".closer").on("click",function(){e("#modalExample").hide()}),e("#smartwizard").smartWizard({selected:0,theme:"dots",autoAdjustHeight:!0,showStepURLhash:!1,lang:{next:"Siguiente",previous:"Anterior"}}),e(document).on("click",".remove_fila",function(){e(this).parent().parent().remove()}),e("#add_person_r").on("click",function(){!function(e){let t="";t+='<tr><td> <input  class="input_fields_general_tab"  type="text"/></td>',t+='<td> <input  class="input_fields_general_tab"  type="text" /></td>',t+='<td> <button class="btn btn-danger remove_fila" type="button" title="Eliminar persona" name="btn_delete_person" style="visibility:visible;"> X </button></td></tr>',e.find("tbody").append('<tr><td> <input  class="input_fields_general_tab"  type="text"/></td><td> <input  class="input_fields_general_tab"  type="text" /></td><td> <button class="btn btn-danger remove_fila" type="button" title="Eliminar persona" name="btn_delete_person" style="visibility:visible;"> X </button></td></tr>')}(e("#table_familia"))}),e(document).on("click","#guardar_info",function(){for(var i,n,o,r,s,c=e(".select-registro").map(function(){return e(this).attr("id")}).get(),d=e(".select-registro").map(function(){return e(this).next().attr("id")}).get(),_=0;_<c.length;_++)e("#"+d[_]).val(e("#"+c[_]+" option:selected").val());i="code"+e("#codigo_estudiantil").val(),e.ajax({type:"POST",data:JSON.stringify({function:"get_user",params:i}),url:"../managers/student_profile/studentprofile_api.php",success:function(e){var t=JSON.parse(e);a=t.id},error:function(e){swal("Error","Error al comunicarse con el servidor, por favor inténtelo nuevamente.","error")}}),n=t.getArr(),o=e("#modalExample .modal-body :input").serializeArray(),r=function(t){for(var a=[],i=t.find("tbody input").map(function(){return e(this).val()}).get(),n=0;n<i.length;n+=2){var o={nombre:i[n],rol:i[n+1]};a.push(o)}return a}(e("#table_familia")),s=e("#programa").val(),e.ajax({type:"POST",data:JSON.stringify({function:"save_data",params:[o,n,r,s,a]}),url:"../managers/student_profile/studentprofile_api.php",success:function(e){},error:function(e){swal("Error","Error al comunicarse con el servidor, por favor inténtelo nuevamente.","error")}})})})}}});