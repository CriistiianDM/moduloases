define(["jquery","block_ases/bootstrap","block_ases/tagging","block_ases/smart_wizard","block_ases/mustache","block_ases/sweetalert"],function(e,t,a,i,s){return{init:function(){e(document).ready(function(){function t(t,a){e.ajax({type:"POST",data:JSON.stringify({function:a,params:"1"}),url:"../managers/student_profile/studentprofile_api.php",success:function(e){var a=JSON.parse(e);for(var i in a)t.append("<option value='"+a[i].id+"'>"+Object.values(a[i])[1]+"</option>")},error:function(e){swal("Error","Error al comunicarse con el servidor, por favor inténtelo nuevamente.","error")}})}function a(t,a){e("#"+t).find("input").each(function(){switch(json_object={},e(this).attr("type")){case"text":if(e(this).is(":hidden")||""==e(this).val())break;json_object.key_input_text=e(this).attr("id"),json_object.val_input_text=e(this).val(),a.push(json_object);break;case"number":if(e(this).is(":hidden")||""==e(this).val())break;json_object.key_input_number=e(this).attr("id"),json_object.val_input_number=e(this).val(),a.push(json_object);break;case"radio":var t=function(e){var t={};if(e.is(":checked")){if(e.hasClass("otro")){var a=e.parent().next().find("input");return t.id=a.attr("id"),t.val=a.val(),t.type=a.attr("type"),t}return t.id=e.attr("id"),t.val=e.val(),t}return t.id="",t.val="",t}(e(this));if(""===t.id)break;"text"==t.type?(json_object.key_input_text=t.id,json_object.val_input_text=t.val):"number"==t.type?(json_object.key_input_number=t.id,json_object.val_input_number=t.val):(json_object.key_input=t.id,json_object.val_input=t.val),a.push(json_object);break;default:json_object.key_input=0,json_object.val_input=0}})}function i(t,a){e("#"+t).find("[name="+a+"]").on("click",function(){var a=e("#"+t+" .otro").parent().next();e(this).hasClass("otro")?a.attr("hidden",!1):a.attr("hidden",!0)})}e("#mostrar").on("click",function(){t(e("#select_ciudad_nacimiento"),"get_ciudades"),t(e("#select_acompañamientos"),"get_otros_acompañamientos"),t(e("#s_excepcion"),"get_cond_excepcion"),t(e("#select_estado_civil"),"get_estados_civiles"),t(e("#select_sexo"),"get_sex_options"),t(e("#select_genero"),"get_generos"),t(e("#s_act_simultanea"),"get_act_simultaneas"),t(e("#select_etnia"),"get_etnias"),t(e("#s_tipo_documento"),"get_document_types"),t(e("#s_discapacidad"),"get_discapacities"),t(e("#select_pais_nacimiento"),"get_paises"),t(e("#select_barrio"),"get_barrios"),t(e("#select_ciudad"),"get_ciudades"),t(e("#select_programa"),"get_programas_academicos"),t(e("#select_pais_res"),"get_paises"),t(e("#select_barrio_procedencia"),"get_barrios"),t(e("#select_ciudad_procedencia"),"get_ciudades"),t(e("#s_tipo_documento_ingreso"),"get_document_types"),t(e("#select_sede"),"get_sedes"),t(e("#s_programa_1"),"get_programas_academicos"),t(e("#s_programa_2"),"get_programas_academicos"),t(e("#s_programa_3"),"get_programas_academicos"),t(e("#s_programa_4"),"get_programas_academicos"),i("set-permanencia","option"),i("set-desplazamiento","option"),i("set-certificado-discapacidad","option"),i("set-apoyo","option"),i("set-participacion","option"),i("set-salud","option"),i("set-orientacion","orientacion_sexual"),i("set-sexo","sexo"),i("set-identidad-gen","identidad_genero"),i("set-beca","beca"),new Tagging(e("#deportes_tag"),e("#tags_deportes"),1,3).createTag(),new Tagging(e("#tiempo_libre"),e("#tags_tiempo_libre")).createTag(),e("#modalExample").show()}),e(".closer").on("click",function(){e("#modalExample").hide()}),e("#smartwizard").smartWizard({selected:0,theme:"dots",autoAdjustHeight:!0,showStepURLhash:!1,lang:{next:"Siguiente",previous:"Anterior"}}),e(document).on("click",".remove_fila",function(){e(this).parent().parent().remove()}),e("#add_person_r").on("click",function(){!function(e){let t="";t+='<tr><td> <input  class="input_fields_general_tab"  type="text"/></td>',t+='<td> <input  class="input_fields_general_tab"  type="text" /></td>',t+='<td> <button class="btn btn-danger remove_fila" type="button" title="Eliminar persona" name="btn_delete_person" style="visibility:visible;"> X </button></td></tr>',e.find("tbody").append('<tr><td> <input  class="input_fields_general_tab"  type="text"/></td><td> <input  class="input_fields_general_tab"  type="text" /></td><td> <button class="btn btn-danger remove_fila" type="button" title="Eliminar persona" name="btn_delete_person" style="visibility:visible;"> X </button></td></tr>')}(e("#table_familia"))}),e(document).on("click","#guardar_info",function(){for(var t,i,s,n,o,r,_,c,p=e(".select-registro").map(function(){return e(this).attr("id")}).get(),d=e(".select-registro").map(function(){return e(this).next().attr("id")}).get(),l=0;l<d.length;l++)e("#"+d[l]).val(e("#"+p[l]+" option:selected").val());t="code"+e("#codigo_estudiantil").val(),e.ajax({async:!1,type:"POST",data:JSON.stringify({function:"get_user",params:t}),url:"../managers/student_profile/studentprofile_api.php",success:function(e){var t,a=JSON.parse(e);t=a.id,t},error:function(e){swal("Error","Error al comunicarse con el servidor, por favor inténtelo nuevamente.","error")}}),i=[],s=[],n=[],o=[],r=[],_=e("#estrato").val(),c={},a("set-permanencia",i),a("set-beca",i),a("row_materiales",i),a("set-vive",i),a("row_madre_academic",s),a("row_padre_academic",n),a("row_otro_academic",o),c.key_input_text=e("#motivo_ingreso").attr("id"),c.val_input_text=e("#motivo_ingreso").val(),r.push(c),(c={}).key_input_text=e("#expecativas_carrera").attr("id"),c.val_input_text=e("#expecativas_carrera").val(),r.push(c),(c={}).key_input_text=e("#expectativas_graduarse").attr("id"),c.val_input_text=e("#expectativas_graduarse").val(),r.push(c),i.push(_),i.push(s),i.push(n),i.push(o),i.push(r)})})}}});