'use strict';define(['jquery','block_ases/bootstrap','block_ases/datatables','block_ases/sweetalert'],function(a){return{init:function init(){function e(k,l){a.ajax({type:'POST',data:{function:'insert_cohort',cohort:k,instance:l},url:'../managers/instance_management/instance_configuration_serverproc.php',success:function success(m){if(0==m.status)var n='Error',o='error';else var n='\xC9xito',o='success';swal(n,m.msg,o)},dataType:'json',cache:!1,async:!1,error:function error(m){console.log(m)}})}function f(k){a.ajax({type:'POST',data:{function:'load_cohorts',instance:k},url:'../managers/instance_management/instance_configuration_serverproc.php',success:function success(l){0==l.status?a('#div_cohorts_table').html('<center><span>La instancia no tiene cohortes asignadas</span></center>'):(a('#div_cohorts_table').html('<table id=\'cohorts_table\' class=\'col-sm-12\' style=\'width:100%\'></table>'),a('#cohorts_table').DataTable(l.msg))},dataType:'json',cache:!1,async:!1,error:function error(l){console.log(l)}})}function h(k){a.ajax({type:'POST',data:{function:'load_cohorts_without_assignment',instance:k},url:'../managers/instance_management/instance_configuration_serverproc.php',success:function success(l){if(0==l.status)swal('Error',l.msg,'error');else if(1==l.status){var m='',n=l.msg;0==n.length?m+='<option>No hay cohortes disponibles para asignar</option>':a.each(n,function(o){m+='<option value=\''+n[o].id+'\'>',m+=n[o].idnumber+' '+n[o].name+'</option>'}),a('#select_cohorts').html(m)}else swal('Error','Error al cargar las cohortes no asignadas. Por favor recargue la p\xE1gina. Si el problema persiste contacte al \xE1rea de sistemas.','error')},dataType:'json',cache:!1,async:!1,error:function error(l){console.log(l)}})}var j=function(){var k=location.search.split('&');for(x in k)if(0<=k[x].indexOf('instanceid')){var l=k[x].split('=');return l[1]}return 0}();a(document).ready(function(){f(j)}),a('#button_assign_cohort').on('click',function(){var k=a('#select_cohorts').val();e(k,j),f(j),h(j)})}}});