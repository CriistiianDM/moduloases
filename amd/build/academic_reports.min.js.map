{"version":3,"sources":["../src/academic_reports.js"],"names":["define","$","bootstrap","datatables","swal","init","document","ready","DataTable","on","table","colIndex","cell","index","column","username","attr","ajax","type","data","student","url","success","msg","title","text","showCancelButton","customClass","confirmButtonColor","confirmButtonText","closeOnConfirm","dataType","cache","error","console","log","course_id","location","search","window","open"],"mappings":"AAQAA,OAAM,+BAAC,CAAC,QAAD,CAAW,sBAAX,CAAmC,8BAAnC,CAAmE,wBAAnE,CAAD,CAA+F,SAASC,CAAT,CAAYC,CAAZ,CAAuBC,CAAvB,CAAmCC,CAAnC,CAAwC,CAE3I,MAAM,CAIJC,IAAI,CAAE,eAAW,CAEfJ,CAAC,CAACK,QAAD,CAAD,CAAYC,KAAZ,CAAkB,UAAU,CAE1BN,CAAC,CAAC,WAAD,CAAD,CAAeO,SAAf,GACAP,CAAC,CAAC,UAAD,CAAD,CAAcO,SAAd,EACD,CAJD,EAMAP,CAAC,CAACK,QAAD,CAAD,CAAYG,EAAZ,CAAe,OAAf,CAAwB,uBAAxB,CAAiD,UAAU,IAIrDC,CAAAA,CAAK,CAAGT,CAAC,CAAC,WAAD,CAAD,CAAeO,SAAf,EAJ6C,CAKrDG,CAAQ,CAAGD,CAAK,CAACE,IAAN,CAAW,IAAX,EAAiBC,KAAjB,GAAyBC,MALiB,CAOrDC,CAAQ,CAAGd,CAAC,CAAC,IAAD,CAAD,CAAQe,IAAR,CAAa,IAAb,CAP0C,CAgBzD,GAAe,CAAZ,EAAAL,CAAH,CAAiB,CAEfV,CAAC,CAACgB,IAAF,CAAO,CACLC,IAAI,CAAE,MADD,CAELC,IAAI,CAAE,CACJC,OAAO,CAAEL,CADL,CAEJG,IAAI,CAAE,YAFF,CAFD,CAOLG,GAAG,CAAE,8DAPA,CAQLC,OAAO,CAAE,iBAASC,CAAT,CAAa,CAEpBnB,CAAI,CAAC,CACHoB,KAAK,CAAE,gBADJ,CAEHN,IAAI,CAAE,MAFH,CAGHO,IAAI,CAAEF,CAHH,CAIHG,gBAAgB,GAJb,CAKHC,WAAW,CAAE,gBALV,CAMHC,kBAAkB,CAAE,SANjB,CAOHC,iBAAiB,CAAE,QAPhB,CAQHC,cAAc,GARX,CAAD,CASL,CAnBI,CAoBLC,QAAQ,CAAE,MApBL,CAqBLC,KAAK,CAAE,OArBF,CAsBLC,KAAK,CAAE,eAASV,CAAT,CAAa,CAClBW,OAAO,CAACC,GAAR,CAAYZ,CAAZ,CACD,CAxBI,CAAP,CA0BD,CACF,CA7CD,EAgDAtB,CAAC,CAACK,QAAD,CAAD,CAAYG,EAAZ,CAAe,OAAf,CAAwB,gBAAxB,CAA0C,UAAW,IAC/C2B,CAAAA,CAAS,CAAGnC,CAAC,CAAC,IAAD,CAAD,CAAQe,IAAR,CAAa,IAAb,CADmC,CAE/CK,CAAG,CAAG,wBAA0BgB,QAAQ,CAACC,MAAnC,CAA4C,aAA5C,CAA4DF,CAFnB,CAGnDG,MAAM,CAACC,IAAP,CAAYnB,CAAZ,CAAiB,QAAjB,CACD,CAJD,CAKD,CAjEG,CAmEP,CArEK,CAAN","sourcesContent":["/**\r\n * Academic report management\r\n * @module amd/src/academic_reports\r\n * @author Camilo José Cruz rivera\r\n * @copyright 2017 Camilo José Cruz Rivera <cruz.camilo@correounivalle.edu.co>\r\n * @license  http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\ndefine(['jquery', 'block_ases/bootstrap', 'block_ases/jquery.dataTables', 'block_ases/sweetalert2'], function($, bootstrap, datatables, swal){\r\n\r\n  return{\r\n    /**\r\n     *\r\n     */\r\n    init: function() {\r\n\r\n      $(document).ready(function(){\r\n        //Gets students and courses data tables\r\n        $(\"#students\").DataTable();\r\n        $(\"#courses\").DataTable();\r\n      });\r\n\r\n      $(document).on('click', '#students tbody tr td', function(){\r\n        // Assign to variables a web page, table (students), column index selected,\r\n        // student code (obtained by table), username (student id)\r\n        // var pagina = \"student_profile.php\";\r\n        var table = $(\"#students\").DataTable();\r\n        var colIndex = table.cell(this).index().column;\r\n        // var student_code = table.cell(table.row(this).index(), 0).data();\r\n        var username = $(this).attr('id');\r\n        // if (colIndex <= 2) {\r\n        //     $(\"#formulario\").each(function() {\r\n        //         this.reset;\r\n        //     });\r\n        //     document.getElementById(\"formulario\").reset();\r\n        //     location.href = pagina + location.search + \"&student_code=\" + student_code;\r\n        // }COMENTADO MIENTRAS ESTA LA FICHA ACADEMICA\r\n\r\n        if(colIndex == 3){\r\n\r\n          $.ajax({\r\n            type: \"POST\",\r\n            data: {\r\n              student: username,\r\n              type: \"load_loses\"\r\n            },\r\n            //Calls processing academic_reports_processing to execute ajax\r\n            url: \"../managers/academic_reports/academic_reports_processing.php\",\r\n            success: function(msg){\r\n              //Display all lose subjects\r\n              swal({\r\n                title: \"Notas Perdidas\",\r\n                type: \"info\",\r\n                text: msg,\r\n                showCancelButton: false,\r\n                customClass: 'notas_perdidas',\r\n                confirmButtonColor: \"#DD6B55\",\r\n                confirmButtonText: \"Cerrar\",\r\n                closeOnConfirm: true });\r\n            },\r\n            dataType: \"text\",\r\n            cache: \"false\",\r\n            error: function(msg){\r\n              console.log(msg);\r\n            },\r\n          });\r\n        }\r\n      });\r\n\r\n      //Opens a new tab to display a course report, given the course id and the location\r\n      $(document).on('click', '.curso_reporte', function() {\r\n        var course_id = $(this).attr('id');\r\n        var url = 'report_grade_book.php' + location.search + '&id_course=' + course_id;\r\n        window.open(url, '_blank');\r\n      });\r\n    }\r\n  };\r\n});"],"file":"academic_reports.min.js"}