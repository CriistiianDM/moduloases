define ("block_ases/not_assigned_students_main",["jquery","block_ases/bootstrap","block_ases/jquery.dataTables","block_ases/sweetalert","block_ases/dphpforms_form_renderer"],function(a){return{init:function init(){console.log("pass");var b=this,c=b.get_id_instance();b.load_not_assigned_students(c);a("#send_form_btn").on("click",function(){b.create_assign_table(c)});a(document).on("click","#tableAssign tbody tr td #student_assign",function(){var d=a("#tableAssign").DataTable(),e=d.row(a(this).parents("tr")).data(),f=e.username,g=a(this).closest("tr").find("#monitors").val(),h=a(this).closest("tr").find("#practicants").val(),i=!0,j="";if("-1"==g){i=!1;j+="* Debe elegir monitor a asignar \n"}if("-1"==h){i=!1;j+="*Debe elegir practicantes a asignar"}if(i){a.ajax({type:"POST",data:{type:"assign_student",monitor:g,practicant:h,instance:c,student:f},url:"../managers/ases_report/asesreport.php",success:function success(a){alert(a);b.load_not_assigned_students(c)},dataType:"text",cache:"false",error:function error(a){alert("Debe seleccionar solo un practicante y monitor a la vez");console.log("Error al asignar estudiantes"+a)}})}else{alert(j)}});a(document).on("click","#tableAssign tbody tr td",function(){var b=a("#tableAssign").DataTable(),c=b.cell(this).index().column;if(2>=c){a("#formulario").each(function(){this.reset});location.href="student_profile.php"+location.search+"&student_code="+b.cell(b.row(this).index(),0).data()}});a(document).on("change","#tableAssign tbody tr td select#practicants",function(){var b=a(this).val();a.ajax({type:"POST",data:{user:b,instance:c,source:"list_monitors"},url:"../managers/ases_report/asesreport.php",success:function success(b){a("select#monitors").find("option").remove().end();a("select#monitors").append(b)},dataType:"json",cache:"false",error:function error(){alert("Error al cargar monitores con practicante seleccionado")}})})},create_assign_table:function create_assign_table(b){var c=a("#form_general_report").serializeArray();c.push({name:"instance_id",value:b});a("#not_assigned_students").html("<img class=\"icon-loading\" src=\"../icon/loading.gif\"/>");a.ajax({type:"POST",data:c,url:"../managers/ases_report/load_not_assigned_students.php",success:function success(b){a("#not_assigned_students").html("");a("#not_assigned_students").fadeIn(1e3).append("<table id=\"tableAssign\" class=\"display\" cellspacing=\"0\" width=\"100%\"><thead> </thead></table>");a("#tableAssign").DataTable(b)},dataType:"json",cache:"false",error:function error(){alert("Error al cargar estudiantes no asignados")}})},load_not_assigned_students:function load_not_assigned_students(b){var c=a("#form_general_report").serializeArray();c.push({name:"instance_id",value:b});a("#not_assigned_students").html("<img class=\"icon-loading\" src=\"../icon/loading.gif\"/>");a.ajax({type:"POST",data:c,url:"../managers/ases_report/load_not_assigned_students.php",success:function success(b){a("#not_assigned_students").html("");a("#not_assigned_students").fadeIn(1e3).append("<table id=\"tableAssign\" class=\"display\" cellspacing=\"0\" width=\"100%\"><thead> </thead></table>");a("#tableAssign").DataTable(b)},dataType:"json",cache:"false",error:function error(){alert("Error al cargar estudiantes no asignados")}})},get_id_instance:function get_id_instance(){var a=location.search.split("&");for(var b in a){if(0<=a[b].indexOf("instanceid")){var c=a[b].split("=");return c[1]}}return 0}}});
//# sourceMappingURL=not_assigned_students_main.min.js.map
