{"version":3,"sources":["../src/discapacity_reports.js"],"names":["define","$","jszip","dataTables","autoFill","buttons","html5","flash","print","bootstrap","sweetalert","jqueryui","select2","Chart","loading_indicator","init","show","click","icon","children","hasClass","removeClass","addClass","target","data","css","hide","document","on","id","parents","find","html","get_others_data_discapacity","ready","ajax","type","load","url","success","msg","empty","append","DataTable","error","dataType","cache","async","failure","get_data_to_graphic","params","create_modal","data_html","fadeIn","outside","swal","title","text","showCancelButton","confirmButtonText","isConfirm","parent","fadeOut","create_graphic_discapacity","data_get","ctx","getElementById","getContext","defaults","polarArea","animation","animateScale","labels","datasets","backgroundColor","borderColor","borderWidth","options","display","fontSize","starAngle","animateRotate","showTooltips","showPercentages"],"mappings":"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","sourcesContent":["\n/**\n * Discapacity report\n * @module amd/src/historic_academic_reports\n * @author Juan Pablo Castro\n * @copyright 2018 Juan Pablo Castro<juan.castro.vasquez@correounivalle.edu.co>\n * @license  http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine([\n    'jquery',\n    'block_ases/jszip',\n    'block_ases/jquery.dataTables',\n    'block_ases/dataTables.autoFill',\n    'block_ases/dataTables.buttons',\n    'block_ases/buttons.html5',\n    'block_ases/buttons.flash',\n    'block_ases/buttons.print',\n    'block_ases/bootstrap',\n    'block_ases/sweetalert',\n    'block_ases/jqueryui',\n    'block_ases/select2', \n    'block_ases/Chart',\n    'block_ases/loading_indicator'\n], function ($, jszip, dataTables, autoFill, buttons, html5, flash, print, bootstrap, sweetalert, jqueryui, select2, Chart, loading_indicator) {\n    return {\n        init: function () {\n            loading_indicator.show();\n            $(\".bt_students_data\").click(function(){\n\n                var icon = $(this).children(\"span\");\n\n                if (icon.hasClass('glyphicon-chevron-right')) {\n                    icon.removeClass(\"glyphicon-chevron-right\");\n                    icon.addClass(\"glyphicon-chevron-down\");\n                } else {\n                    icon.addClass(\"glyphicon-chevron-right\");\n                    icon.removeClass(\"glyphicon-chevron-down\");\n                }\n\n                var target = $($(this).data('target'));\n                if (target.css('display') != \"none\") {\n                    target.hide(300);\n                } else {\n                    target.show(300);\n                }\n\n            });\n\n            $(document).on('click', '#tableDiscapacityReports tbody tr td', function () {\n                var id = \"\";\n\n                // Obtenemos la primer columna de la fila seleccionada\n                // seleccionada\n               id =  $(this).parents(\"tr\").find(\"td:first\").html();\n\n               // alert(valores);\n                get_others_data_discapacity(id);\n\n            });\n\n            $(document).ready(function () {\n                $.ajax({\n\n                    type: \"POST\",\n                    data: { load: 'loadTableDiscapacityReports' },\n                    url: \"../managers/discapacity_reports/discapacity_reports_api.php\",\n                    success: function (msg) {\n                        $(\"#div_table_discapacity_reports\").empty();\n                        $(\"#div_table_discapacity_reports\").append('<table id=\"tableDiscapacityReports\" class=\"display\" cellspacing=\"0\" width=\"100%\"><thead><thead></table>');\n                        var table = $(\"#tableDiscapacityReports\").DataTable(msg);\n                        $('#div_table_discapacity_reports').css('cursor', 'pointer');\n                        loading_indicator.hide();\n\n                    },\n                    error: function(msg){\n                        loading_indicator.hide();\n                    },\n                    dataType: \"json\",\n                    cache: false,\n                    async: true,\n\n                    failure: function (msg) { }\n                });\n                get_data_to_graphic();\n\n            });\n\n            function get_others_data_discapacity(id){\n                //Get one form switch id\n                $.ajax({\n                    type: \"POST\",\n                    data: { load: 'get_others_data_discapacity', params: id },\n                    url: \"../managers/discapacity_reports/discapacity_reports_api.php\",\n                    dataType: \"json\",\n                    cache: false,\n                    async: true,\n                    success: function (msg) {\n\n                        create_modal(msg);\n                    },\n                    failure: function (msg) { }\n                });\n            }\n\n            function create_modal(msg){\n                //Show beautifyJSON in modal\n                $(\"#div_JSONform\").empty();\n                let data_html = '';\n                data_html += '<div class = \"row\"> <div class= \"col-lg-8 col-md-8 col-sm-8 col-xs-8\"><strong> Dificultades permanentes en funciones:</strong> </div>';\n                data_html +=  '<div class= \"col-lg-4 col-md-4 col-sm-4 col-xs-4\">' + msg[\"cant_dificultad_permanente_funciones\"]+'</div></div>';\n                data_html += '<div class = \"row\"> <div class= \"col-lg-8 col-md-8 col-sm-8 col-xs-8\"><strong> Condiciones de salud a tener en cuenta:</strong> </div>';\n                data_html +=  '<div class= \"col-lg-4 col-md-4 col-sm-4 col-xs-4\">' + msg[\"cant_condicion_salud_organos\"]+'</div></div>';\n                data_html += '<div class = \"row\"> <div class= \"col-lg-8 col-md-8 col-sm-8 col-xs-8\"><strong> Necesidades diferentes:</strong> </div>';\n                data_html +=  '<div class= \"col-lg-4 col-md-4 col-sm-4 col-xs-4\">' + msg[\"cant_necesidades_situaciones\"]+'</div></div>';\n                data_html += '<div class = \"row\"> <div class= \"col-lg-8 col-md-8 col-sm-8 col-xs-8\"><strong> Factores de impacto (escenarios universitarios):</strong> </div>';\n                data_html += '<div class= \"col-lg-4 col-md-4 col-sm-4 col-xs-4\">' + msg[\"cant_factores_impacto\"]+'</div></div>';\n                data_html += '<div class = \"row\"> <div class= \"col-lg-8 col-md-8 col-sm-8 col-xs-8\"><strong> Posibilidades en actividades cotidianas:</strong> </div>';\n                data_html +=  '<div class= \"col-lg-4 col-md-4 col-sm-4 col-xs-4\">' + msg[\"cant_posibilidad_actividades\"]+'</div></div>';\n                $(\"#div_JSONform\").append(data_html);\n                $('#modal_JSON').fadeIn(300);\n            }\n\n\n            $('.mymodal-close').click(function () {\n                $(\"#modal_JSON\").hide();\n            });\n            $('.btn-danger-close').click(function () {\n                $(\"#modal_JSON\").hide();\n            });\n\n            $('.outside').click(function(){\n                var outside = $(this);\n                swal({\n                    title: 'Confirmación de salida',\n                    text: \"\",\n                    type: 'warning',\n                    showCancelButton: true,\n                    confirmButtonText: 'Salir'\n                  }, function(isConfirm) {\n                    if (isConfirm) {\n                        $(outside).parent('.mymodal').fadeOut(300);\n                        //console.log( $(this).parent('.mymodal') );\n                    }\n                  });\n                \n            });\n\n            function get_data_to_graphic(){\n                $.ajax({\n\n                    type: \"POST\",\n                    data: { load: 'getDataGraphic' },\n                    url: \"../managers/discapacity_reports/discapacity_reports_api.php\",\n                    success: function (msg) {\n                        //console.log(msg);\n                        create_graphic_discapacity(msg);\n\n                    },\n                    dataType: \"json\",\n                    cache: false,\n                    async: true,\n\n                    failure: function (msg) { }\n                });\n            }\n\n            function create_graphic_discapacity(data_get){\n                var ctx = document.getElementById('grafica_tipos').getContext('2d');\n                var data = {\n                    labels: [\"Cognitiva\",\"Psicosocial\",\"Física\",\"Sensorial\",\"Múltiple\", \"Otra\"],\n                    datasets: [{\n                        data: data_get,\n                        backgroundColor: [\n                            'rgba(255, 99, 132, 0.2)',\n                            'rgba(54, 162, 235, 0.2)',\n                            'rgba(255, 206, 86, 0.2)',\n                            'rgba(75, 192, 192, 0.2)',\n                            'rgba(153, 102, 255, 0.2)',\n                            'rgba(255, 159, 64, 0.2)'\n                        ],\n                        borderColor: [\n                            'rgba(255,99,132,1)',\n                            'rgba(54, 162, 235, 1)',\n                            'rgba(255, 206, 86, 1)',\n                            'rgba(75, 192, 192, 1)',\n                            'rgba(153, 102, 255, 1)',\n                            'rgba(255, 159, 64, 1)'\n                        ],\n                        borderWidth: 3\n                    }]\n                }\n            \n                var chart_options = {\n                     \n                    title: {\n                        display: true,\n                        text: 'Número de estudiantes por tipo de discapacidad',\n                        fontSize: 30\n                      },\n                    starAngle: 0,\n                    animation: {\n                        animateRotate: true,\n                        animateScale: true\n                    },\n                    showTooltips: true,\n                    showPercentages: true\n                };\n\n                Chart.defaults.polarArea.animation.animateScale = false;\n            \n                var radar_chart = new Chart(ctx, {\n                    type: 'pie',\n                    data: data,\n                    options: chart_options\n                }\n            );\n        } \n    }\n};\n});"],"file":"discapacity_reports.min.js"}