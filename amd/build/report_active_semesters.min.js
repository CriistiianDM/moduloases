'use strict';define(['jquery','core/notification','block_ases/global_grade_book','core/templates','block_ases/jquery.dataTables'],function(a){return{init:function init(f){function g(w,x){var y=[],z;for(z=0;z<x.length;z++)w.includes(x[z])&&y.push(z);return y}function h(w,x){a('#tableActiveSemesters tfoot th')[0].textContent='Total activos SRA',a('#tableActiveSemesters tfoot th.'+p).html(''),a('#tableActiveSemesters tfoot th.'+q).html(''),x.forEach(function(y){a('#tableActiveSemesters tfoot th.'+y).html(w[y])})}function k(w,x){return w.filter(function(y){return-1!==x.indexOf(y)}).length===x.length}function l(w){a.ajax({method:'POST',url:'../managers/report_active_semesters/report_active_semesters_api.php/'+m,data:{function:'data_table',params:{instance_id:m,cohort_id:w}},dataType:'json'}).done(function(z){var A=z.dataTable;s=z.semesters;var B=A.columns.map(function(C){return C.name});u=new t(s),u.init_from_data(A.data,s),console.log(u['2015A']),A.rowCallback=function(C,D){a(s).each(function(F,G){'SI'===D[G]&&a('td.'+G,C).addClass('no_active_semester')})},A.initComplete=function(){var C=A.columns.map(function(E){return E.name?E.name:null}),D=g(s,C);this.api().columns(D).every(function(){var E=this,F=a('<select><option value=""></option></select>').appendTo(a(E.header())).on('change',function(){var G=a.fn.dataTable.util.escapeRegex(a(this).val());E.search(G?'^'+G+'$':'',!0,!1).draw()});E.data().unique().sort().each(function(G){F.append('<option value="'+G+'">'+G+'</option>')})})},a.fn.dataTable.isDataTable('#tableActiveSemesters')&&(a('#div_table_report').html(''),a('#div_table_report').fadeIn(1e3).append('<table id="tableActiveSemesters" class="table" cellspacing="0" width="100%"></table>')),n=a('#tableActiveSemesters').DataTable(A),a('#tableActiveSemesters').append(a('<tfoot/>').append(a('#tableActiveSemesters thead tr').clone())),h(u,s),k(B,r)||console.error(' Las columnas dadas no coinciden con las columnas conocidas.','columnas daads:',B,'columnas conocidas: ',r)}).fail(function(){})}var m=f.instance_id,n=null,p='nombre',q='num_doc',r=['codigo',p,q],s=[],t=function(){function w(x){var y=this;x.forEach(function(z){y[z]=0})}return w.prototype.init_from_data=function(y,z){var A=this;y.forEach(function(B){z.forEach(function(C){'SI'===B[C]&&A[C]++})})},w}(),u=null;a('#cohorts').change(function(){var w=a('#cohorts option:selected').val();l(w)});var v=a('#cohorts option:selected').val();l(v)}}});