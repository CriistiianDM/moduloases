define(["jquery","block_ases/mustache","block_ases/loading_indicator"],function(e,s,t){return{init:function(o){var n=o[0],a=o[1];e("button[id^='btn-consulta-fichas-']").on("click",function(){if(e(this).hasClass("ases-info"))e(this).next().remove(),e(this).next().slideUp(500),e(this).removeClass("ases-info"),e(this).addClass("ases-danger"),e(this).html("Consultar");else{const o=event.path||event.composedPath();!function(o,n,a,r){t.show(),e.ajax({type:"POST",dataType:"json",data:JSON.stringify({function:"tracking_count",params:[o,n,a]}),url:"../managers/monitor_profile/monitor_profile_api.php",cache:"false",success:function(o){var n=o;0===n.status_code?e.ajax({url:"../templates/monitor_total_count.mustache",data:null,dataType:"text",cache:"false",async:"false",success:function(t){let o=e(s.render(t,n.data_response));e(`#count-${a}`).append(o).hide(),e(`#count-${a}`).slideDown(500)},error:function(){console.log("Cannot reach template.")},complete:function(){t.hide()}}):console.log("error",o)},error:function(e){console.log("error",e),swal("Error","Error al comunicarse con el servidor, por favor int√©ntelo nuevamente.","error")}})}(n,a,o[2].id),e(this).html("Ocultar"),e(this).removeClass("ases-danger"),e(this).addClass("ases-info")}})}}});