{"version":3,"sources":["../src/ases_graphic_reports.js"],"names":["define","$","jszip","pdfmake","dataTables","autoFill","buttons","html5","flash","print","bootstrap","sweetalert","jqueryui","select2","Chart","init","window","JSZip","graficas","secciones","i","length","on","event","id_button","currentTarget","id","split","getDataGraphicTable","target","document","getElementById","click","type","ases_status","is","icetex_status","program_status","ajax","data","cohort","val","instance_id","getIdinstancia","url","success","msg","createTable","createBarGraphic","createPieDoughnutGraphic","createRisksGraphic","dataType","cache","async","failure","empty","append","DataTable","type_chart","atributos","Object","keys","label","labelCantidad","labelsGrafica","cantidades","x","nombre","cantidad","replace","push","css","backgroundColors","borderColors","ctx","getContext","labels","datasets","backgroundColor","borderColor","borderWidth","texto","plugins","register","beforeDraw","c","chart","fillStyle","fillRect","width","height","options","elements","rectangle","responsive","legend","position","display","title","text","fontSize","scales","yAxes","ticks","categoryPercentage","barPercentage","xAxes","beginAtZero","maintainAspectRatio","datalabels","align","anchor","animation","duration","onProgress","onComplete","imagen","toDataURL","attr","update","type_graphic","chart_options","starAngle","showTooltips","showPercentages","animateRotate","animateScale","defaults","polarArea","nombres_riesgos","riesgos_bajos","riesgos_medios","riesgos_altos","sin_registro","riesgo","fontStyle","urlParameters","location","search","indexOf","intanceparameter"],"mappings":"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","sourcesContent":["// Standard license block omitted.\n/*\n * @package    block_ases\n * @copyright  ASES\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n/**\n * @module block_ases/ases_graphic_reports\n */\ndefine(['jquery',\n    'block_ases/jszip',\n    'block_ases/pdfmake',\n    'block_ases/jquery.dataTables',\n    'block_ases/dataTables.autoFill',\n    'block_ases/dataTables.buttons',\n    'block_ases/buttons.html5',\n    'block_ases/buttons.flash',\n    'block_ases/buttons.print',\n    'block_ases/bootstrap',\n    'block_ases/sweetalert2',\n    'block_ases/jqueryui',\n    'block_ases/select2', \n    'block_ases/Chart',\n    'block_ases/loading_indicator',\n    'block_ases/chartjs_plugin_datalabels'\n],\n    \n    function ($, jszip, pdfmake, dataTables, autoFill, buttons, html5, flash, print, bootstrap, sweetalert, jqueryui, select2, Chart, loading_indicator, chartjs_plugin_datalabels) {\n        \n        return {             \n            init: function () {\n                window.JSZip = jszip; \n                window.graficas = {};    //Objeto para guardar las gráficas de manera dinámica\n                const secciones = [\"programa\", \"facultad\", \"sexo\", \"edad\", \"condExcepcion\", \"riesgos\"];                                                \n                \n                for (i = 0; i < secciones.length; i++) {\n\n                    //Eventos para cargar tablas y gráficas una vez se abra cada panel\n                    $(\"#list-students-\"+secciones[i]+\"-panel\").on('click', function (event) {\n                        var id_button = String(event.currentTarget.id);\n                        var id = id_button.split('-')[2];\n                        getDataGraphicTable(id);\n                    });\n\n                    //Eventos para descargar grafico correspondiente una vez se presione el boton de descargar\n                    $('#save_btn_'+secciones[i]).on('click', function (event) {\n                        var id_button = String(event.target.id);\n                        var id = id_button.split('_')[2];\n                        document.getElementById('download_'+id).click();\n                    });\n                }\n\n                \n                //Eventos para actualizar tablas y gráficas cada vez que cambien los checkboxes de los filtros\n\n                $('#status_fields').on('change', function () {                    \n                    for (i = 0; i < secciones.length; i++) { \n                        \n                        if($(\"#\"+secciones[i]).length > 0){\n                            getDataGraphicTable(secciones[i]);\n                        }\n                    }\n                });\n               \n                //Eventos para actualizar tablas y gráficas cada vez que cambie el filtro de cohorte\n\n                $('#conditions').on('change', function () {\n                    for (i = 0; i < secciones.length; i++) { \n                        \n                        if($(\"#\"+secciones[i]).length > 0){\n                            getDataGraphicTable(secciones[i]);\n                        }\n                    }\n                });\n\n            }            \n        }\n\n        /**\n         * Funcion getDataGraphicTable\n         * Recibe un tipo de reporte y realiza una consulta AJAX para obtener los datos de la tabla y gráfica,\n         * y posteriormente crearlas.\n         * \n         * @param {*} type  tipo de reporte, posibles valores: \"programa\", \"facultad\", \"sexo\", \"edad\", \"condExcepcion\", \"riesgos\"\n         */\n\n        function getDataGraphicTable(type){\n\n            var ases_status = $(\"#ases_status\").is(\":checked\") ? 1 : 0;\n            var icetex_status = $(\"#icetex_status\").is(\":checked\") ? 1 : 0;\n            var program_status = $(\"#academic_program_status\").is(\":checked\") ? 1 : 0;\n\n            $.ajax({\n\n                type: \"POST\",\n                data: { type: type, cohort: $('#conditions').val(), ases_status: ases_status, icetex_status: icetex_status, program_status: program_status, instance_id: getIdinstancia() },\n                url: \"../managers/ases_report/asesreport_graphics_processing.php\",\n                success: function (msg) {                                   \n\n                    createTable(type, msg);\n\n                    //Se crea la gráfica con la función auxiliar correspondiente dependiendo del tipo de gráfica\n                    switch(type){\n                        case 'programa':                        \n                            createBarGraphic(type, msg.data, 'horizontalBar');\n                            break;\n                        case 'edad':                        \n                            createBarGraphic(type, msg.data, 'bar');\n                            break;\n                        case 'facultad':\n                            createPieDoughnutGraphic(type, msg.data, 'doughnut');\n                            break;\n                        case 'sexo':\n                            createPieDoughnutGraphic(type, msg.data, 'pie');\n                            break;\n                        case 'condExcepcion':\n                            createPieDoughnutGraphic(type, msg.data, 'doughnut');\n                            break;\n                        case 'riesgos':\n                            createRisksGraphic(msg.data)\n                            break;\n                    }                   \n                },\n                dataType: \"json\",\n                cache: false,\n                async: true,\n\n                failure: function (msg) { }\n            });\n        }\n\n        /**\n         * Función createTable\n         * Crea o actualiza la tabla de un reporte dependiendo de su tipo\n         * \n         * @param {*} type Tipo de tabla: programa, edad, facultad...\n         * @param {*} data \n         */\n\n        function createTable(type, data){\n            $(\"#div_table_\"+type).empty();\n            $(\"#div_table_\"+type).append('<table id=\"t_' + type + '\" class=\"table\" cellspacing=\"0\" width=\"100%\"><thead> </thead></table>');\n            $(\"#t_\"+type).DataTable(data); \n        }                \n        \n        /**\n         * Función createBarGraphic         * \n         * Se encarga de crear una gráfica de barras teniendo como parámetros:\n         * \n         * @param {*} type Tipo de gráfica: programa, edad, facultad...\n         * @param {*} data Información a mostrarse en la gráfica\n         * @param {*} type_chart Relacionado con la orientación de la gráfica de barras: 'bar' ó 'horizontalBar'\n         */ \n\n        function createBarGraphic(type, data, type_chart){\n\n            //Se preparan los nombres de los labels a mostrar en la gráfica\n            var atributos = Object.keys(data[0]);\n            var label = atributos[0];\n            var labelCantidad = atributos[1];            \n\n            var labelsGrafica = [], cantidades = [];\n            \n            for(var x in data){\n\n                nombre = data[x][label];\n                cantidad = data[x][labelCantidad];\n\n                nombre = nombre.replace(\"LICENCIATURA\", 'LIC.');\n                nombre = nombre.replace(/EDUCACIÓN/g, 'EDU.');\n                                                                                    \n                labelsGrafica.push(nombre);\n                cantidades.push(cantidad);               \n            }            \n\n            $('.horizontal-bar-chart-container').css('height', '1300px');\n            $('.horizontal-bar-chart-container').css('width', '100%');\n\n            $('.bar-chart-container').css('height', '800px');\n            $('.bar-chart-container').css('width', '100%');\n            \n            //Se asignan los colores de las barras de la gráfica, alternando los colores\n            var backgroundColors = [];\n            var borderColors = [];            \n            \n            for(var i=0; i<labelsGrafica.length; i++){\n                if(i%2 == 0){\n                    backgroundColors.push('rgba(255, 99, 132, 0.2)');\n                    borderColors.push('rgba(255, 99, 132, 1)');\n                }else{\n                    backgroundColors.push('rgba(130, 130, 130, 0.2)');\n                    borderColors.push('rgba(130, 130, 130, 1)');\n                }\n            }\n\n\n            //Se crea la gráfica en el elemento \"grafica_<type>\", ej: grafica_programa\n            var ctx = document.getElementById(\"grafica_\"+type).getContext('2d');\n            var data = {\n                labels: labelsGrafica,\n                datasets: [{\n                    label: \"Cantidad de Estudiantes\",\n                    data: cantidades,\n                    backgroundColor: backgroundColors,\n\t\t\t\t    borderColor: borderColors,                   \n                    borderWidth: 3\n                }]\n            }        \n            \n            //Se verifica que la gráfica no exista todavía, para crearla de 0\n            //Se maneja una convención para los nombres de la gráficas así: chart_<tipoGrafica>, ej: \"chart_programa\"\n            if(!window.graficas[\"chart_\"+type]){\n                \n                var texto = type;\n                if(type ==='condExcepcion'){\n                    texto = 'Condición de Excepción'\n                }\n\n                Chart.plugins.register({\n                    beforeDraw: function(c) {\n                        var ctx = c.chart.ctx;\n                        ctx.fillStyle = 'white';\n                        ctx.fillRect(0, 0, c.chart.width, c.chart.height);\n                    }\n                });\n\n                window.graficas[\"chart_\"+type] = new Chart(ctx, {               \n                    type: type_chart,\n                    data: data,\n                    options: {\n                        // Elements options apply to all of the options unless overridden in a dataset\n                        // In this case, we are setting the border of each horizontal bar to be 2px wide\n\n                        elements: {\n                            rectangle: {\n                                borderWidth: 2,                            \n                            }\n                        },\n                        backgroundColor: 'white',\n                        responsive: true,\n                        legend: {\n                            position: 'top',\n                            display: false\n                        },\n                        title: {\n                            display: true,\n                            text: 'Cantidad de Estudiantes por ' + texto,\n                            fontSize: 30\n                        },\n                        scales: {\n                            yAxes: [{\n                                ticks: {\n                                    display: true\n                                },\n                                categoryPercentage: 1.0,\n                                barPercentage: 1.0\n                            }]  ,\n                            xAxes: [{\n                                ticks: {\n                                    beginAtZero: true\n                                }\n                            }]\n                        },\n                        maintainAspectRatio: false,\n                        plugins: {\n                            datalabels: {\n                               display: true,\n                               align: 'center',\n                               anchor: 'center'\n                            }\n                         },\n\n                        animation: {\n                            duration: 0,\n                                onProgress: function(animation) {\n                            },\n                            onComplete: function(animation) {\n\n                                var imagen = document.getElementById(\"grafica_\"+type).toDataURL(\"image/jpeg\");\n                                $('#download_'+type).attr('href', imagen);\n                                $('#download_'+type).attr('download', 'reporte_'+type+'.jpg');\n                            }\n                        }\n                    }\n                }\n                );\n            }\n            else{ //Si la gráfica ya existe, se modifica la información en ella                \n                window.graficas[\"chart_\"+type][\"data\"] = data;\n                window.graficas[\"chart_\"+type].update();\n            }\n        }\n\n        /**\n         * Función createPieDoughnutGraphic\n         * Se encarga de preparar los datos y contruir un reporte gráfico tipo torta o dona a partir de éstos\n         * \n         * @param {*} type Tipo de gráfica: programa, edad, facultad...\n         * @param {*} data  Datos a mostrar\n         * @param {*} type_graphic 'doughnut' ó 'pie'\n         */\n\n\n        function createPieDoughnutGraphic(type, data, type_graphic){                     \n\n            var labelsGrafica = [], cantidades = [];\n            \n            for(var x in data){\n\n                nombre = data[x][\"nombre\"];\n                cantidad = data[x][\"cantidad\"];               \n                               \n                                                                                    \n                labelsGrafica.push(nombre);\n                cantidades.push(cantidad);               \n            }  \n            \n            var ctx = document.getElementById(\"grafica_\"+type).getContext('2d');\n                \n            var data = {\n                    labels: labelsGrafica,\n                    datasets: [{\n                        label: \"Cantidad de Estudiantes\",\n                        data: cantidades,\n                        backgroundColor: [\"#F56476\", \"#BFD1E5\", \"#FFEECF\", \"#C9A690\", \"#DF928E\", \n                                          \"#CECCCC\", \"#9191E9\", \"#99E1D9\", \"#FFA552\", \"#BFC8AD\", \"#0BAA6B\", \"#EDD892\"],\n                        borderColor: [\"#F56476\", \"#BFD1E5\", \"#FFEECF\", \"#C9A690\", \"#DF928E\", \n                                    \"#CECCCC\", \"#9191E9\", \"#99E1D9\", \"#FFA552\", \"#BFC8AD\", \"#0BAA6B\", \"#EDD892\"],\n                        borderWidth: 1\n                        \n                    }]\n            }\n\n            if(!window.graficas[\"chart_\"+type]){    //Si la gráfica no existe, se crea desde cero  \n\n                var texto = type;\n                if(type ==='condExcepcion'){\n                    texto = 'Condición de Excepción'\n                }\n\n                Chart.plugins.register({\n                    beforeDraw: function(c) {\n                        var ctx = c.chart.ctx;\n                        ctx.fillStyle = 'white';\n                        ctx.fillRect(0, 0, c.chart.width, c.chart.height);\n                    }\n                });\n            \n                var chart_options = {\n                    \n                    title: {\n                        display: true,\n                        text: 'Cantidad de estudiantes por ' + texto,\n                        fontSize: 30\n                    },\n                    legend: {\n                        display: true\n                    },\n                    starAngle: 0,\n                    showTooltips: true,\n                    showPercentages: true,\n\n                    animation: {\n                        animateRotate: true,\n                        animateScale: true,\n                        duration: 0,\n                        onProgress: function(animation) {\n                        },\n                        onComplete: function(animation) {\n\n                            var imagen = document.getElementById(\"grafica_\"+type).toDataURL(\"image/jpeg\");\n                            $('#download_'+type).attr('href', imagen);\n                            $('#download_'+type).attr('download', 'reporte_'+type+'.jpg');\n                        }\n                    }\n                };\n\n                Chart.defaults.polarArea.animation.animateScale = false;\n            \n                window.graficas[\"chart_\"+type] = new Chart(ctx, {\n                    type: type_graphic,\n                    data: data,\n                    options: chart_options\n                });\n\n            }else{ //Si la gráfica ya existe, se actualizan simplemente los datos\n                window.graficas[\"chart_\"+type][\"data\"] = data;\n                window.graficas[\"chart_\"+type].update();\n            }     \n        }\n\n        /**\n         * Función createRiskGraphic\n         * Se encarga de preparar los datos de la gráfica de riesgos y \n         * crear el reporte gráfico a partir de éstos         \n         * \n         * @param {*} data \n         */\n        \n        function createRisksGraphic(data){\n\n            //Arreglos separados para los labels y los valores de los riesgos            \n            var nombres_riesgos = [];\n            var riesgos_bajos = [];\n            var riesgos_medios = [];\n            var riesgos_altos = [];\n            var sin_registro = [];\n\n            //Se llenan los arreglos recién creados\n            for (riesgo in data){\n                nombres_riesgos.push(data[riesgo][\"riesgo\"]);\n                riesgos_bajos.push(data[riesgo][\"bajo\"]);\n                riesgos_medios.push(data[riesgo][\"medio\"]);\n                riesgos_altos.push(data[riesgo][\"alto\"]);\n                sin_registro.push(data[riesgo][\"no_registra\"]);\n            }         \n            \n            $('.risk-chart-container').css('width', '100%');\n\n            //Preparación de los datos\n            var ctx = document.getElementById(\"grafica_riesgos\").getContext('2d');\n            var data = {\n                labels: nombres_riesgos,\n                datasets: [{\n                    label: \"Riesgos bajos\",\n                    data: riesgos_bajos,\n                    backgroundColor: \"rgba(0, 179, 136, 0.4)\",\n\t\t\t\t    borderColor: \"rgba(0, 179, 136, 1)\",                   \n                    borderWidth: 2\n                },\n                {\n                    label: \"Riesgos Medios\",\n                    data: riesgos_medios,\n                    backgroundColor: \"rgba(255, 136, 17, 0.4)\",\n\t\t\t\t    borderColor: \"rgba(255, 136, 17, 1)\",                   \n                    borderWidth: 2\n                },\n                {\n                    label: \"Riesgos Altos\",\n                    data: riesgos_altos,\n                    backgroundColor: \"rgba(255, 86, 102, 0.4)\",\n\t\t\t\t    borderColor: \"rgba(255, 86, 102, 1)\",                   \n                    borderWidth: 2\n                },\n                {\n                    label: \"N.R.\",\n                    data: sin_registro,\n                    backgroundColor: \"rgba(132, 133, 134, 0.4)\",\n\t\t\t\t    borderColor: \"rgba(132, 133, 134, 1)\",                   \n                    borderWidth: 2\n                }\n                ]\n            }\n\n            if(!window.graficas[\"chart_riesgos\"]){ //Si la gráfica no existe, se crea desde cero\n\n                Chart.plugins.register({\n                    beforeDraw: function(c) {\n                        var ctx = c.chart.ctx;\n                        ctx.fillStyle = 'white';\n                        ctx.fillRect(0, 0, c.chart.width, c.chart.height);\n                    }\n                });\n\n\n                var chart_options = {\n                    \n                    title: {\n                        display: true,\n                        text: 'Cantidad de registros por riesgos',\n                        fontSize: 25\n                    },\n                    legend: {\n                        display: true,\n                        labels:{\n                            fontSize: 15,\n                            fontStyle: 'bold'\n                        }\n                    },\n                    starAngle: 0,\n                    scales: {\n                        xAxes: [{\n                            ticks: {\n                                fontSize: 15,\n                                fontStyle: 'bold'\n                            }\n                        }]\n                    },\n                    showTooltips: true,\n                    showPercentages: true,\n\n                    animation: {\n                        animateRotate: true,\n                        animateScale: true,\n                        duration: 0,\n                        onProgress: function(animation) {\n                        },\n                        onComplete: function(animation) {\n\n                            var imagen = document.getElementById(\"grafica_riesgos\").toDataURL(\"image/jpeg\");\n                            $('#download_riesgos').attr('href', imagen);\n                            $('#download_riesgos').attr('download', 'reporte_riesgos.jpg');\n                        }\n                    }\n                };\n\n                Chart.defaults.polarArea.animation.animateScale = false;\n            \n                window.graficas[\"chart_riesgos\"] = new Chart(ctx, {\n                    type: 'bar',\n                    data: data,\n                    options: chart_options\n                });\n\n            }else{ //Si la gráfica existe, se actualizan sus datos\n\n                window.graficas[\"chart_riesgos\"][\"data\"] = data;\n                window.graficas[\"chart_riesgos\"].update();\n            }\n        }        \n\n        function getIdinstancia() {\n            var urlParameters = location.search.split('&');           \n\n            for (x in urlParameters) {\n                if (urlParameters[x].indexOf('instanceid') >= 0) {\n                    var intanceparameter = urlParameters[x].split('=');\n                    return intanceparameter[1];\n                }\n            }\n            return 0;\n        }        \n    });\n"],"file":"ases_graphic_reports.min.js"}