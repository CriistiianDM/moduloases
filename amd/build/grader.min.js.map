{"version":3,"sources":["../src/grader.js"],"names":["define","Vue","VueRouter","Vuex","VueResource","VModal","VueFlex","VueToasted","loading_indicator","_","g_store","g_enums","g_utils","g_c_main","g_router","g_filters","g_const","use","default","dialog","iconPack","graderVueEvents","UPDATE_CATEGORY_OK","ADD_ELEMENT_OK","modalsEnum","EDIT_CATEGORY","EDIT_ITEM","ADD_ELEMENT","categoryElement","name","id","itemElement","partialExamElement","elementTypes","store","Store","SelectAggregation","component","template","props","data","aggregation","aggregations","SIMPLE","created","initialAggregation","methods","changeAggregation","$event","$emit","target","value","EditCategoryForm","categoryFullName","gradeTypeId","boton","computed","mapState","mapGetters","category","isCourseCategory","depth","mounted","fullname","setAggretation","updateCategory","$store","dispatch","actions","UPDATE_CATEGORY","aggregationcoef","then","catch","$toasted","show","duration","theme","CloseModalButton","modalName","type","String","required","closeButtonStyle","position","top","right","ModalAddElement","ModalEditCategory","AddElementForm","categoryElementTypeId","partialExamElementId","elementTypeId","elementName","elementAggregationCoef","parentCategory","selectedCategory","weigthedMeanOfGrades","PROMEDIO","isNumber","evt","window","event","charCode","which","keyCode","preventDefault","extractItem","itemname","parent_category","courseid","course","extractPartialExam","extractCategory","createItem","item","ADD_ITEM","icon","$router","go","createCoursePartialExam","partialExam","ADD_PARTIAL_EXAM","createCategory","payload","weight","ADD_CATEGORY","createElement","ItemMiniMenu","deleteItem","DELETE_ITEM","itemId","showDeleteItemDialog","$modal","title","text","buttons","handler","finally","hide","CategoryMiniMenu","categoryId","Number","showDelete","Boolean","allowEditName","style","display","gridTemplateColumns","gridColumnGap","categoryById","deleteCategory","DELETE_CATEGORY","showDeleteElementDialog","showEditDialog","commit","mutations","SET_SELECTED_CATEGORY_ID","showAddElementDialog","ThCourse","showMenu","editZoneStyles","courseCategoryId","courseLevel","object","CourseMiniMenu","ThCategory","length","node","document","innerHTML","content","textContent","catName","slice","catWeight","$options","filters","round","aggregationCoef","showFullName","getCatClass","catGetWeightClass","element","childSize","categoryChildSize","categoryGradeItem","items","grade_item","parent","weightedAggregation","catFocus","uptadeCatName","catBlur","updateCategoryName","catWFocus","updateWeight","catWBlur","saveAggregationCoef","UPDATE_ITEM","trunc","ItemActionsMini","ThStudentNames","lastNameDirectionAsc","firstNameDirectionAsc","stickyStyles","left","changeOrderToLastame","SET_STUDENT_SORT_METHOD","sortStudentMethods","LAST_NAME","order","sortDirection","ASC","changeOrderToName","FIRST_NAME","TrItems","orderedItemIds","getContent","innerText","replace","sufix","update","ThItemManualAndMod","contente","showMenuItems","getClass","getWeightClass","focus","uptadeContent","blur","saveNameChanges","wfocus","wblur","parseFloat","saveAggregationCoefChanges","mapActions","console","log","categoryid","ThItemCategory","categoryParent","iteminstance","itemName","ThStudent","students","student","studentById","studentId","studentFullName","lastname","firstname","TdGrade","updateGrade","UPDATE_GRADE","step","Math","pow","decimalPlaces","tabIndex","itemIndex","studentsCount","studentIndex","inputDisabled","itemtype","grade","grades","gradeId","itemid","finalGrade","get","finalgrade","set","TrGrades","studentGradeIdsOrdered","orderGradeIdsInItemSetOrder","gradeIds","itemOrderIds","filter","func","trun","router","routes","app","components","init","$mount","$","ready"],"mappings":"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","sourcesContent":["// @flow\r\n/*::\r\ntype Item = {\r\n  id: number,\r\n  itemname: number,\r\n  itemtype: boolean,\r\n  grademin: number,\r\n  grademax: number,\r\n  categoryid: string,\r\n  aggregationcoef: number,\r\n  itemtype: <manual|mod|category|course>,\r\n  iteminstance: number // In the case than itemtype is category, iteminstace have the category parent id\r\n};\r\n*/\r\n/*::\r\ntype AgregationEnum = {\r\n    SIMPLE: 0,\r\n    PONDERADO:10\r\n}\r\n */\r\n/*::\r\ntype Category = {\r\n  id: number,\r\n  fullname: string,\r\n  depth: number,\r\n  parent: number,\r\n  grade_item: number, //id of the item asociated to this category\r\n  aggregation: AgregationEnum\r\n};\r\n*/\r\n/*::\r\ntype Column = {\r\n    text: string\r\n}\r\n */\r\n\r\n\r\n/*::\r\ntype Student = {\r\n  id: number,\r\n  fistname: string,\r\n  username: string, // moodle user name, in other words, student code\r\n  lastname: string,\r\n  gradeIds: array\r\n};\r\n*/\r\n/*::\r\ntype Agregation = {\r\n  id: number,\r\n  name: string\r\n};\r\n*/\r\n/*::\r\ntype EditItemResponse = {\r\n    category: Category,\r\n    levels: Array\r\n}\r\n*/\r\n\r\n/*::\r\ntype Grade = {\r\n  id: number,\r\n  userid: number,\r\n  itemid: number,\r\n  rawgrademin: number,\r\n  rawgrademax: number,\r\n  finalgrade: string,\r\n};\r\n*/\r\n// Generate unique IDs for use as pseudo-private/protected names.\r\n// Similar in concept to\r\n// <http://wiki.ecmascript.org/doku.php?id=strawman:names>.\r\n//\r\n// The goals of this function are twofold:\r\n//\r\n// * Provide a way to generate a string guaranteed to be unique when compared\r\n//   to other strings generated by this function.\r\n// * Make the string complex enough that it is highly unlikely to be\r\n//   accidentally duplicated by hand (this is key if you're using `ID`\r\n//   as a private/protected name on an object).\r\n//\r\n// Use:\r\n//\r\n//     var privateName = ID();\r\n//     var o = { 'public': 'foo' };\r\n//     o[privateName] = 'bar';\r\n\r\ndefine([\r\n    'block_ases/vendor-vue',\r\n    'block_ases/vendor-vue-router',\r\n    'block_ases/vendor-vuex',\r\n    'block_ases/vendor-vue-resource',\r\n    'block_ases/vendor-vue-js-modal',\r\n    'block_ases/vendor-vue-flex',\r\n    'block_ases/vendor-vue-toasted',\r\n    'block_ases/vendor-loading-indicator',\r\n    'block_ases/vendor-lodash',\r\n    'block_ases/grader-store',\r\n    'block_ases/grader-enums',\r\n    'block_ases/grader-utils',\r\n    'block_ases/grader-component-main',\r\n    'block_ases/grader-router',\r\n    'block_ases/grader-filters',\r\n    'block_ases/grader-constants',\r\n    'block_ases/Chart',\r\n    'block_ases/vue-chartjs',\r\n    ], function (\r\n        Vue,\r\n        VueRouter,\r\n        Vuex,\r\n        VueResource,\r\n        VModal,\r\n        VueFlex,\r\n        VueToasted,\r\n        loading_indicator,\r\n        _,\r\n        g_store,\r\n        g_enums,\r\n        g_utils,\r\n        g_c_main,\r\n        g_router,\r\n        g_filters,\r\n        g_const,\r\n        g_chartjs,\r\n        g_vuechartjs,){\r\n    Vue.use(VueRouter);\r\n    Vue.use(Vuex);\r\n    Vue.use(VueResource);\r\n    Vue.use(VModal.default, { dialog: true });\r\n    Vue.use(VueFlex);\r\n    Vue.use(VueToasted.default, {iconPack: 'custom-class'});\r\n    var graderVueEvents = {\r\n        UPDATE_CATEGORY_OK: 'updateCategoryOK',\r\n        ADD_ELEMENT_OK: 'addElementOK'\r\n    };\r\n\r\n    var modalsEnum = {\r\n        EDIT_CATEGORY : 'edit-category',\r\n        EDIT_ITEM : 'edit-item',\r\n        ADD_ELEMENT: 'add-element'\r\n    };\r\n\r\n    const categoryElement = { name: 'CATEGORÍA', id: 0 };\r\n    const itemElement = { name: 'ÍTEM', id: 1 };\r\n    const partialExamElement = { name: 'PARCIAL', id: 2 };\r\n    const elementTypes = [categoryElement, itemElement, partialExamElement];\r\n\r\n    var store = new Vuex.Store(g_store.store);\r\n    var SelectAggregation = Vue.component('select-aggregation', {\r\n        template: `\r\n            <select \r\n            v-model=\"aggregation\" \r\n            @change=\"changeAggregation($event)\" \r\n            id=\"aggregation\">\r\n                <option \r\n                v-for=\"_aggregation in aggregations\"\r\n                v-bind:selected=\"_aggregation.id == aggregation\"\r\n                v-bind:value=\"_aggregation.id\"\r\n                >{{_aggregation.name}}</option>\r\n            </select>\r\n        `,\r\n        props: ['initialAggregation'],\r\n        data: function () {\r\n            return {\r\n                aggregation: g_enums.aggregations.SIMPLE,\r\n                aggregations: g_const.aggregations\r\n            }\r\n        },\r\n        created: function () {\r\n            this.aggregation = this.initialAggregation? this.initialAggregation: this.aggregation;\r\n        },\r\n        methods: {\r\n            changeAggregation($event) {\r\n                this.$emit('changeAggregation', $event.target.value);\r\n            }\r\n        }\r\n    });\r\n    var EditCategoryForm = Vue.component('edit-category-form', {\r\n            // language=HTML\r\n            template: `    \r\n                <div style=\"width: 600px; height: 300px;\" class=\"edit-category-form\">\r\n                    <form style=\"width: 570px; height: 270px;\">\r\n                        <h3 :style=\"{ 'text-align': 'center' }\">Editando Categoría:</h3>\r\n                        <br />\r\n                        <label for=\"categoryFullName\">\r\n                            Nombre de la categoria:  \r\n                        </label>\r\n                        <input :disabled=\"isCourseCategory\" id=\"categoryFullName\" v-model=\"categoryFullName\">\r\n                        <br />\r\n                        <label for=\"aggregation\">\r\n                        Tipo de calificación:\r\n                        </label>\r\n                        <select-aggregation \r\n                                v-bind:initialAggregation=\"category.aggregation\"\r\n                                v-on:changeAggregation=\"changeAggregation\">\r\n                        </select-aggregation>\r\n                        <br />\r\n                        <br />\r\n                        <div style=\"text-align:center; bottom:50px;\">\r\n                                <button :style=\"boton\" type=\"button\" v-on:click=\"updateCategory\">Guardar</button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            `\r\n        ,\r\n        data: function() {\r\n                return {\r\n                    categoryFullName: '',\r\n                    gradeTypeId: 0,\r\n                    aggregations: g_const.aggregations,\r\n                    boton: {\r\n                        'background-color': '#cd1f32',\r\n                        'color': 'white'\r\n                    }\r\n                }\r\n        },\r\n        computed: {\r\n            ...Vuex.mapState(['selectedCategoryId']),\r\n            ...Vuex.mapGetters({\r\n                category: 'selectedCategory'\r\n            }),\r\n            isCourseCategory: function () {\r\n                return this.category.depth == 1;\r\n            }\r\n        },\r\n        mounted: function () {\r\n          this.categoryFullName = this.category.fullname;\r\n\r\n          this.aggregation = this.category.aggregation;\r\n        },\r\n        methods: {\r\n                setAggretation(aggregation) {\r\n                  this.aggregation = aggregation;\r\n                },\r\n                changeAggregation(aggregation) {\r\n                    this.aggregation = aggregation;\r\n                },\r\n                updateCategory() {\r\n                    this.$store.dispatch(\r\n                        g_store.actions.UPDATE_CATEGORY,\r\n                        {\r\n                            ...this.category,\r\n                            fullname: this.categoryFullName,\r\n                            aggregation: this.aggregation,\r\n                            aggregationcoef: 50\r\n                        })\r\n                        .then(()=> {\r\n                            this.$emit(graderVueEvents.UPDATE_CATEGORY_OK);\r\n                        })\r\n                        .catch( ()=> {\r\n                            this.$toasted.show('Ha habido un error guardando la categoria', {duration: 3000, theme:'bubble'});\r\n                        });\r\n                }\r\n        }\r\n        }\r\n        );\r\n    var CloseModalButton = Vue.component('close-modal-button', {\r\n        template: `\r\n        <i class=\"fa fa-2x fa-times-circle\" v-bind:style=\"closeButtonStyle\"  @click=\"$modal.hide(modalName)\"></i>\r\n        `,\r\n        props: {\r\n            modalName: {\r\n                type: String,\r\n                required: true\r\n            }\r\n        },\r\n        data: function() {\r\n            return {\r\n                closeButtonStyle: {\r\n                    position: \"absolute\",\r\n                    top: \"10px\",\r\n                    right: \"10px\"\r\n                }\r\n            }\r\n        }\r\n    });\r\n    var ModalAddElement = Vue.component('modal-add-element', {\r\n            template: `\r\n       <modal \r\n        v-bind:name=\"modalName\"\r\n        v-bind:transition=\"'nice-modal-fade'\"\r\n        :draggable=\"true\"\r\n        >\r\n            <add-element-form v-on:addElementOK=\"$modal.hide(modalName)\"></add-element-form>\r\n            <close-modal-button v-bind:modalName=\"modalName\"></close-modal-button>\r\n       </modal>\r\n       `,\r\n        data: function() {\r\n                return {\r\n                    modalName: modalsEnum.ADD_ELEMENT\r\n                }\r\n        }\r\n        });\r\n    var ModalEditCategory = Vue.component('modal-edit-category',{\r\n       template: `<modal\r\n                    v-bind:name=\"modalName\" \r\n                    v-bind:transition=\"'nice-modal-fade'\"\r\n                    :draggable=\"true\"\r\n                    >\r\n                        <edit-category-form   v-on:updateCategoryOK=\"$modal.hide(modalName)\"></edit-category-form>\r\n                        <close-modal-button v-bind:modalName=\"modalName\"></close-modal-button>\r\n                   </modal>\r\n       `,\r\n        data: function () {\r\n           return {\r\n               modalName: modalsEnum.EDIT_CATEGORY\r\n           }\r\n        }\r\n    });\r\n\r\n    var AddElementForm = Vue.component('add-element-form',{\r\n       template: `\r\n        <div class=\"add-element-form\">\r\n           <form>\r\n           <h2 :style=\"{ 'text-align': 'center' }\">Añadir elemento</h2>\r\n           <label></label>\r\n           <select id=\"elementType\" v-model=\"elementTypeId\">\r\n               <option v-for=\"elementType in elementTypes\" v-bind:value=\"elementType.id\">\r\n                {{elementType.name}}\r\n               </option>\r\n           </select>\r\n            <br/>\r\n           <label :style=\"{ 'text-align': 'center' }\" for=\"elementName\">\r\n            Nombre del elemento:\r\n            </label>\r\n            <input id=\"elementName\" v-model=\"elementName\">\r\n           <br />\r\n            <template v-if=\"parentCategory.aggregation == weigthedMeanOfGrades\">\r\n                <label for=\"elementAggregationCoef\">\r\n                    Peso: \r\n                </label>\r\n                        <input \r\n            placeholder=\"Ingrese un valor entre 1 y 100\" \r\n            id=\"elementAggregationCoef\" \r\n            v-model=\"elementAggregationCoef\" type=\"number\"\r\n            v-on:keypress=\"isNumber($event)\">\r\n            </template>\r\n            <br/>\r\n            <template v-if=\"elementTypeId === categoryElementTypeId || elementTypeId === partialExamElementId\">\r\n                <label >\r\n                    Tipo de agregación\r\n                </label>\r\n                <select-aggregation\r\n                    v-bind:changeAggregation=\"changeAggregation\"\r\n                />\r\n            </template>\r\n            <br />\r\n            <div style=\"text-align:center\">\r\n                <button :style=\"boton\" type=\"button\" v-on:click=\"createElement()\">Añadir</button>\r\n            </div>\r\n           </form>\r\n       </div>\r\n       `,\r\n        data : function () {\r\n           return {\r\n               boton: {\r\n                   'background-color': '#cd1f32',\r\n                   'color': 'white'\r\n               },\r\n               elementTypes: elementTypes,\r\n               categoryElementTypeId: categoryElement.id,\r\n               partialExamElementId: partialExamElement.id,\r\n               elementTypeId: itemElement.id,\r\n               elementName: '',\r\n               aggregation: g_enums.aggregations.SIMPLE,\r\n               elementAggregationCoef: ''\r\n           }\r\n        },\r\n        computed: {\r\n            ...Vuex.mapState(['selectedCategoryId', 'course']),\r\n            ...Vuex.mapGetters(['selectedCategory']),\r\n            parentCategory: function () {\r\n                return this.selectedCategory;\r\n            },\r\n            weigthedMeanOfGrades: function () {\r\n                return g_enums.aggregations.PROMEDIO;\r\n            }\r\n        },\r\n        methods: {\r\n            isNumber: function(evt) {\r\n                evt = (evt) ? evt : window.event;\r\n                var charCode = (evt.which) ? evt.which : evt.keyCode;\r\n                if ((charCode > 31 && (charCode < 48 || charCode > 57)) && charCode !== 46) {\r\n                    evt.preventDefault();\r\n                } else {\r\n                    return true;\r\n                }\r\n            },\r\n           changeAggregation(aggregation) {\r\n             this.aggregation = aggregation;\r\n           },\r\n            extractItem() {\r\n               return {\r\n                   itemname: this.elementName,\r\n                   aggregationcoef: this.elementAggregationCoef,\r\n                   parent_category: this.parentCategory.id,\r\n                   courseid: this.course.id,\r\n               };\r\n            },\r\n            extractPartialExam() {\r\n                return {\r\n                    itemname: this.elementName,\r\n                    aggregationcoef: this.elementAggregationCoef,\r\n                    parent_category: this.parentCategory.id,\r\n                    courseid: this.course.id,\r\n                    aggregation: this.aggregation\r\n                };\r\n            },\r\n            extractCategory() {\r\n              return {\r\n                fullname: this.elementName,\r\n                courseid: this.course.id,\r\n                parent_category: this.parentCategory.id,\r\n                aggregation: this.aggregation\r\n              };\r\n            },\r\n            createItem() {\r\n                const item = this.extractItem();\r\n                this.$store.dispatch(g_store.actions.ADD_ITEM, item)\r\n                    .then(()=> {\r\n                        this.$emit(graderVueEvents.ADD_ELEMENT_OK);\r\n                        this.$toasted.show(\r\n                            `Se ha añadido el item '${item.itemname}'`,\r\n                            { duration : 3000, icon: 'fa fa-check'});\r\n                        this.$router.go();\r\n                    })\r\n                    .catch(() => {\r\n                        this.$toasted.show(\r\n                            'Ha ocurrido un error guardando el nuevo item.',\r\n                            {duration: 3000, theme: 'bubble'}\r\n                        )\r\n                    })\r\n            },\r\n            /* examen parcial */\r\n            createCoursePartialExam() {\r\n                const partialExam = this.extractPartialExam();\r\n                this.$store.dispatch(g_store.actions.ADD_PARTIAL_EXAM,  partialExam)\r\n                    .then(()=> {\r\n                        this.$emit(graderVueEvents.ADD_ELEMENT_OK);\r\n                        this.$toasted.show(\r\n                            `Se ha añadido el parcial '${partialExam.itemname}'`,\r\n                            { duration : 3000, icon: 'fa fa-check'});\r\n                        this.$router.go();\r\n                    })\r\n                    .catch(() => {\r\n                        this.$toasted.show(\r\n                            'Ha ocurrido un error guardando el nuevo parcial.',\r\n                            {duration: 3000, theme: 'bubble'}\r\n                        )\r\n                    })\r\n            },\r\n            createCategory() {\r\n              const category = this.extractCategory();\r\n              const payload = {category, weight: this.elementAggregationCoef};\r\n              this.$store.dispatch(g_store.actions.ADD_CATEGORY, payload)\r\n                  .then(()=>{\r\n                      this.$emit(graderVueEvents.ADD_ELEMENT_OK);\r\n                      this.$toasted.show(\r\n                          `Se ha añadido la categoria '${category.fullname}'`,\r\n                          { duration : 3000, icon: 'fa fa-check'});\r\n                      this.$router.go();\r\n                  })\r\n                  .catch(() => {\r\n                      this.$toasted.show(\r\n                          'Ha ocurrido un error guardando la nueva categoria.',\r\n                          {duration: 3000, theme: 'bubble'}\r\n                      )\r\n                  })\r\n            },\r\n           createElement() {\r\n               if (this.elementTypeId === itemElement.id) {\r\n                    this.createItem();\r\n               } else if(this.elementTypeId === categoryElement.id) {\r\n                   this.createCategory();\r\n               } else if(this.elementTypeId === partialExamElement.id) {\r\n                   this.createCoursePartialExam();\r\n               }\r\n           }\r\n        }\r\n\r\n    });\r\n    var ItemMiniMenu = Vue.component('item-mini-menu', {\r\n        template: `\r\n                <div>\r\n                    <i class=\"fa fa-trash\" v-on:click=\"showDeleteItemDialog()\"></i>\r\n                </div>\r\n            `,\r\n            props: ['itemId'],\r\n            methods: {\r\n                deleteItem(){\r\n                    return this.$store.dispatch(g_store.actions.DELETE_ITEM, this.itemId)\r\n                        .then(()=> {\r\n                            this.$toasted.show('Se ha borrado el item', {duration: 3000});\r\n                            this.$router.go();\r\n                        })\r\n                        .catch(()=> {\r\n                            this.$toasted.\r\n                            show('Ha habido un error al borrar el item, no se ha borrado', {duration: 3000, theme:'bubble'});\r\n                        });\r\n                },\r\n                showDeleteItemDialog() {\r\n                    this.$modal.show('dialog', {\r\n                        title: 'Eliminación de item',\r\n                        text: 'Estas a punto de eliminar un item',\r\n                        buttons: [\r\n                            {\r\n                                title: 'Borrar',\r\n                                handler: () => {\r\n                                    this.deleteItem()\r\n                                        .finally(()=>this.$modal.hide('dialog'));\r\n                                }\r\n                            },\r\n                            {\r\n                                title: 'Cancelar'\r\n                            }\r\n                        ]\r\n                    })\r\n                },\r\n                }\r\n            }\r\n        );\r\n    var CategoryMiniMenu = Vue.component('category-mini-menu', {\r\n            template: `\r\n                <div class =\"category-mini-menu\" v-bind:style=\"style\">\r\n                    <i class=\"fa fa-edit\" v-on:click=\"showEditDialog\"></i>\r\n                    <i class=\"fa fa-plus\" v-on:click=\"showAddElementDialog\"></i>\r\n                    <i class=\"fa fa-trash\" v-show=\"showDelete\"\" v-on:click=\"showDeleteElementDialog\"></i>\r\n                </div>\r\n            `,\r\n        props: {\r\n            categoryId: [Number, String],\r\n            showDelete : {\r\n                type: Boolean,\r\n                required: false,\r\n                default: true\r\n            },\r\n            allowEditName : {\r\n                type: Boolean,\r\n                required: false,\r\n                default: true\r\n            }\r\n        },\r\n        data: function () {\r\n                return {\r\n                    style: {\r\n                        display: \"grid\",\r\n                        gridTemplateColumns: \"repeat(3, max-content)\",\r\n                        gridColumnGap: \"8px\"\r\n                    }\r\n                }\r\n        },\r\n        computed: {\r\n                ...Vuex.mapGetters([\r\n                    'categoryById'\r\n                ]),\r\n            category: function () {\r\n                    return this.categoryById(this.categoryId);\r\n                },\r\n        },\r\n        methods: {\r\n            deleteCategory(){\r\n              return this.$store.dispatch(g_store.actions.DELETE_CATEGORY, this.categoryId)\r\n                  .then(()=> {\r\n                      this.$toasted.show('Se ha borrado la categoria', {duration: 3000});\r\n                      this.$router.go();\r\n                  })\r\n                  .catch(()=> {\r\n                      this.$toasted.\r\n                      show('Ha habido un error al borrar la categoria, no se ha borrado', {duration: 3000, theme:'bubble'});\r\n                  });\r\n            },\r\n            showDeleteElementDialog() {\r\n                this.$modal.show('dialog', {\r\n                    title: 'Eliminación de categoria',\r\n                    text: 'Estas a punto de eliminar una categoria',\r\n                    buttons: [\r\n                        {\r\n                            title: 'Borrar',\r\n                            handler: () => {\r\n                                this.deleteCategory()\r\n                                    .finally(()=>this.$modal.hide('dialog'));\r\n                            }\r\n                        },\r\n                        {\r\n                            title: 'Cancelar'\r\n                        }\r\n                    ]\r\n                })\r\n            },\r\n            showEditDialog() {\r\n                this.$store.commit(\r\n                    g_store.mutations.SET_SELECTED_CATEGORY_ID,\r\n                    this.category.id);\r\n                this.$modal.show(modalsEnum.EDIT_CATEGORY);\r\n            },\r\n            showAddElementDialog() {\r\n                this.$store.commit(\r\n                    g_store.mutations.SET_SELECTED_CATEGORY_ID,\r\n                    this.category.id);\r\n                this.$modal.show(modalsEnum.ADD_ELEMENT);\r\n            }\r\n        }\r\n        }\r\n        );\r\n        var ThCourse = Vue.component ('th-course', {\r\n            template: `\r\n            <th \r\n            v-bind:colspan=\"colspan\"\r\n            @mouseover=\"showMenu = true\"\r\n            @mouseout=\"showMenu = false\"\r\n            >\r\n           \r\n                <flex-row align-v=\"center\" v-bind:style=\"editZoneStyles\" >\r\n                    <span class=\"gradeitemheader\">        \r\n                    {{course.fullname}}       \r\n                    </span>\r\n                    <category-mini-menu v-bind:showDelete=\"false\" v-bind:categoryId=\"category.id\"  v-show=\"showMenu\"></category-mini-menu>\r\n                </flex-row> \r\n                </th>\r\n            </th>\r\n       `,\r\n            props: ['colspan'],\r\n            data: function () {\r\n                return {\r\n                    showMenu: false,\r\n                    editZoneStyles: {\r\n                        display: 'grid',\r\n                        gridTemplateColumns: 'repeat(2, max-content)',\r\n                        gridColumnGap: '5px'\r\n                    }\r\n                }\r\n            },\r\n            computed: {\r\n                ...Vuex.mapState(['course']),\r\n                ...Vuex.mapGetters(['courseLevel', 'categoryById']),\r\n                courseCategoryId: function () {\r\n                    return this.courseLevel.object.id;\r\n                },\r\n                category: function () {\r\n                    return this.categoryById(this.courseCategoryId)\r\n                }\r\n            }\r\n\r\n        });\r\n        var CourseMiniMenu = Vue.component('course-mini-menu', {\r\n                template: `\r\n                <div v-bind:style=\"style\">\r\n                    <i class=\"fa fa-plus\" v-on:click=\"showAddElementDialog\"></i>\r\n                </div>\r\n            `,\r\n                props: ['categoryId'],\r\n                data: function () {\r\n                    return {\r\n                        style: {\r\n                            display: \"grid\",\r\n                            gridTemplateColumns: \"repeat(3, max-content)\",\r\n                            gridColumnGap: \"8px\"\r\n                        }\r\n                    }\r\n                },\r\n                computed: {\r\n                    ...Vuex.mapGetters([\r\n                        'categoryById'\r\n                    ]),\r\n                    category: function () {\r\n                        return this.categoryById(this.categoryId);\r\n                    },\r\n                },\r\n                methods: {\r\n                    showAddElementDialog() {\r\n                        this.$store.commit(\r\n                            g_store.mutations.SET_SELECTED_CATEGORY_ID,\r\n                            this.category.id);\r\n                        this.$modal.show(modalsEnum.ADD_ELEMENT);\r\n                    }\r\n                }\r\n            }\r\n        );\r\n    var ThCategory = Vue.component('th-category', {\r\n       template : `    \r\n            <th\r\n            :title=\"category.fullname\"\r\n            class=\"th-category\"\r\n            @mouseover=\"showMenu = true\"\r\n            @mouseout=\"showMenu = false\" \r\n            v-bind:colspan=\"childSize\" >\r\n                <flex-row align-v=\"center\"  v-bind:style=\"editZoneStyles\">\r\n                    <input v-model=\"catName\" :class=\"getCatClass\" @focus=\"catFocus\" @blur=\"catBlur\" @keyup.enter=\"$event.target.blur()\"></input>\r\n                    <input\r\n                     v-model=\"catWeight\" \r\n                     :class=\"catGetWeightClass\"\r\n                     @focus=\"catWFocus\" @blur=\"catWBlur\"\r\n                     @keyup.enter=\"$event.target.blur()\"\r\n                     v-if=\"parentCategory.aggregation == weightedAggregation\"\r\n                     v-on:keypress=\"isNumber($event)\"\r\n                     ></input>\r\n                    <category-mini-menu v-bind:categoryId=\"category.id\" v-show=\"showMenu\"></category-mini-menu>\r\n                </flex-row>\r\n            </th>\r\n       `,\r\n        created() {\r\n            let text = this.category.fullname;\r\n            let length = 30;\r\n            let clamp = '...';\r\n            let node = document.createElement('div');\r\n            node.innerHTML = text;\r\n            let content = node.textContent;\r\n            this.catName = content.length > length ? content.slice(0, length) + clamp : content;\r\n            this.catWeight = this.$options.filters.round(this.aggregationCoef, 2) + '%';\r\n        },\r\n        props: ['element'],\r\n        data: function() {\r\n           return {\r\n               showFullName: false,\r\n               getCatClass: 'catnotfocused',\r\n               catGetWeightClass: 'catwnotfocused',\r\n               catName: \"\",\r\n               catWeight: \"\",\r\n               editZoneStyles: {\r\n                   'max-height': '45px'\r\n               },\r\n               showMenu: false\r\n           }\r\n        },\r\n        computed: {\r\n            ...Vuex.mapGetters([\r\n                'categoryById',\r\n                'categoryChildSize'\r\n            ]),\r\n            ...Vuex.mapState(['items']),\r\n            category: function() {\r\n                return this.categoryById(this.element.object.id);\r\n            },\r\n            childSize: function () {\r\n                return this.categoryChildSize(this.category.id);\r\n            },\r\n            categoryGradeItem: function () {\r\n              return this.items[this.category.grade_item];\r\n            },\r\n            aggregationCoef: function () {\r\n              return this.categoryGradeItem.aggregationcoef;\r\n            },\r\n            parentCategory: function() {\r\n                return this.categoryById(this.category.parent);\r\n            },\r\n            weightedAggregation : function () {\r\n                return g_enums.aggregations.PROMEDIO\r\n            }\r\n        },\r\n        methods: {\r\n            isNumber: function(evt) {\r\n                evt = (evt) ? evt : window.event;\r\n                var charCode = (evt.which) ? evt.which : evt.keyCode;\r\n                if ((charCode > 31 && (charCode < 48 || charCode > 57)) && charCode !== 46) {\r\n                    evt.preventDefault();\r\n                } else {\r\n                    return true;\r\n                }\r\n            },\r\n            catFocus: function (){\r\n                //this.length = 17;\r\n                this.getCatClass = 'catwithfocus';\r\n                this.showFullName = true;\r\n                this.uptadeCatName();\r\n            },\r\n            catBlur: function (){\r\n                //this.length = 19;\r\n                this.getCatClass = 'catnotfocused';\r\n                this.showFullName = false;\r\n                this.updateCategoryName();\r\n            },\r\n            catWFocus: function (){\r\n                this.catGetWeightClass = 'catwwithfocus';\r\n                this.showFullName = true;\r\n                this.updateWeight();\r\n            },\r\n            catWBlur: function (){\r\n                this.catGetWeightClass = 'catwnotfocused';\r\n                this.showFullName = false;\r\n                this.saveAggregationCoef();\r\n            },\r\n            updateCategoryName: function () {\r\n             this.$store.dispatch(\r\n                 g_store.actions.UPDATE_CATEGORY,\r\n                 {...this.category, fullname: this.catName})\r\n           },\r\n            saveAggregationCoef: function() {\r\n                    this.$store.dispatch(g_store.actions.UPDATE_ITEM,\r\n                        {...this.categoryGradeItem, aggregationcoef: this.catWeight})\r\n\r\n            },\r\n            uptadeCatName: function(){\r\n                if(this.showFullName){\r\n                    this.catName = this.category.fullname;\r\n                }else{\r\n                    this.catName = this.$options.filters.trunc(this.category.fullname, 30);\r\n                }\r\n            },\r\n            updateWeight: function(){\r\n                this.catWeight = this.$options.filters.round(this.aggregationCoef, 2);\r\n                if(this.catGetWeightClass === 'catwnotfocused'){\r\n                    this.catWeight += '%';\r\n                }\r\n            }\r\n           }\r\n    });\r\n\r\n    var ItemActionsMini = Vue.component('item-actions-mini', {\r\n        template:`\r\n        \r\n        `,\r\n        props: ['itemId']\r\n    });\r\n    var ThStudentNames = Vue.component('th-student-names', {\r\n       template: `\r\n       <th class=\"th-student-names\" :style=\"stickyStyles\"> \r\n           <flex-row>\r\n               <a v-on:click=\"changeOrderToLastame()\">Apellidos</a> \r\n               <span>/ </span>\r\n               <a v-on:click=\"changeOrderToName\">Nombres</a>\r\n           </flex-row> \r\n       </th>\r\n       `,\r\n        data: function () {\r\n          return {\r\n              lastNameDirectionAsc: true,\r\n              firstNameDirectionAsc: true,\r\n              stickyStyles: {\r\n                  position: 'sticky',\r\n                  top: '0',\r\n                  left: '0',\r\n                  'background-clip': 'padding-box',\r\n                  'z-index': '999999'\r\n              }\r\n          }\r\n        },\r\n        methods: {\r\n           changeOrderToLastame() {\r\n\r\n                this.$store.commit(\r\n                    g_store.mutations.SET_STUDENT_SORT_METHOD,\r\n                    {\r\n                        name: g_enums.sortStudentMethods.LAST_NAME,\r\n                        order: this.lastNameDirectionAsc? g_enums.sortDirection.ASC : 'desc'\r\n                    });\r\n                this.lastNameDirectionAsc = !this.lastNameDirectionAsc;\r\n           },\r\n            changeOrderToName() {\r\n                this.$store.commit(\r\n                    g_store.mutations.SET_STUDENT_SORT_METHOD,\r\n                    {\r\n                        name: g_enums.sortStudentMethods.FIRST_NAME,\r\n                        order: this.firstNameDirectionAsc? g_enums.sortDirection.ASC : 'desc'\r\n                    });\r\n                this.firstNameDirectionAsc = !this.firstNameDirectionAsc;\r\n            }\r\n        }\r\n\r\n    });\r\n    var TrItems = Vue.component('tr-items', {\r\n        template : `\r\n                    <tr class=\"tr-items\">\r\n                    <th-student-names></th-student-names>\r\n                    <th colspan=\"1\" v-for=\"additionalColumnAtFirst in additionalColumnsAtFirst\" v-show=\"!additionalColumnAtFirst.hide\">{{additionalColumnAtFirst.text}}</th>\r\n                    <template v-for=\"(itemId, index) in orderedItemIds\">       \r\n                        <th-item-category \r\n                        v-if=\"items[itemId].itemtype === 'category'\" \r\n                        v-bind:itemId=\"items[itemId].id\" \r\n                        v-bind:colspan=\"1\"\r\n                        :style=\"stickyStyles\"\r\n                        ></th-item-category> \r\n                        \r\n                        <th-item-manual-and-mod \r\n                        v-if=\"items[itemId].itemtype === 'manual' || items[itemId].itemtype === 'mod'\"  \r\n                        v-bind:itemId=\"items[itemId].id\" \r\n                        ></th-item-manual-and-mod>\r\n                     </template>\r\n                     <th colspan=\"1\" v-for=\"additionalColumnAtEnd in additionalColumnsAtEnd\">{{additionalColumnAtEnd.text}}</th>\r\n                     </tr>\r\n   `,\r\n        computed: {\r\n            ...Vuex.mapGetters({\r\n                orderedItemIds: 'itemOrderIds'\r\n            }),\r\n            ...Vuex.mapState([\r\n                'additionalColumnsAtFirst',\r\n                'additionalColumnsAtEnd',\r\n                'items'\r\n            ])\r\n        },\r\n\r\n        data: function () {\r\n            return {\r\n                stickyStyles: {\r\n                    /*position: 'sticky',\r\n                    top: '0',\r\n                    'z-index': 4032,*/\r\n                    //'background-color': '#ffffff'\r\n                },\r\n            }\r\n        },\r\n    });\r\n        Vue.component('editable',{\r\n            template: `<div contenteditable=\"true\" @blur=\"update\">{{content}}<span>{{sufix}}</span></div>`,\r\n            props:['content', 'sufix'],\r\n            methods:{\r\n                getContent: function (event) {\r\n                    return event.target.innerText.replace(this.sufix, '');\r\n                },\r\n                update:function(event){\r\n                    this.$emit('update', this.getContent(event));\r\n                }\r\n            }\r\n        });\r\n\r\n        var ThItemManualAndMod = Vue.component('th-item-manual-and-mod', {\r\n            template : `         \r\n                <th class=\"th-item-manual-and-mod\"\r\n                v-cloak\r\n                 @mouseover=\"showMenuItems = true\"\r\n                 @mouseout=\"showMenuItems = false\"\r\n                 :title=\"item.itemname\"\r\n                ><!--v-on:click=\"deleteItem(item.id)\"-->\r\n                <flex-row v-bind:style=\"editZoneStyles\" align-v=\"center\">\r\n                    <input v-model=\"content\" :class=\"getClass\" @focus=\"focus\" @blur=\"blur\" @keydown.enter=\"saveNameChanges\" @keyup.enter=\"$event.target.blur()\"></input>\r\n                    <input\r\n                     v-model=\"weight\" \r\n                     :class=\"getWeightClass\"\r\n                     @focus=\"wfocus\" @blur=\"wblur\"\r\n                     @keyup.enter=\"$event.target.blur()\"\r\n                     v-if=\"parentCategory.aggregation == weightedAggregation\"\r\n                     v-on:keypress=\"isNumber($event)\"\r\n                     ></input>\r\n                    <item-mini-menu v-show=\"showMenuItems\" v-bind:itemId=\"item.id\"></item-mini-menu>\r\n                </flex-row>\r\n                </th>\r\n   `,       created() {\r\n                let text = this.item.itemname;\r\n                let length = 18;\r\n                let clamp = '...';\r\n                let node = document.createElement('div');\r\n                node.innerHTML = text;\r\n                let contente = node.textContent;\r\n                this.content = contente.length > length ? contente.slice(0, length) + clamp : contente;\r\n                this.weight = this.$options.filters.round(this.item.aggregationcoef, 2) + '%';\r\n            },\r\n            data: function () {\r\n                return {\r\n                    showMenuItems: false,\r\n                    showFullName: false,\r\n                    getClass: 'inotfocused',\r\n                    getWeightClass: 'iwnotfocused',\r\n                    content: \"\",\r\n                    weight: 0,\r\n                    //length: 19,\r\n                    editZoneStyles: {\r\n                        /*display: 'grid',\r\n                        gridTemplateColumns: 'repeat(3, max-content)',\r\n                        gridColumnGap: '5px',*/\r\n                        'max-height': '20px'\r\n                    },\r\n                }\r\n            },\r\n            props: ['itemId'],\r\n            methods: {\r\n                isNumber: function(evt) {\r\n                    evt = (evt) ? evt : window.event;\r\n                    var charCode = (evt.which) ? evt.which : evt.keyCode;\r\n                    if ((charCode > 31 && (charCode < 48 || charCode > 57)) && charCode !== 46) {\r\n                        evt.preventDefault();\r\n                    } else {\r\n                        return true;\r\n                    }\r\n                },\r\n                focus: function (){\r\n                    //this.length = 17;\r\n                    this.getClass = 'iwithfocus';\r\n                    this.showFullName = true;\r\n                    this.uptadeContent();\r\n                },\r\n                blur: function (){\r\n                    this.getClass = 'inotfocused';\r\n                    this.showFullName = false;\r\n                    if (this.content !== this.item.itemname) {\r\n                        this.saveNameChanges()\r\n                    }else{\r\n                        this.uptadeContent();\r\n                    }\r\n                },\r\n                wfocus: function (){\r\n                    this.getWeightClass = 'iwwithfocus';\r\n                    this.updateWeight();\r\n                },\r\n                wblur: function (){\r\n                    this.getWeightClass = 'iwnotfocused';\r\n                    if (parseFloat(this.weight) !== parseFloat(this.item.aggregationcoef)){\r\n                        this.saveAggregationCoefChanges();\r\n                    }else {\r\n                        this.updateWeight();\r\n                    }\r\n                },\r\n                ...Vuex.mapActions({\r\n                    deleteItem: g_store.actions.DELETE_ITEM\r\n                }),\r\n                saveNameChanges:function () {\r\n\r\n                    this.$store.dispatch(\r\n                        g_store.actions.UPDATE_ITEM,\r\n                        {...this.item, itemname: this.content}\r\n                    );\r\n/*                        this.$store.dispatch(\r\n                            g_store.actions.UPDATE_ITEM,\r\n                            {...this.item, itemname: this.content}\r\n                        );*/\r\n                },\r\n                saveAggregationCoefChanges: function() {\r\n                    this.$store.dispatch(\r\n                        g_store.actions.UPDATE_ITEM,\r\n                        {...this.item, aggregationcoef: this.weight}\r\n                    )\r\n                },\r\n                uptadeContent: function(){\r\n                    console.log('update');\r\n                    if(this.showFullName){\r\n                        this.content = this.item.itemname;\r\n                    }else{\r\n                        let text = this.item.itemname;\r\n                        let length = 18;\r\n                        let clamp = '...';\r\n                        let node = document.createElement('div');\r\n                        node.innerHTML = text;\r\n                        let content = node.textContent;\r\n                        this.content = content.length > length ? content.slice(0, length) + clamp : content;\r\n                    }\r\n                },\r\n                updateWeight: function(){\r\n                    console.log(this.item.aggregationcoef);\r\n                    this.weight = this.$options.filters.round(this.item.aggregationcoef, 2);\r\n                    if(this.getWeightClass === 'iwnotfocused'){\r\n                        this.weight += '%';\r\n                    }\r\n                }\r\n            },\r\n\r\n            computed: {\r\n                ...Vuex.mapState([\r\n                    'items'\r\n                ]),\r\n                ...Vuex.mapGetters(['categoryById']),\r\n                item: function () {\r\n                    return this.items[this.itemId];\r\n                },\r\n                parentCategory: function () {\r\n                    return this.categoryById(this.item.categoryid)\r\n                },\r\n                weightedAggregation: function (){\r\n                    return g_enums.aggregations.PROMEDIO;\r\n                },\r\n                /*content: function () {\r\n                    if(this.showFullName){\r\n                        return this.item.itemname;\r\n                    }else{\r\n                        let text = this.item.itemname;\r\n                        let length = 18;\r\n                        let clamp = '...';\r\n                        let node = document.createElement('div');\r\n                        node.innerHTML = text;\r\n                        let content = node.textContent;\r\n                        return content.length > length ? content.slice(0, length) + clamp : content;\r\n                    }\r\n                }*/\r\n            }\r\n        });\r\n\r\n        var ThItemCategory = Vue.component('th-item-category', {\r\n            template : `         \r\n                <th class=\"th-item-category\"v-bind:colspan=\"colspan\"\r\n                 :title=\"itemName\">\r\n                            {{itemName | trunc(20, '...')}}\r\n                </th>\r\n   `,\r\n            props: ['itemId', 'colspan'],\r\n            computed: {\r\n                ...Vuex.mapState([\r\n                    'items'\r\n                ]),\r\n                ...Vuex.mapGetters([\r\n                    'categoryById'\r\n                ]),\r\n                item: function () {\r\n                    return this.items[this.itemId];\r\n                },\r\n                categoryParent: function() {\r\n                    return this.categoryById(this.item.iteminstance);\r\n                },\r\n                itemName: function() {\r\n                    return 'TOTAL ' + this.categoryParent.fullname;\r\n                }\r\n            },\r\n        });\r\n\r\n        var ThStudent = Vue.component('th-student',\r\n            {\r\n                // language=HTML\r\n                template: `\r\n                <th class=\"th-student\"scope=\"row\" v-bind:style=\"stickyStyles\">\r\n                    {{studentFullName}}\r\n                </th>\r\n                `,\r\n                props: ['studentId'],\r\n                computed: {\r\n                    ...Vuex.mapGetters([\r\n                        'studentById'\r\n\r\n                    ]),\r\n                    ...Vuex.mapGetters({\r\n                        students: 'studentSet'\r\n                    }),\r\n                    student: function() {\r\n                        return this.studentById(this.studentId);\r\n                    },\r\n                    studentFullName: function() {\r\n                        return this.student.lastname + ' ' + this.student.firstname;\r\n                    }\r\n                },\r\n\r\n                data: function () {\r\n                    return {\r\n                        stickyStyles: {\r\n                            position: 'sticky',\r\n                            left: '0',\r\n                            'background-clip': 'padding-box',\r\n                            'min-width': '400px!important'\r\n                            //'z-index': 999999,\r\n                            //'background-color': '#ffffff'\r\n                        },\r\n                    }\r\n                },\r\n            });\r\n        var TdGrade = Vue.component('td-grade',\r\n            {\r\n                template: `\r\n                <td  class=\"td-grade\"\r\n                v-bind:style=\"this.inputDisabled? { 'background-color': '#e1e4fe' } : { }\"> \r\n                <!--{{item.itemtype}}-->\r\n                <input \r\n                class=\"grade-input\"\r\n                v-bind:disabled=\"inputDisabled\" \r\n                type=\"number\"\r\n                v-bind:tabindex=\"tabIndex\" \r\n                v-bind:step=\"step\"  \r\n                v-bind:max=\"grade.rawgrademax\" \r\n                v-bind:min=\"grade.rawgrademin\" \r\n                v-bind:size=\"decimalPlaces + 1\"\r\n                v-on:keypress=\"isNumber($event)\"\r\n                v-model.lazy=\"finalGrade\">\r\n                </td>\r\n                `,\r\n                props: ['gradeId', 'studentIndex', 'itemIndex'],\r\n                methods: {\r\n                    ...Vuex.mapActions({\r\n                        updateGrade: g_store.actions.UPDATE_GRADE\r\n                    }),\r\n                    isNumber: function(evt) {\r\n                        evt = (evt) ? evt : window.event;\r\n                        var charCode = (evt.which) ? evt.which : evt.keyCode;\r\n                        if ((charCode > 31 && (charCode < 48 || charCode > 57)) && charCode !== 46) {\r\n                            evt.preventDefault();\r\n                        } else {\r\n                            return true;\r\n                        }\r\n                    }\r\n                },\r\n                computed: {\r\n\r\n                    ...Vuex.mapState([\r\n                        'grades',\r\n                        'items',\r\n                        'course',\r\n                        'decimalPlaces'\r\n                    ]),\r\n                    step: function() {\r\n                        return Math.pow(10, -this.decimalPlaces);\r\n                    },\r\n                    ...Vuex.mapGetters([\r\n                        'studentsCount'\r\n                    ]),\r\n                    tabIndex: function() {\r\n                        return (this.itemIndex + 1) * this.studentsCount +  this.studentIndex + 1;\r\n                    },\r\n                    inputDisabled: function () {\r\n\r\n                        return this.item.itemtype==='category' || this.item.itemtype==='course' ;\r\n                    },\r\n                    grade: function() {\r\n                        return this.grades[this.gradeId];\r\n                    },\r\n                    item: function () {\r\n                        return this.items[this.grade.itemid];\r\n                    },\r\n                    finalGrade: {\r\n                        get() {\r\n                            console.log(\"getFInal\");\r\n                            return g_utils.round(this.grade.finalgrade, this.decimalPlaces);\r\n                        },\r\n                        set(value) {\r\n                            console.log(\"setFinal\");\r\n                            this.grade.finalgrade = value;\r\n                            this.updateGrade(this.grade, this.course.id);\r\n                        }\r\n                    }\r\n                }\r\n\r\n            });\r\n        var TrGrades = Vue.component('tr-grades',\r\n            {\r\n                template: `\r\n                <tr \r\n                v-bind:class=\"{is_ases: student.is_ases}\" \r\n                v-bind:title=\"student.is_ases? 'El estudiante pertenece al programa ASES' : ''\"\r\n                >\r\n                    <th-student v-bind:studentId=\"student.id\"></th-student>\r\n                    <td >{{student.username}}</td>\r\n                    <td-grade \r\n                    v-for=\"(gradeId, index) in studentGradeIdsOrdered\" \r\n                    :key=\"gradeId\"\r\n                    v-bind:studentIndex=\"studentIndex\"\r\n                    v-bind:itemIndex=\"index\"\r\n                    v-bind:gradeId=\"gradeId\"\r\n                    >\r\n                    </td-grade>\r\n                   \r\n                </tr>\r\n                `,\r\n                props: ['studentId', 'studentIndex'],\r\n                computed: {\r\n                    ...Vuex.mapState([\r\n                       'students',\r\n                        'grades'\r\n                    ]),\r\n                    ...Vuex.mapGetters([\r\n                        'itemOrderIds'\r\n                    ]),\r\n                    student: function() {\r\n                      return this.students[this.studentId];\r\n                    },\r\n                    /**\r\n                     * Return the student grades ordered in the same order\r\n                     * than `itemOrderIds`\r\n                     * see g_store.sate.getters.itemOrderIds\r\n                     */\r\n                    studentGradeIdsOrdered: function() {\r\n                        return g_utils.\r\n                        orderGradeIdsInItemSetOrder(\r\n                            this.student.gradeIds,\r\n                            this.grades,\r\n                            this.itemOrderIds\r\n                            );\r\n                    }\r\n                }\r\n            }\r\n            );\r\n\r\n\r\n\r\n\r\n       /* var Bar = Vue.component('VBar', {\r\n            mixins: [g_chartjs.Bar, g_vuechartjs.Bar],\r\n            props: {\r\n                chartdata: {\r\n                    type: Object,\r\n                    default: null\r\n                },\r\n                options: {\r\n                    type: Object,\r\n                    default: null\r\n                }\r\n            },\r\n            mounted () {\r\n                this.renderChart(this.chartdata, this.options)\r\n            }\r\n        });*/\r\n\r\n    /** Filter registry */\r\n        Vue.filter (g_filters.round.name, g_filters.round.func);\r\n        Vue.filter (g_filters.trun.name, g_filters.trun.func);\r\n\r\n    var router = new VueRouter({\r\n        routes: g_router.routes\r\n    });\r\n     var app = new Vue({\r\n         store: store,\r\n         router: router,\r\n         components: {\r\n             ThCourse,\r\n             EditCategoryForm,\r\n             ThCategory,\r\n             TrItems,\r\n             ThItemManualAndMod\r\n         }\r\n     });\r\n    return {\r\n        init: function() {\r\n\r\n            app.$mount('#app');\r\n\r\n            $(document).ready(function() {\r\n            });\r\n        }\r\n    };\r\n}\r\n);"],"file":"grader.min.js"}