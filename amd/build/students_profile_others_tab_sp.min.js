define ("block_ases/students_profile_others_tab_sp",["jquery","block_ases/jszip","block_ases/jquery.dataTables","block_ases/dataTables.autoFill","block_ases/dataTables.buttons","block_ases/buttons.html5","block_ases/buttons.flash","block_ases/buttons.print","block_ases/bootstrap","block_ases/sweetalert","block_ases/jqueryui","block_ases/select2"],function(a){return{init:function init(){var u=a("#id_ases").val();a("#edit_health_data").click(function(){var a=p();if("error"==a.status){swal(a.title,a.msg,a.status)}else{var b=o();b=JSON.stringify(b);m(b,u)}});a("#save_health_data").click(function(){var a=p();if("error"==a.status){swal(a.title,a.msg,a.status)}else{var b=o();b=JSON.stringify(b);n(b,u)}});if("0"==a("#input_health_saved").val()){a("#save_health_data").parent().show()}if("1"==a("#input_health_saved").val()){a("#save_health_data").parent().hide();a("#edit_health_data").parent().show();l()}a("#check_servicio_otro").click(function(){if(a(this).is(":checked")){a("#servicio_otro_cual").parent().show();a("#servicio_otro_cual").prop("required",!0)}else{a("#servicio_otro_cual").parent().hide();a("#servicio_otro_cual").prop("required",!1);a("#servicio_otro_cual").val("")}});a(".servicio_salud").click(function(){if("input_radio_eps"==a(this).val()){a("#input_detalle_servicio").attr("title","Escriba EPS");a("#input_detalle_servicio").attr("placeholder","\xBFCu\xE1l EPS?");a("#input_detalle_servicio").attr("type","text")}else if("input_radio_sisben"==a(this).val()){a("#input_detalle_servicio").attr("title","Escriba Nivel");a("#input_detalle_servicio").attr("placeholder","\xBFCu\xE1l Nivel?");a("#input_detalle_servicio").attr("type","number");a("#input_detalle_servicio").attr("min","1");a("#input_detalle_servicio").attr("max","3")}else if("input_radio_otro_servicio"==a(this).val()){a("#input_detalle_servicio").attr("title","Escriba otro servicio");a("#input_detalle_servicio").attr("placeholder","\xBFCu\xE1l servicio de salud?");a("#input_detalle_servicio").attr("type","text")}a("#input_detalle_servicio").parent().show();a("#input_detalle_servicio").attr("required",!0);a("#input_detalle_servicio").val("")});if("0"==a("#input_economics_saved").val()){a("#save_economics_data").parent().show()}if("1"==a("#input_economics_saved").val()){a("#save_economics_data").parent().hide();a("#edit_economics_data").parent().show();f()}a("#collapse_econo input[type=checkbox]").not(".check_solvencia").on("change",function(){if(a(this).is(":checked")){a(this).parent().next().show();a(this).parent().next().children().children("input").prop("required",!0)}else{a(this).parent().next().hide();a(this).parent().next().children().children("input").prop("required",!1);a(this).parent().next().children().children("input").val("")}});a(".select_ocupacion").on("change",function(){if("option_ninguna"==a(this).val()){a(this).parent().next().hide();a(this).parent().next().children("input").prop("required",!1);a(this).parent().next().children("input").val("")}else{a(this).parent().next().show();a(this).parent().next().children("input").prop("required",!0);var b=document.getElementById(a(this).attr("id"));a(this).attr("title",b.options[b.selectedIndex].title)}});a("#save_economics_data").click(function(){var a=k();if("error"==a.status){swal(a.title,a.msg,a.status)}else{var b=j();b=JSON.stringify(b);h(b,u)}});a("#edit_economics_data").click(function(){var a=k();if("error"==a.status){swal(a.title,a.msg,a.status)}else{var b=j();b=JSON.stringify(b);g(b,u)}});if("0"==a("#input_academics_saved").val()){a("#save_academics_data").parent().show()}if("1"==a("#input_academics_saved").val()){a("#save_academics_data").parent().hide();a("#edit_academics_data").parent().show()}a("#save_academics_data").click(function(){var a=e();if("error"==a.status){swal(a.title,a.msg,a.status)}else{var b=d();console.log(b);b=JSON.stringify(b);c(b,u)}});a("#edit_academics_data").click(function(){var a=e();if("error"==a.status){swal(a.title,a.msg,a.status)}else{var c=d();c=JSON.stringify(c);b(c,u)}});a(document).on("click","#table_aspectos_instituciones tbody tr td button",function(){a(this).parent().parent().remove()});a("#bt_add_institucion").click(function(){var b="";b+="<tr><td> <input name=\"name_institucion\" class=\"input_fields_general_tab\"  type=\"text\"/></td>";b+="<td> <input name=\"nivel_academico_institucion\" class=\"input_fields_general_tab\"  type=\"text\" /></td>";b+="<td> <input name=\"apoyos_institucion\" class=\"input_fields_general_tab\"  type=\"text\" /></td>";b+="<td> <button type =\"button\" id=\"bt_delete_institucion\" title=\"Eliminar instituci\xF3n\" name=\"btn_delete_person\" style=\"visibility:visible;\"> </button></td> </tr>";a("#table_aspectos_instituciones").find("tbody").append(b)});function b(b,c){var d=a("#input_json_academics_saved").val();a.ajax({type:"POST",data:{func:"edit_academics_data",json:b,json_prev:d,instanceid:s(),courseid:t(),ases:c},url:"../managers/student_profile/others_tab_api.php",success:function success(c){swal({title:c.title,text:c.msg,type:c.status},function(){a("html, body").animate({scrollTop:820},"slow");a("#input_academics_saved").attr("value","1");a("#input_json_academics_saved").attr("value",b)})},dataType:"json",cache:"false",error:function error(a){swal(a.title,a.msg,a.status)}})}function c(b,c){var d=a("#input_json_academics_saved").val();a.ajax({type:"POST",data:{func:"save_academics_data",json:b,json_prev:d,instanceid:s(),courseid:t(),ases:c},url:"../managers/student_profile/others_tab_api.php",success:function success(c){swal({title:c.title,text:c.msg,type:c.status},function(){a("html, body").animate({scrollTop:700},"slow");a("#save_academics_data").parent().hide();a("#edit_academics_data").parent().show();a("#input_academics_saved").attr("value","1");a("#input_json_academics_saved").attr("value",b)})},dataType:"json",cache:"false",error:function error(a){swal(a.title,a.msg,a.status)}})}function d(){var b={},c=[],d={},e=0;a(".table_aspectos_instituciones tr").find(":input").each(function(){e++;if("name_institucion"==a(this).attr("name"))d.name_institution=a(this).val();if("nivel_academico_institucion"==a(this).attr("name"))d.academic_level=a(this).val();if("apoyos_institucion"==a(this).attr("name"))d.supports=a(this).val();if(4==e){c.push(d);d={};e=0}});b.current_resolution=a("#current_resolution").val();b.total_time=a("#total_time").val();b.previous_academic_title=a("#titulo_academico").val();b.others_institutions=c;b.academics_observations=a("#textarea_academics_observaciones").val();b.academics_dificults=a("#textarea_academics_dificultades").val();return b}function e(){var b={};b.title="\xC9xito";b.msg="El formulario fue validado con \xE9xito";b.status="success";a("#collapse_add_academics input[type=number]").each(function(){var c=a(this).val(),d=a(this).attr("placeholder"),e=a(this).attr("id");if("total_time"==e){if(0>c||999<c){b.title="Datos acad\xE9micos (cr\xE9ditos totales)";b.status="error";b.msg="El campo "+d+" es obligatorio";return b}}});return b}function f(){var b,c,d,e,f,g,h,j=JSON.parse(a("#input_json_economics_saved").val());for(i in j){switch(i){case"estrato":a("#estrato_socioeconomico").val(j[i]);break;case"prestacion_economica":h=JSON.parse(j[i]);b=h.key_input;c=h.val_input;d=h.key_input_text;e=h.val_input_text;f=h.key_input_number;g=h.val_input_number;q(b,c,d,e,f,g);break;case"beca":h=JSON.parse(j[i]);b=h.key_input;c=h.val_input;d=h.key_input_text;e=h.val_input_text;f=h.key_input_number;g=h.val_input_number;q(b,c,d,e,f,g);break;case"ayuda_transporte":h=JSON.parse(j[i]);b=h.key_input;c=h.val_input;d=h.key_input_text;e=h.val_input_text;f=h.key_input_number;g=h.val_input_number;q(b,c,d,e,f,g);break;case"ayuda_materiales":h=JSON.parse(j[i]);b=h.key_input;c=h.val_input;d=h.key_input_text;e=h.val_input_text;f=h.key_input_number;g=h.val_input_number;q(b,c,d,e,f,g);break;case"solvencia_econo":c=j[i];if(1==c){a("#check_solvencia").prop("checked",!0)}else{a("#check_solvencia").prop("checked",!1)}break;case"ocupacion_padres":h=JSON.parse(j[i]);for(objeto in h){if("option_ninguna"==h[objeto].val_select){a("#"+h[objeto].key_select).val(h[objeto].val_select)}else{a("#"+h[objeto].key_select).val(h[objeto].val_select);a("#"+h[objeto].key_select).attr("title",h[objeto].title_select);a(h[objeto].key_input_select).val(h[objeto].val_input_select);a(h[objeto].key_input_select).parent().show()}}break;case"nivel_educ_padres":h=JSON.parse(j[i]);for(objeto in h){a("#"+h[objeto].key_select).val(h[objeto].val_select)}break;case"situa_laboral_padres":h=JSON.parse(j[i]);for(objeto in h){a("#"+h[objeto].key_select).val(h[objeto].val_select)}break;case"expectativas_laborales":h=JSON.parse(j[i]);a(h.key_input).val(h.val_input);break;}}}function g(b,c){var d=a("#input_json_economics_saved").val();a.ajax({type:"POST",data:{func:"edit_economics_data",json:b,json_prev:d,instanceid:s(),courseid:t(),ases:c},url:"../managers/student_profile/others_tab_api.php",success:function success(c){swal({title:c.title,text:c.msg,type:c.status},function(){a("html, body").animate({scrollTop:700},"slow");a("#input_economics_saved").attr("value","1");a("#input_json_economics_saved").attr("value",b)})},dataType:"json",cache:"false",error:function error(a){swal(a.title,a.msg,a.status)}})}function h(b,c){var d=a("#input_json_economics_saved").val();a.ajax({type:"POST",data:{func:"save_economics_data",json:b,json_prev:d,instanceid:s(),courseid:t(),ases:c},url:"../managers/student_profile/others_tab_api.php",success:function success(c){swal({title:c.title,text:c.msg,type:c.status},function(){a("html, body").animate({scrollTop:700},"slow");a("#save_economics_data").parent().hide();a("#edit_economics_data").parent().show();a("#input_economics_saved").attr("value","1");a("#input_json_economics_saved").attr("value",b)})},dataType:"json",cache:"false",error:function error(a){swal(a.title,a.msg,a.status)}})}function j(){var b=[],c={key_input:"#estrato_socioeconomico",val_input:a("#estrato_socioeconomico").val()};b.push(c);var d={};a("#collapse_econo input[type=checkbox]").not(".check_solvencia").each(function(){d.key_input=a(this).attr("id");if(a(this).is(":checked")){d.val_input=1;a(this).parent().next().children().children("input").each(function(){var b=a(this).attr("type");if("text"==b){d.key_input_text=a(this).attr("id");d.val_input_text=a(this).val()}if("number"==b){d.key_input_number=a(this).attr("id");d.val_input_number=a(this).val()}})}else{d.val_input=0}b.push(d);d={}});var e={key_input:"#check_solvencia"};if(a("#check_solvencia").is(":checked")){e.val_input=1}else{e.val_input=0}b.push(e);var f={},g=[],h=[],j=[];obj=document.getElementById("div_info_padre");for(i=0;ele=obj.getElementsByTagName("select")[i];i++){f.key_select=ele.id;f.val_select=ele.value;if("select_nivel_padre"==ele.id){g.push(f)}if("select_ocupacion_padre"==ele.id){if("option_ninguna"!=ele.value){f.key_input_select="#"+a("#"+ele.id).parent().next().children("input").attr("id");f.val_input_select=a("#"+ele.id).parent().next().children("input").val();f.title_select=ele.title}h.push(f)}if("select_situa_padre"==ele.id){j.push(f)}f={}}obj=document.getElementById("div_info_madre");for(i=0;ele=obj.getElementsByTagName("select")[i];i++){f.key_select=ele.id;f.val_select=ele.value;if("select_nivel_madre"==ele.id){g.push(f)}if("select_ocupacion_madre"==ele.id){if("option_ninguna"!=ele.value){f.key_input_select="#"+a("#"+ele.id).parent().next().children("input").attr("id");f.val_input_select=a("#"+ele.id).parent().next().children("input").val();f.title_select=ele.title}h.push(f)}if("select_situa_madre"==ele.id){j.push(f)}f={}}b.push(h);b.push(g);b.push(j);var k={key_input:"#textarea_expectativas",val_input:a("#textarea_expectativas").val()};b.push(k);return b}function k(){var b={};b.title="\xC9xito";b.msg="El formulario fue validado con \xE9xito";b.status="success";a("#collapse_econo input[type=checkbox]").not(".check_solvencia").each(function(){if(a(this).is(":checked")){a(this).parent().next().children().children("input").each(function(){var c=a(this).val(),d=a(this).attr("id"),e=a(this).attr("type");if(""==c){b.title="Datos econ\xF3micos";b.status="error";b.msg="El campo "+d+" es obligatorio";return b}if("number"==e){if(Number.isNaN(c)){b.title="Datos econ\xF3micos";b.status="error";b.msg="El campo "+d+" debe ser num\xE9rico";return b}if(0>c){b.title="Datos econ\xF3micos";b.status="error";b.msg="El campo "+d+" no debe ser negativo";return b}}})}});if(""==a("#estrato_socioeconomico").val()){b.title="Datos econ\xF3micos";b.status="error";b.msg="El campo estrato_socioeconomico es obligatorio y debe ser n\xFAmero entero";return b}else{var c=a("#estrato_socioeconomico").val();if(1>c||6<c||0!=c%1){b.title="Datos econ\xF3micos";b.status="error";b.msg="El campo "+"estrato_socioeconomico"+" corresponde a estratos sociales (Del 1 al 6)";return b}}if("option_ninguna"!=a("#select_ocupacion_madre").val()){var d=a("#input_ocupacion_madre").val();if(""==d){b.title="Datos econ\xF3micos";b.status="error";b.msg="El campo "+"input_ocupacion_madre"+" es obligatorio";return b}}if("option_ninguna"!=a("#select_ocupacion_padre").val()){var e=a("#input_ocupacion_padre").val();if(""==e){b.title="Datos econ\xF3micos";b.status="error";b.msg="El campo "+"input_ocupacion_padre"+" es obligatorio";return b}}return b}function l(){var b,c,d,e,f=JSON.parse(a("#input_json_health_saved").val());for(i in f){switch(i){case"regimen_salud":e=JSON.parse(f[i]);a("#"+e.key_input).prop("checked",!0);;break;case"servicio_salud_vinculado":e=JSON.parse(f[i]);b=e.key_input;c=e.key_input_text;d=e.val_input_text;a("#"+b).prop("checked",!0);a("#"+c).val(d);a("#"+c).parent().show();if("input_radio_sisben"==b){a("#"+c).attr("title","Escriba Nivel");a("#"+c).attr("type","number");a("#"+c).attr("min","1");a("#"+c).attr("max","3")}if("input_radio_eps"==b){a("#"+c).attr("title","Escriba EPS");a("#"+c).attr("placeholder","\xBFCu\xE1l EPS?");a("#"+c).attr("type","text")}else if("input_radio_otro_servicio"==b){a("#"+c).attr("title","Escriba otro servicio");a("#"+c).attr("placeholder","\xBFCu\xE1l servicio de salud?");a("#"+c).attr("type","text")}break;case"servicios_usados":e=JSON.parse(f[i]);for(objeto in e){if(1==e[objeto].val_input){a("#"+e[objeto].key_input).prop("checked",!0);if("check_servicio_otro"==e[objeto].key_input){a("#"+e[objeto].key_input_text).val(e[objeto].val_input_text);a("#"+e[objeto].key_input_text).parent().show()}}else{a("#"+e[objeto].key_input).prop("checked",!1);if("check_servicio_otro"==e[objeto].key_input){a("#servicio_otro_cual").val("");a("#servicio_otro_cual").parent().hide()}}}break;}}}function m(b,c){var d=a("#input_json_health_saved").val();a.ajax({type:"POST",data:{func:"edit_health_data",json:b,json_prev:d,instanceid:s(),courseid:t(),ases:c},url:"../managers/student_profile/others_tab_api.php",success:function success(c){swal({title:c.title,text:c.msg,type:c.status},function(){a("html, body").animate({scrollTop:820},"slow");a("#input_health_saved").attr("value","1");a("#input_json_health_saved").attr("value",b)})},dataType:"json",cache:"false",error:function error(a){swal(a.title,a.msg,a.status)}})}function n(b,c){var d=a("#input_json_health_saved").val();a.ajax({type:"POST",data:{func:"save_health_data",json:b,json_prev:d,instanceid:s(),courseid:t(),ases:c},url:"../managers/student_profile/others_tab_api.php",success:function success(c){swal({title:c.title,text:c.msg,type:c.status},function(){a("html, body").animate({scrollTop:820},"slow");a("#save_health_data").parent().hide();a("#edit_health_data").parent().show();a("#input_health_saved").attr("value","1");a("#input_json_health_saved").attr("value",b)})},dataType:"json",cache:"false",error:function error(a){swal(a.title,a.msg,a.status)}})}function o(){var b=[],c=a("#opciones_regimen_salud").find(":input[type=radio]:checked").val(),d=a("#opciones_regimen_salud").find(":input[type=radio]:checked").attr("id"),e=a("#opciones_servicio_salud").find(":input[type=radio]:checked").val(),f=a("#opciones_servicio_salud").find(":input[type=radio]:checked").attr("id"),g=a("#input_detalle_servicio").val(),h=[],j={};a("#options_services input[type=checkbox]").each(function(){j.key_input=a(this).attr("id");if(a(this).is(":checked")){j.val_input=1;if("check_servicio_otro"==j.key_input){j.key_input_text="servicio_otro_cual";j.val_input_text=a("#servicio_otro_cual").val()}}else{j.val_input=0}h.push(j);j={}});b.push({key_input:d,val_input:c});b.push({key_input:f,val_input:e,val_input_text:g,key_input_text:"input_detalle_servicio"});b.push(h);return b}function p(){var b={};b.title="\xC9xito";b.msg="El formulario fue validado con \xE9xito";b.status="success";if(a("#check_servicio_otro").is(":checked")){var c=a("#servicio_otro_cual").val(),d="Otro servicio";if(""==c){b.title="Datos de servicios de salud";b.status="error";b.msg="El campo "+d+" es obligatorio";return b}if(r(c)){b.title="Datos de servicios de salud";b.status="error";b.msg="El campo "+d+" no debe contener n\xFAmeros";return b}}var e=a("#opciones_regimen_salud").find(":input[type=radio]:checked").val();if(e==void 0){b.title="Datos de servicios de salud";b.status="error";b.msg="El campo R\xE9gimen de salud es obligatorio";return b}var f=a("#opciones_servicio_salud").find(":input[type=radio]:checked").val();if(f!=void 0){var g=a("#input_detalle_servicio").val(),h;switch(f){case"input_radio_eps":h="\xBFCu\xE1l EPS?";if(""==g){b.title="Datos de servicios de salud";b.status="error";b.msg="El campo "+h+" es obligatorio";return b}if(r(g)){b.title="Datos de servicios de salud";b.status="error";b.msg="El campo "+h+" no debe contener n\xFAmeros";return b}break;case"input_radio_sisben":h="\xBFCu\xE1l Nivel?";if(""==g){b.title="Datos de servicios de salud";b.status="error";b.msg="El campo "+h+" es obligatorio y num\xE9rico";return b}if(1>g||3<g){b.title="Datos de servicios de salud";b.status="error";b.msg="El campo "+h+" corresponde a niveles v\xE1lidos de SISBEN (1,2,3)";return b}break;case"input_radio_otro_servicio":h="\xBFCu\xE1l servicio de salud?";if(""==g){b.title="Datos de servicios de salud";b.status="error";b.msg="El campo "+h+" es obligatorio";return b}if(r(g)){b.title="Datos de servicios de salud";b.status="error";b.msg="El campo "+h+" no debe contener n\xFAmeros";return b}break;}}else{b.title="Datos de servicios de salud";b.status="error";b.msg="El campo Servicio de salud es obligatorio";return b}return b}function q(b,c,d,e,f,g){if(1==c){a("#"+b).prop("checked",!0);a("#"+d).val(e);a("#"+d).parent().parent().show();a("#"+f).val(g)}else{a("#"+b).prop("checked",!1);a("#"+d).val("");a("#"+d).parent().parent().hide();a("#"+f).val("")}}function r(a){for(i=0;i<a.length;i++){if(-1!="0123456789".indexOf(a.charAt(i),0)){return 1}}return 0}function s(){var a=location.search.split("&");for(x in a){if(0<=a[x].indexOf("instanceid")){var b=a[x].split("=");return b[1]}}return 0}function t(){var a=location.search.split("&");for(x in a){if(0<=a[x].indexOf("courseid")){var b=a[x].split("=");return b[1]}}return 0}}}});
//# sourceMappingURL=students_profile_others_tab_sp.min.js.map
