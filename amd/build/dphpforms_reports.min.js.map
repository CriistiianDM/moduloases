{"version":3,"sources":["../src/dphpforms_reports.js"],"names":["define","$","jszip","init","isChrome","test","navigator","userAgent","vendor","find","prop","fadeIn","window","JSZip","id_semester","on","custom_actions","report","form_type","report_size","length","x","id_estudiante","id_creado_por","y","Object","keys","respuesta","local_alias","instance_id","parseInt","data","ajax","type","url","JSON","stringify","contentType","dataType","async","success","enunciado","id","data_response","monitor","firstname","lastname","practicing","professional","created_by","username","student_username","split","student","failure","errMsg","console","log","k","extend","width","toFixed","html","attr","addClass","removeClass","convertArrayOfObjectsToCSV","args","result","ctr","columnDelimiter","lineDelimiter","enunciados","push","error","join","forEach","item","key","replace","downloadCSV","data_","filename","link","csv","csvData","Blob","document","createElement","download","URL","createObjectURL","setAttribute","style","body","appendChild","click","removeChild","start_date","val","end_date","swal","title","text","preguntas","parse","css","cache","count_records","completed_records","progress","t","get","record","seguimiento_base","setTimeout","tight_records","fail","err","Math","round"],"mappings":"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","sourcesContent":["// Standard license block omitted.\r\n/*\r\n * @package    block_ases\r\n * @copyright  ASES\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n \r\n /**\r\n  * @module block_ases/dphpforms_reports\r\n  */\r\n\r\ndefine([\r\n    'jquery', \r\n    'block_ases/jszip',\r\n    'block_ases/jquery.dataTables',\r\n    'block_ases/dataTables.autoFill',\r\n    'block_ases/dataTables.buttons',\r\n    'block_ases/buttons.html5',\r\n    'block_ases/buttons.flash',\r\n    'block_ases/buttons.print',\r\n    'block_ases/bootstrap', \r\n    'block_ases/sweetalert', \r\n    'block_ases/jqueryui',\r\n    'block_ases/select2'\r\n], function($, jszip, dataTables, autoFill, buttons, html5, flash, print, bootstrap, sweetalert, jqueryui, select2) {\r\n    \r\n    return {\r\n        init: function() {\r\n\r\n            var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\r\n            if( !isChrome ){\r\n                $(\"#container-control\").find('*').prop('disabled', true);\r\n                $(\"#container-msg-chrome\").fadeIn(300);\r\n            }\r\n\r\n            window.JSZip = jszip;            \r\n            var id_semester = null;\r\n\r\n            function render_datatable( records ){\r\n                var dataForms = process_data( records );   \r\n                \r\n                var columns_table = [\r\n                    {\r\n                        \"title\" : \"Código estudiante\", \r\n                        \"name\" : \"student_code\", \r\n                        \"data\" : \"student_code\",\r\n                    },\r\n                    {\r\n                        \"title\" : \"Nombre(s)\", \r\n                        \"name\" : \"student_firstname\", \r\n                        \"data\" : \"student_firstname\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"Apellido(s)\", \r\n                        \"name\" : \"student_lastname\", \r\n                        \"data\" : \"student_lastname\"\r\n                    }\r\n                    ,\r\n                    {\r\n                        \"title\" : \"Fecha\", \r\n                        \"name\" : \"fecha\", \r\n                        \"data\" : \"fecha\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"Lugar\", \r\n                        \"name\" : \"lugar\", \r\n                        \"data\" : \"lugar\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"Hora Inicio\", \r\n                        \"name\" : \"hora_inicio\", \r\n                        \"data\" : \"hora_inicio\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"Hora Finalizacion\", \r\n                        \"name\" : \"hora_finalizacion\", \r\n                        \"data\" : \"hora_finalizacion\"\r\n                    },    \r\n                    {\r\n                        \"title\" : \"Tema\", \r\n                        \"name\" : \"tema\", \r\n                        \"data\" : \"tema\"\r\n                    },\r\n                    {\r\n                        \"class\": \"big-col\",\r\n                        \"title\" : \"Objetivos\", \r\n                        \"name\" : \"objetivos\", \r\n                        \"data\" : \"objetivos\"\r\n                    },    \r\n                    {\r\n                        \"class\": \"big-col\",\r\n                        \"title\" : \"Comentario individual\", \r\n                        \"name\" : \"comentarios_individual\", \r\n                        \"data\" : \"comentarios_individual\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"Punt. riesgo individual\", \r\n                        \"name\" : \"puntuacion_riesgo_individual\", \r\n                        \"data\" : \"puntuacion_riesgo_individual\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"Temáticas individuales\", \r\n                        \"name\" : \"tematicas_individual\", \r\n                        \"data\" : \"tematicas_individual\"\r\n                    },\r\n                    {\r\n                        \"class\": \"big-col\",\r\n                        \"title\" : \"Comentario familiar\", \r\n                        \"name\" : \"comentarios_familiar\", \r\n                        \"data\" : \"comentarios_familiar\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"Punt. riesgo familiar\", \r\n                        \"name\" : \"puntuacion_riesgo_familiar\", \r\n                        \"data\" : \"puntuacion_riesgo_familiar\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"Temáticas familiar\", \r\n                        \"name\" : \"tematicas_familiar\", \r\n                        \"data\" : \"tematicas_familiar\"\r\n                    },\r\n                    {\r\n                        \"class\": \"big-col\",\r\n                        \"title\" : \"Comentario académico\", \r\n                        \"name\" : \"comentarios_academico\", \r\n                        \"data\" : \"comentarios_academico\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"Punt. riesgo académico\", \r\n                        \"name\" : \"puntuacion_riesgo_academico\", \r\n                        \"data\" : \"puntuacion_riesgo_academico\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"Temáticas académico\", \r\n                        \"name\" : \"tematicas_academico\", \r\n                        \"data\" : \"tematicas_academico\"\r\n                    },\r\n                    {\r\n                        \"class\": \"big-col\",\r\n                        \"title\" : \"Comentario Económico\", \r\n                        \"name\" : \"comentarios_economico\", \r\n                        \"data\" : \"comentarios_economico\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"Punt. riesgo Económico\", \r\n                        \"name\" : \"puntuacion_riesgo_economico\", \r\n                        \"data\" : \"puntuacion_riesgo_economico\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"Temáticas Económico\", \r\n                        \"name\" : \"tematicas_economico\", \r\n                        \"data\" : \"tematicas_economico\"\r\n                    },{\r\n                        \"class\": \"big-col\",\r\n                        \"title\" : \"Comentario Vida Universitaria\", \r\n                        \"name\" : \"comentarios_vida_uni\", \r\n                        \"data\" : \"comentarios_vida_uni\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"Punt. Vida Universitaria\", \r\n                        \"name\" : \"puntuacion_vida_uni\", \r\n                        \"data\" : \"puntuacion_vida_uni\"\r\n                    },\r\n                    {\r\n                        \"class\": \"big-col\",\r\n                        \"title\" : \"Observaciones seguimientos\", \r\n                        \"name\" : \"observaciones_seguimientos\", \r\n                        \"data\" : \"observaciones_seguimientos\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"Revisado Profesional\", \r\n                        \"name\" : \"revisado_profesional\", \r\n                        \"data\" : \"revisado_profesional\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"Revisado Practicante\", \r\n                        \"name\" : \"revisado_practicante\", \r\n                        \"data\" : \"revisado_practicante\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"ID Estudiante\", \r\n                        \"name\" : \"id_estudiante\", \r\n                        \"data\" : \"id_estudiante\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"ID Instancia\", \r\n                        \"name\" : \"id_instancia\", \r\n                        \"data\" : \"id_instancia\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"Nombre Monitor\", \r\n                        \"name\" : \"monitor_name\", \r\n                        \"data\" : \"monitor_name\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"Nombre Practicante\", \r\n                        \"name\" : \"practicing_name\", \r\n                        \"data\" : \"practicing_name\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"Nombre Profesional\", \r\n                        \"name\" : \"professional_name\", \r\n                        \"data\" : \"professional_name\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"ID creado por\", \r\n                        \"name\" : \"id_creado_por\", \r\n                        \"data\" : \"id_creado_por\"\r\n                    },\r\n                    {\r\n                        \"title\" : \"Creado por\", \r\n                        \"name\" : \"created_by\", \r\n                        \"data\" : \"created_by\"\r\n                    },\r\n                                        \r\n                ];\r\n    \r\n                var columns_show = columns_table.map(column => {                                     \r\n                    if(!$(\"#\" + column.name).prop('checked')){\r\n                        column.visible = false;\r\n                    };\r\n                    return column;\r\n                })                \r\n\r\n                if ($.fn.dataTable.isDataTable('#dphpform_datatable')) {\r\n                    $('#dphpform_datatable').DataTable().destroy();    \r\n                    $('#dphpform_datatable tbody').empty();                    \r\n                }\r\n                \r\n                //else {             \r\n                    //$('#dphpform_datatable tbody').empty();\r\n                    var table = $(\"#dphpform_datatable\").DataTable(\r\n                        { \r\n                            \"retrieve\": true,                          \r\n                            \"bsort\" : false,\r\n                            \"data\" : dataForms,                         \r\n                            \"columns\" : columns_show,\r\n                            \"dom\":\"lifrtpB\",\r\n                            \"buttons\" : [\r\n                                {\r\n                                    \"extend\" : \"print\",\r\n                                    \"text\" : 'Imprimir'\r\n                                },{\r\n                                    \"extend\" : \"csv\",\r\n                                    \"text\" : 'CSV'\r\n                                },{\r\n                                    \"extend\" : \"excel\",\r\n                                    \"text\" : 'Excel',\r\n                                    \"className\" : 'buttons-excel',\r\n                                    \"filename\" : 'Export excel',\r\n                                    \"extension\" : '.xls'\r\n                                }   \r\n                            ]                           \r\n                        }\r\n                    );\r\n                    table.draw();\r\n                //};\r\n            };\r\n            \r\n            $('#base_fields_check').on('change', function () {\r\n                if ($('#base_fields_check').prop('checked')) {\r\n                    $(\"#base_fields input[type='checkbox']\").prop('checked', true);\r\n                } else {\r\n                    $(\"#base_fields input[type='checkbox']\").prop('checked', false);\r\n                }\r\n            });\r\n            $('#dimensions_fields_check').on('change', function () {\r\n                if ($('#dimensions_fields_check').prop('checked')) {\r\n                    $(\"#dimensions_fields input[type='checkbox']\").prop('checked', true);\r\n                } else {\r\n                    $(\"#dimensions_fields input[type='checkbox']\").prop('checked', false);\r\n                }\r\n            });\r\n            $('#comments_fields_check').on('change', function () {\r\n                if ($('#comments_fields_check').prop('checked')) {\r\n                    $(\"#comments_fields input[type='checkbox']\").prop('checked', true);\r\n                } else {\r\n                    $(\"#comments_fields input[type='checkbox']\").prop('checked', false);\r\n                }\r\n            });\r\n            $('#risks_fields_check').on('change', function () {\r\n                if ($('#risks_fields_check').prop('checked')) {\r\n                    $(\"#risks_fields input[type='checkbox']\").prop('checked', true);\r\n                } else {\r\n                    $(\"#risks_fields input[type='checkbox']\").prop('checked', false);\r\n                }\r\n            });\r\n            $('#themes_fields_check').on('change', function () {\r\n                if ($('#themes_fields_check').prop('checked')) {\r\n                    $(\"#themes_fields input[type='checkbox']\").prop('checked', true);\r\n                } else {\r\n                    $(\"#themes_fields input[type='checkbox']\").prop('checked', false);\r\n                }\r\n            });\r\n\r\n\r\n            function process_data( records ){\r\n\r\n                var result = [];\r\n                \r\n                records.map(formulario =>{\r\n                    var infoEstudiante = {}; \r\n                                                                                                                  \r\n                    Object.values(formulario).map(element => {\r\n                        if(element.respuesta !== undefined){\r\n                            infoEstudiante[element.local_alias] = element.respuesta;   \r\n                        }else{\r\n                            infoEstudiante[element.local_alias] = \"N.R.\";\r\n                        }                     \r\n                        \r\n                    });                 \r\n                    result.push(infoEstudiante); \r\n                });\r\n                \r\n                return result;\r\n            };\r\n\r\n            function custom_actions( report, form_type ){\r\n                \r\n                if( form_type == \"seguimiento_pares\" ){\r\n                    \r\n                    var report_size = report.length;\r\n                    for( var x = 0; x < report_size; x++){\r\n\r\n                        var pos_firstname = -1;\r\n                        var pos_lastname = -1;\r\n\r\n                        var id_estudiante = null;\r\n                        var id_creado_por = null;\r\n\r\n                        var deleted = false;\r\n\r\n                        for( var y = 0; y < Object.keys(report[x]).length; y++ ){\r\n                            if( report[x][y].respuesta == \"-#$%-\" ){\r\n                                report[x][y].respuesta = \"\";\r\n                            }\r\n                            \r\n                            if( \r\n                                report[x][y].local_alias == \"puntuacion_riesgo_individual\" ||\r\n                                report[x][y].local_alias == \"puntuacion_riesgo_familiar\" ||\r\n                                report[x][y].local_alias == \"puntuacion_riesgo_academico\" ||\r\n                                report[x][y].local_alias == \"puntuacion_riesgo_economico\" ||\r\n                                report[x][y].local_alias == \"puntuacion_vida_uni\"\r\n                             ){\r\n                                if( report[x][y].respuesta == \"1\" ){\r\n                                    report[x][y].respuesta = \"bajo\"\r\n                                }else if( report[x][y].respuesta == \"2\" ){\r\n                                    report[x][y].respuesta = \"medio\"\r\n                                }else if( report[x][y].respuesta == \"3\" ){\r\n                                    report[x][y].respuesta = \"alto\"\r\n                                }\r\n                            }\r\n\r\n                            if( report[x][y].local_alias == \"revisado_profesional\" ){\r\n                                \r\n                                if( report[x][y].respuesta == \"0\" ){\r\n                                    report[x][y].respuesta = \"marcado\"\r\n                                }else if( report[x][y].respuesta == \"-1\" ){\r\n                                    report[x][y].respuesta = \"no_marcado\"\r\n                                }\r\n\r\n                            }\r\n                            if( report[x][y].local_alias == \"revisado_practicante\" ){\r\n                                \r\n                                if( report[x][y].respuesta == \"0\" ){\r\n                                    report[x][y].respuesta = \"marcado\"\r\n                                }else if( report[x][y].respuesta == \"-1\" ){\r\n                                    report[x][y].respuesta = \"no_marcado\"\r\n                                }\r\n\r\n                            }\r\n                            if( !id_estudiante || !id_creado_por ){\r\n                                if( report[x][y].local_alias == \"id_estudiante\" ){\r\n                                    id_estudiante = report[x][y].respuesta;\r\n                                }\r\n                                if( report[x][y].local_alias == \"id_creado_por\" ){\r\n                                    id_creado_por = report[x][y].respuesta;\r\n                                }\r\n                            }\r\n                            \r\n                        }\r\n\r\n                        var instance_id = parseInt($(\"#dphpforms-instance-id\").data(\"instance-id\"));\r\n\r\n                        $.ajax({\r\n                            type: \"POST\",\r\n                            url: \"../managers/user_management/user_management_api.php\",\r\n                            data: JSON.stringify({ \"function\": \"get_crea_stud_mon_prac_prof\", \"params\": [ id_estudiante, id_creado_por, instance_id, id_semester ] }),\r\n                            contentType: \"application/json; charset=utf-8\",\r\n                            dataType: \"json\",\r\n                            async: false,  \r\n                            success: function(data){\r\n\r\n                                report[x][Object.keys(report[x]).length] = { \r\n                                    enunciado:\"monitor_name\", \r\n                                    id:\"00\", \r\n                                    local_alias:\"monitor_name\",\r\n                                    respuesta: String(data.data_response.monitor.firstname) + \" \" + String(data.data_response.monitor.lastname)\r\n                                };\r\n\r\n                                report[x][Object.keys(report[x]).length] = { \r\n                                    enunciado:\"practicing_name\", \r\n                                    id:\"00\", \r\n                                    local_alias:\"practicing_name\",\r\n                                    respuesta: String(data.data_response.practicing.firstname) + \" \" + String(data.data_response.practicing.lastname)\r\n                                };\r\n\r\n                                report[x][Object.keys(report[x]).length] = { \r\n                                    enunciado:\"professional_name\", \r\n                                    id:\"00\", \r\n                                    local_alias:\"professional_name\",\r\n                                    respuesta: String(data.data_response.professional.firstname) + \" \" + String(data.data_response.professional.lastname)\r\n                                };\r\n\r\n                                report[x][Object.keys(report[x]).length] = { \r\n                                    enunciado:\"created_by\", \r\n                                    id:\"00\", \r\n                                    local_alias:\"created_by\",\r\n                                    respuesta: String(data.data_response.created_by.firstname) + \" \" + String(data.data_response.created_by.lastname)\r\n                                };\r\n\r\n                                var username = data.data_response.student_username;\r\n                                if( username ){\r\n                                    username = data.data_response.student_username.split(\"-\")[0];\r\n                                }else{\r\n                                    username = \"null\";\r\n                                }\r\n\r\n                                report[x][Object.keys(report[x]).length] = { \r\n                                    enunciado:\"student_code\", \r\n                                    id:\"00\", \r\n                                    local_alias:\"student_code\",\r\n                                    respuesta: username\r\n                                };\r\n\r\n                                report[x][Object.keys(report[x]).length] = { \r\n                                    enunciado:\"student_firstname\", \r\n                                    id:\"00\", \r\n                                    local_alias:\"student_firstname\",\r\n                                    respuesta: String(data.data_response.student.firstname)\r\n                                };\r\n\r\n                                report[x][Object.keys(report[x]).length] = { \r\n                                    enunciado:\"student_lastname\", \r\n                                    id:\"00\", \r\n                                    local_alias:\"student_lastname\",\r\n                                    respuesta: String(data.data_response.student.lastname)\r\n                                };       \r\n                            },\r\n                            failure: function(errMsg) {\r\n                                console.log(errMsg);\r\n                                \r\n                            }\r\n                        });\r\n\r\n                        var fields_to_move = 3;\r\n\r\n                        for( var k = Object.keys(report[x]).length - 1; k >= 0 ; k-- ){\r\n                            report[x][k+fields_to_move] = $.extend( true, {}, report[x][k] );\r\n                        }\r\n\r\n                        report[x][0] = $.extend( true, {}, report[x][Object.keys(report[x]).length - 3] );\r\n                        report[x][1] = $.extend( true, {}, report[x][Object.keys(report[x]).length - 2] );\r\n                        report[x][2] = $.extend( true, {}, report[x][Object.keys(report[x]).length - 1] );\r\n\r\n                        delete report[x][Object.keys(report[x]).length - 1];\r\n                        delete report[x][Object.keys(report[x]).length - 1];\r\n                        delete report[x][Object.keys(report[x]).length - 1];\r\n                       \r\n                        $(\"#progress-custom\").find(\"div\").width( (( 100 / report_size ) * ( x + 1 )).toFixed( 0 ) + \"%\" );\r\n                        $(\"#progress-custom\").find(\"div\").html( (( 100 / report_size ) * ( x + 1 )).toFixed( 0 ) + \"%\" );\r\n                        $(\"#progress-custom\").find(\"div\").attr( \"aria-valuenow\", (( 100 / report_size ) * ( x + 1 )).toFixed( 0 ) ); \r\n\r\n                    }\r\n\r\n                    $(\"#progress-custom\").find(\"div\").addClass(\"progress-bar-success\");\r\n                    $(\"#message\").removeClass(\"alert alert-info\");\r\n                    $(\"#message\").addClass(\"alert alert-success\");\r\n                    $(\"#message\").html( \"<strong>Info!</strong>  Reporte generado.\" );\r\n                    //$(\"#progress_group\").addClass(\"hidden\");\r\n                    \r\n                    return report;\r\n                }else{\r\n\r\n                    $(\"#progress-custom\").find(\"div\").addClass(\"progress-bar-success\");\r\n                    $(\"#message\").removeClass(\"alert alert-info\");\r\n                    $(\"#message\").addClass(\"alert alert-success\");\r\n                    $(\"#message\").html( \"<strong>Info!</strong>  Reporte generado.\" );\r\n                    //$(\"#progress_group\").addClass(\"hidden\");\r\n\r\n                    return report;\r\n                }\r\n            }\r\n\r\n            function convertArrayOfObjectsToCSV(args) {  \r\n                var result, ctr, keys, columnDelimiter, lineDelimiter, data;\r\n        \r\n                data = args.data || null;\r\n                if (data == null || !data.length) {\r\n                    return null;\r\n                }\r\n        \r\n                columnDelimiter = args.columnDelimiter || ',';\r\n                lineDelimiter = args.lineDelimiter || '\\n';\r\n                \r\n                keys = Object.keys(data[0]);\r\n              \r\n                var enunciados = [];\r\n                for( var x = 0; x <  Object.keys(data[0]).length; x++ ){\r\n                    try {\r\n                        enunciados.push( data[0][x].local_alias );\r\n                    } catch (error) {\r\n                        console.log( \"ERROR\" );\r\n                        console.log( data[0] );\r\n                    }\r\n                    \r\n                }\r\n        \r\n                result = '';\r\n                result += enunciados.join(columnDelimiter);\r\n                result += lineDelimiter;\r\n        \r\n                data.forEach(function(item) {\r\n                    ctr = 0;\r\n                    keys.forEach(function(key) {\r\n                        if (ctr > 0) result += columnDelimiter;\r\n                        try {\r\n                            result += \"\\\"\" + item[key]['respuesta'].replace(/\"/g, '\\'') + \"\\\"\";\r\n                        } catch (error) {}\r\n                        ctr++;\r\n                    });\r\n                    result += lineDelimiter;\r\n                });\r\n        \r\n                return result;\r\n            };\r\n\r\n            function downloadCSV( data_ ) {  \r\n\r\n                var filename, link;\r\n                var csv = convertArrayOfObjectsToCSV({\r\n                    data: data_\r\n                });\r\n                \r\n\r\n                if( csv == null ){\r\n                    return\r\n                };\r\n                \r\n                filename = 'reporte.csv';\r\n                csvData = new Blob([csv], { type: 'text/csv' }); \r\n\r\n                var link = document.createElement(\"a\");\r\n                if (link.download !== undefined) {\r\n                    var url = URL.createObjectURL(csvData);\r\n                    link.setAttribute(\"href\", url);\r\n                    link.setAttribute(\"download\", filename);\r\n                    link.style = \"visibility:hidden\";\r\n                    document.body.appendChild(link);\r\n                    link.click();\r\n                    document.body.removeChild(link);\r\n                };\r\n\r\n            };\r\n\r\n            $('#btn-generar-reporte').click(function(){\r\n\r\n                var start_date = $('#start_date').val();\r\n                var end_date = $('#end_date').val();\r\n\r\n                if( start_date >= end_date ){\r\n                    swal(\r\n                        {title:'Información',\r\n                        text: 'Intervalo de fechas inválido',\r\n                        type: 'warning'},\r\n                        function(){}\r\n                    );\r\n                }else{\r\n\r\n                    $.ajax({\r\n                        type: \"POST\",\r\n                        url: \"../managers/periods_management/periods_api.php\",\r\n                        data: JSON.stringify({ \"function\": \"core_periods_get_period_by_date\", \"params\": [ start_date, end_date ] }),\r\n                        contentType: \"application/json; charset=utf-8\",\r\n                        dataType: \"json\",\r\n                        async: false,  \r\n                        success: function(data){\r\n                            id_semester = data.data_response;\r\n                        },\r\n                        failure: function(errMsg) {}\r\n                    });\r\n\r\n                    if( id_semester ){\r\n\r\n                        var preguntas = JSON.parse( $(\"#dphpforms-reports-preguntas\").html());\r\n                        let instance_id = $(\"#dphpforms-instance-id\").data(\"instance-id\");\r\n                    \r\n                        $(\".progress-bar\").removeClass(\"progress-bar-success\");\r\n                        $(\".progress-bar\").removeClass(\"progress-bar-success\");\r\n                        $(\".progress-bar\").width( \"0%\" );\r\n                        $(\".progress-bar\").html( \"0%\" );\r\n                        $(\".progress-bar\").attr( \"aria-valuenow\", \"0\" );\r\n                        $('#progress_group').css('display','block');\r\n                        $(\"#progress_group\").removeClass(\"hidden\");\r\n                        $(\"#message\").removeClass(\"alert alert-success\");\r\n                        $(\"#message\").addClass(\"alert alert-info\");\r\n                        $('#message').html( \"<strong>Info!</strong> Se está generando el reporte, esto puede tardar un par de minutos dependiendo de su conexión a internet, capacidad del ordenador, intervalo de tiempo seleccionado y rapidez del campus virtual.\" );\r\n                        \r\n                        $.ajax({\r\n                            type: 'POST',\r\n                            url: \"../managers/dphpforms/v2/dphpforms_api.php\",\r\n                            data: JSON.stringify( \r\n                                {\r\n                                    \"function\":\"find_records\",\r\n                                    \"params\":[\r\n                                        {\r\n                                            \"form\":\"seguimiento_pares\",\r\n                                            \"filterFields\":[\r\n                                                    [\"fecha\",[[start_date,\">=\"], [end_date,\"<=\"]], false],\r\n                                                    [\"id_instancia\", [[instance_id,\"LIKE\"]], false]\r\n                                                ],\r\n                                            \"orderFields\":[],\r\n                                            \"orderByDatabaseRecordDate\":false,\r\n                                            \"recordStatus\":[\"!deleted\"],\r\n                                            \"selectedFields\":[],\r\n                                            \"asFields\": []\r\n                                        }\r\n                                    ]\r\n                                } \r\n                            ),\r\n                            contentType: \"aplication/json\",\r\n                            dataType: \"json\",\r\n                            cache: \"false\",\r\n                            success: function(data) {\r\n                                let count_records = Object.keys( data['data_response'] ).length;\r\n                                let completed_records = [];\r\n                                let completed_records_datatable = [];\r\n                                let progress = 0;\r\n\r\n                                for( var t = 0; t < count_records; t++ ){\r\n\r\n                                    $.get( '../managers/dphpforms/dphpforms_get_record.php?record_id=' + data['data_response'][t]['id_registro'], function( record ) {\r\n                                            \r\n                                        if(  Object.keys( record['record'] ).length > 0  ){\r\n    \r\n                                                var seguimiento_base = $.extend( true, {}, preguntas );\r\n    \r\n                                                for( var x = 0; x <  Object.keys( record['record']['campos'] ).length; x++ ){\r\n    \r\n                                                    for( var k = 0; k < Object.keys( seguimiento_base ).length; k++ ){\r\n                                                        if( seguimiento_base[k].id == parseInt( record['record']['campos'][ x ]['id_pregunta'] ) ){\r\n                                                            seguimiento_base[k].respuesta = record['record']['campos'][ x ]['respuesta'];\r\n                                                                                                                    \r\n                                                        }\r\n                                                    }\r\n                                                };\r\n    \r\n                                                completed_records.push( seguimiento_base );\r\n                                            };\r\n    \r\n                                            progress ++;\r\n                                            $(\"#progress-download\").find(\"div\").width( (( 100 / count_records ) * progress).toFixed( 0 ) + \"%\" );\r\n                                            $(\"#progress-download\").find(\"div\").html( (( 100 / count_records ) * progress).toFixed( 0 ) + \"%\" );\r\n                                            $(\"#progress-download\").find(\"div\").attr( \"aria-valuenow\", (( 100 / count_records ) * progress).toFixed( 0 ) );\r\n                                            if( progress == count_records ){\r\n                                                $(\"#progress-download\").find(\"div\").addClass(\"progress-bar-success\");\r\n                                                setTimeout(function(){\r\n                                                    var tight_records = custom_actions( completed_records, \"seguimiento_pares\" );\r\n                                                    downloadCSV( tight_records );\r\n                                                    //render_datatable( tight_records );\r\n                                                },10);\r\n                                                \r\n                                            };\r\n                                            \r\n                                    }).fail(function(err) {\r\n                                        console.log(err);\r\n                                    });\r\n                                    $('#progress').text( Math.round( progress ) );\r\n                                }\r\n                                if( count_records == 0 ){ \r\n                                    $('#progress').text( 100 );\r\n                                    $(\"#message\").removeClass(\"alert alert-info\");\r\n                                    $(\"#message\").addClass(\"alert alert-success\");\r\n                                    $(\"#message\").html( \"<strong>Info!</strong>  Reporte generado.\" );\r\n                                    $(\"#progress_group\").addClass(\"hidden\");\r\n                                    \r\n                                };\r\n    \r\n                            },\r\n                            error: function(data) {}\r\n                                \r\n                         });\r\n\r\n                    }else{\r\n                        swal(\r\n                            {\r\n                                title:'Información',\r\n                                text: \"Las fechas deben estar en el lapso de tiempo que comprende un periodo académico. \",\r\n                                type: 'error'\r\n                            },\r\n                            function(){}\r\n                        );\r\n                    }\r\n                };\r\n            });\r\n        }\r\n    };\r\n      \r\n});\r\n\r\n"],"file":"dphpforms_reports.min.js"}