{"version":3,"sources":["../src/report_active_semesters.js"],"names":["define","$","Chart","loading_indicator","init","data","instance_id","tfoot_total_active_title_prefix","known_columns","document","on","table","DataTable","colIndex","cell","index","column","url","location","search","row","win","window","open","focus","semesters","PercentageResumeReport","resume_report","total_students","forEach","semester","student_cancel","PercentageGradReport","student_grad","PercentageActiveReport","student_active","ResumeReport","tam","length","i","prototype","init_from_data","item","carrera","includes","cambios","get_filter_column_indexes","filter_column_names","column_names","filter_column_indexes","push","init_tfoot_from_report","cohort_id","html","textContent","percentage_resume_report","percentage_grad_report","percentage_active_report","validate_known_columns","columns","filter","value","indexOf","init_download_percentage_desertion_element","graph_image_url","getElementById","toDataURL","click","attr","init_graph","callback","grads","active","active_semesters_chart_element","ctx","getContext","myLine","type","labels","datasets","label","backgroundColor","borderColor","fill","options","animation","onComplete","responsive","title","display","text","tooltips","mode","intersect","hover","scales","xAxes","scaleLabel","labelString","yAxes","init_datatable","show","ajax","method","function","params","dataType","done","dataFromApi","hide","dataTable","css","Object","values","map","name","rowCallback","each","index_","addClass","initComplete","api","every","select","val","fn","util","escapeRegex","draw","unique","sort","d","append","isDataTable","fadeIn","clone","console","error","fail","change"],"mappings":"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","sourcesContent":["/**\n * Course and teacher report\n * @module amd/src/course_and_techar_report\n * @author Luis Gerardo Manrique Cardona\n * @copyright 2018 Luis Gerardo Manrique Cardona <luis.manrique@correounivalle.edu.co>\n * @license  http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @see https://datatables.net/examples/api/multi_filter_select.html\n */\ndefine([\n    'jquery',\n    'block_ases/Chart',\n    'block_ases/loading_indicator',\n    'block_ases/jquery.dataTables',\n    'block_ases/dataTables.autoFill',\n    'block_ases/dataTables.buttons',\n    'block_ases/buttons.html5',\n    'block_ases/buttons.flash',\n    'block_ases/buttons.print'\n], function($, Chart, loading_indicator){\n\n    return {\n        init: function (data) {\n\n            var instance_id = data.instance_id;\n            var table = null;\n            /**\n             * Data: {\n             *     instance_id\n             * }\n             *\n             * DataFromAPI: {\n             *     semesters, # Array with the semester names\n             *     dataTable: DataTable\n             * }\n             * DataTable:\n             * {\n             *     bsort,\n             *     columns,\n             *     data,\n             *     language,\n             *     order\n             * }\n             * DataTable.data[]:\n             * {\n             *     num_doc,\n             *     codigo,\n             *     ases_user_id,\n             *     nombre,\n             *     [active_semesters]: [semesters codes, example: [2016A, 2016B ...]],\n             * }\n             *\n             */\n            /**\n             * All cells than have as data 'NO' should have distinct class\n             */\n            var CODIGO_COLUMN = 'codigo';\n            var NOMBRE_COLUMN= 'nombre';\n            var NUM_DOC_COLUMN = 'num_doc';\n            var tfoot_total_nochange_title_prefix = 'Activos sin cambio de carrera';\n            var tfoot_total_change_title_prefix = 'Activos con cambio de carrera';\n            var tfoot_total_active_title_prefix = 'Total activos';\n            var tfoot_total_inactive_title_prefix = 'inactivos';\n            var tfoot_total_graduated_students_prefix = 'Egresados';\n            var tfoot_total_students_prefix = 'Total Estudiantes';\n            var known_columns = [CODIGO_COLUMN, NOMBRE_COLUMN, NUM_DOC_COLUMN];\n            /** go to ficha general on click **/\n            $(document).on('click', '#tableActiveSemesters tbody tr td', function () {\n                var pagina = \"student_profile.php\";\n                var table = $(\"#tableActiveSemesters\").DataTable();\n                var colIndex = table.cell(this).index().column;\n                /* Las columnas (de la 0 a la 2 -- index desde 0) son: codigo, nombre,\n                 y numero de documento, estos son links a la ficha estudiante*/\n                if (colIndex>=0 && colIndex <=2) {\n                    var url = pagina + location.search + \"&student_code=\" + table.cell(table.row(this).index(), 0).data();\n                    var win = window.open(url, '_blank');\n                    win.focus();\n                }/*else if (colIndex > 4) {\n                    displayProgram();}*/\n            });\n\n            var semesters = []; /* Array of strings with the semesters names, ej. ['2015A', '2015B'...]*/\n            /** Resume of active semester of all students, of course each property of this object\n             * correspond to one semester (see semesters)\n             */\n\n            var PercentageResumeReport = (function () {\n                function PercentageResumeReport(resume_report /* instance of ResumeReport */, semesters /* Array of strings */) {\n                    var total_students = resume_report.total_students;\n                    semesters.forEach(semester => {\n                            var student_cancel = total_students - (resume_report.semesters[semester][0] + resume_report.semesters[semester][1]);\n                            this[semester] = student_cancel * 100 / total_students;\n                        }\n\n                    );\n                };\n                return PercentageResumeReport;\n            }());\n\n            var PercentageGradReport = (function () {\n                function PercentageGradReport(resume_report /* instance of ResumeReport */, semesters /* Array of strings */) {\n                    var total_students = resume_report.total_students;\n                    semesters.forEach(semester => {\n                            var student_grad = resume_report.semesters[semester][1];\n                            this[semester] = student_grad * 100 / total_students;\n                        }\n\n                    );\n                };\n                return PercentageGradReport;\n            }());\n\n            var PercentageActiveReport = (function () {\n                function PercentageActiveReport(resume_report /* instance of ResumeReport */, semesters /* Array of strings */) {\n                    var total_students = resume_report.total_students;\n                    semesters.forEach(semester => {\n                            var student_active = resume_report.semesters[semester][0];\n                            this[semester] = student_active * 100 / total_students;\n                        }\n\n                    );\n                };\n                return PercentageActiveReport;\n            }());\n\n            var ResumeReport = (function () {\n                /**\n                 * Constructor\n                 * @param semesters {array} Semester names\n                 * @param total_students {number} Students quantity\n                 * @constructor\n                 */\n               function ResumeReport(semesters, total_students) {\n                   this.total_students = total_students? total_students: 0;\n                   this.semesters = [];\n                   var tam = semesters.length;\n                   for(var i = 0; i < tam; i++){\n                       this.semesters[semesters[i]] = [0, 0, 0, 0];\n                   }\n               }\n               //console.log(semesters);\n               ResumeReport.prototype.init_from_data = function init_from_data(data /*DataTable.data*/, semesters) {\n                   data.forEach( (item) => {\n                       var carrera = '';\n                       //console.log(\"init_from_data\");\n                       //console.log(item);\n                       semesters.forEach( semester => {\n                           /*console.log(\"Semester:\");\n                           console.log(semester);\n                           console.log(\"Item[semester:]\")\n                           console.log(item[semester]);*/\n                           //console.log(item);\n                           if(!(item[semester].includes('NO') || item[semester].includes('EGRESADO'))){\n                               if(!item[semester].includes(carrera) && carrera !== ''){\n                                   this.semesters[semester][2]++;\n                               }\n                               carrera = item[semester];\n                           }\n                           if(item[semester].includes('SI')) {\n                               this.semesters[semester][0]++;\n                           }else if (item[semester].includes('EGRESADO')){\n                               this.semesters[semester][1]++;\n                           }\n                       }) ;\n                   });\n\n                   var cambios = 0;\n\n                   semesters.forEach(semester => {\n                           cambios = cambios + this.semesters[semester][2];\n                       this.semesters[semester][2] = cambios;\n                       }\n\n                   );\n/*\n                    for(var item = 0; item < data.length; item++){\n                        var tam = semesters.length;\n                        for(var semester = 0; semester < tam; semester++){\n                            if(data[item][semester] === 'SI') {\n                                console.log('sel');\n                                this[semester][0]++;\n                            }else console.log('nel');\n                        }\n                    }*/\n                   //console.log(semesters);\n               };\n\n               return ResumeReport;\n            }());\n            function get_filter_column_indexes(filter_column_names, column_names) {\n                var filter_column_indexes = [];\n                var i;\n                for(i = 0; i < column_names.length; i++) {\n                    if(filter_column_names.includes(column_names[i])) {\n                        filter_column_indexes.push(i);\n                    }\n\n                }\n                return filter_column_indexes;\n            }\n            function init_tfoot_from_report(resume_report /* Resume Report */, semesters, cohort_id) {\n                /* All the cells of tfoot should have no text at start*/\n                $('#tableActiveSemesters tfoot th').html('');\n                /* Add the first cell of tfoot title */\n                $('#tableActiveSemesters tfoot tr.total_students th')[1].textContent = tfoot_total_students_prefix + ' ' + cohort_id;\n                $('#tableActiveSemesters tfoot tr.total_nochange th')[1].textContent= tfoot_total_nochange_title_prefix + ' ' + cohort_id;\n                $('#tableActiveSemesters tfoot tr.total_change th')[1].textContent= tfoot_total_change_title_prefix + ' ' + cohort_id;\n                $('#tableActiveSemesters tfoot tr.total_active th')[1].textContent= tfoot_total_active_title_prefix + ' ' + cohort_id;\n                $('#tableActiveSemesters tfoot tr.total_inactive th')[1].textContent = tfoot_total_inactive_title_prefix + ' ' + cohort_id;\n                $('#tableActiveSemesters tfoot tr.total_grads th')[1].textContent = tfoot_total_graduated_students_prefix + ' ' + cohort_id;\n                /* Add the total active students in each semester at tfoot */\n                semesters.forEach(function(semester) {\n                    //console.log(resume_report.semesters[semester][1]);\n                    //console.log(semester);\n                    $('#tableActiveSemesters tfoot tr.total_students th.'+semester).html(resume_report.total_students); //graduated students\n                    $('#tableActiveSemesters tfoot tr.total_nochange th.'+semester).html(resume_report.semesters[semester][0]-resume_report.semesters[semester][2]); //active nochange\n                    $('#tableActiveSemesters tfoot tr.total_change th.'+semester).html(resume_report.semesters[semester][2]); //active change\n                    $('#tableActiveSemesters tfoot tr.total_active th.'+semester).html(resume_report.semesters[semester][0]); //active students\n                    $('#tableActiveSemesters tfoot tr.total_inactive th.'+semester).html(resume_report.total_students - (resume_report.semesters[semester][0] + resume_report.semesters[semester][1])); //inactive students\n                    $('#tableActiveSemesters tfoot tr.total_grads th.'+semester).html(resume_report.semesters[semester][1]); //graduated students\n                });\n            }\n            var resume_report /* ResumeReport */ = null; // null initialized for now\n            var percentage_resume_report /* PercentageResumeReport */ = null; // null initialized for now\n            var percentage_grad_report /* PercentageGradReport */ = null; // null initialized for now\n            var percentage_active_report /* PercentageGradReport */ = null; // null initialized for now\n\n            /**\n             * Validate the given columns with a known columns\n             * @param columns array of string with column names\n             * @param known_columns array of string with known column names\n             * @returns {boolean}\n             */\n            function validate_known_columns(columns, known_columns) {\n                /* Check tan all the knowed columns are in the given columns*/\n                return columns.filter(value => -1 !== known_columns.indexOf(value)).length === known_columns.length;\n            }\n\n            function init_download_percentage_desertion_element() {\n                var graph_image_url =  document.getElementById('active_semesters_chart').toDataURL();\n                $('#download_percentage_desertion').click(function() {\n                   $(this).attr('href', graph_image_url);\n                });\n            }\n            function init_graph(semesters, percentage_resume_report, percentage_grad_report, percentage_active_report, callback /*PercentageResumeReport*/) {\n                var data = [];\n                var grads = [];\n                var active = [];\n                semesters.forEach(semester => {\n                   data.push(percentage_resume_report[semester]);\n                   grads.push(percentage_grad_report[semester]);\n                   active.push(percentage_active_report[semester]);\n                });\n                var config = {\n                    type: 'line',\n                    data: {\n                        labels: semesters,\n                        datasets: [{\n                            label: 'Porcentaje de estudiantes activos durante el periodo',\n                            backgroundColor: 'green',\n                            borderColor: 'green',\n                            data: active,\n                            fill: false,\n                        },\n                            {\n                            label: 'Porcentaje de estudiantes inactivos durante el periodo',\n                            backgroundColor: 'red',\n                            borderColor: 'red',\n                            data: data,\n                            fill: false,\n                        },\n                            {\n                            label: 'Porcentaje de estudiantes graduados durante el periodo',\n                            backgroundColor: 'blue',\n                            borderColor: 'blue',\n                            data: grads,\n                            fill: false,\n                        }]\n                    },\n                    options: {\n                        animation: {\n                            onComplete: function(){\n                                callback();\n                            }\n                         },\n                        responsive: true,\n                        title: {\n                            display: true,\n                            text: 'Reporte deserción'\n                        },\n                        tooltips: {\n                            mode: 'index',\n                            intersect: false,\n                        },\n                        hover: {\n                            mode: 'nearest',\n                            intersect: true\n                        },\n                        scales: {\n                            xAxes: [{\n                                display: true,\n                                scaleLabel: {\n                                    display: true,\n                                    labelString: 'Periodo'\n                                }\n                            }],\n                            yAxes: [{\n                                display: true,\n                                scaleLabel: {\n                                    display: true,\n                                    labelString: 'Porcentaje'\n                                }\n                            }]\n                        }\n                    }\n                };\n                var active_semesters_chart_element = document.getElementById('active_semesters_chart');\n                var ctx = active_semesters_chart_element.getContext('2d');\n                window.myLine = new Chart(ctx, config);\n\n            }\n\n            function init_datatable (cohort_id) {\n                var url = '../managers/report_active_semesters/report_active_semesters_api.php/' + instance_id;\n                loading_indicator.show();\n                var post_info = {\n                    function: 'data_table',\n                    params: {\n                        instance_id: instance_id,\n                        cohort_id: cohort_id\n                    }\n                };\n                $.ajax({\n                    method: \"POST\",\n                    url: url,\n                    data: post_info,\n                    dataType: 'json'\n                }).done(\n                    function (dataFromApi /*instance of DataFromAPI*/){\n                        loading_indicator.hide();\n                        //console.log(dataFromApi);\n                        var dataTable = dataFromApi.dataTable;\n                        $('#download_percentage_desertion').css(\"display\", \"inline\"); //Show the hidden download button\n                        semesters = Object.values(dataFromApi.semesters);\n                        var columns = dataTable.columns;\n                        var column_names = columns.map( column => column.name );\n                        var total_students = dataTable.data.length;\n                        //console.log(semesters);\n                        resume_report = new ResumeReport(semesters, total_students);\n                        resume_report.init_from_data(dataTable.data, semesters);\n                        percentage_resume_report = new PercentageResumeReport(resume_report, semesters);\n                        percentage_grad_report = new PercentageGradReport(resume_report, semesters);\n                        percentage_active_report = new PercentageActiveReport(resume_report, semesters);\n\n                        /*Init graph*/\n                        init_graph(semesters, percentage_resume_report, percentage_grad_report, percentage_active_report, init_download_percentage_desertion_element);\n                        /* Put a class to each cell than have the 'SI' value, see\n                        * https://datatables.net/reference/option/rowCallback */\n                        dataTable.rowCallback =  function(row, data, index) {\n                            $(semesters).each(\n                                function (index_, value) {\n                                    if (data[value].includes('SI')) {\n                                        $(\"td.\" + value , row).addClass(\"active_semester\");\n                                    }else if (data[value].includes('EGRESADO')){\n                                        $(\"td.\" + value , row).addClass(\"graduated_student\");\n                                    }\n                                }\n                            );\n                        };\n\n                        dataTable.initComplete = function () {\n                            $(\"th:contains('20')\").each(\n                                function(){\n                                    $(this).addClass(\"Semestre\");\n                                }\n                            );\n                            /*Add filter to column headers*/\n                            var column_names = dataTable.columns.map(column => column.name ? column.name : null);\n                            /* Indexes of the semester columns */\n                            /*Filter columns*/\n                            var filter_column_names = semesters;\n                            filter_column_names.push('num_carreras');\n                            //console.log(semesters);\n                            var filter_column_indexes = get_filter_column_indexes(filter_column_names, column_names);\n                            this.api().columns(filter_column_indexes).every(function () {\n                                var column = this;\n\n\n                                var select = $('<select><option value=\"\"></option></select>')\n                                    //.appendTo($(column.header()))\n                                    .on('change', function () {\n                                        var val = $.fn.dataTable.util.escapeRegex(\n                                            $(this).val()\n                                        );\n\n                                        column\n                                            .search(val ? '^' + val + '$' : '', true, false)\n                                            .draw();\n                                    });\n\n                                column.data().unique().sort().each(function (d, j) {\n                                    select.append('<option value=\"' + d + '\">' + d + '</option>');\n                                });\n                            });\n                        }\n\n                        /* After each cohort change remove the datatable and put a empty table*/\n                        if ( $.fn.dataTable.isDataTable( '#tableActiveSemesters' ) ) {\n                            $(\"#div_table_report\").html('');\n                            $(\"#div_table_report\").fadeIn(1000).append('<table id=\"tableActiveSemesters\" class=\"table\" cellspacing=\"0\" width=\"100%\"></table>');\n\n                        }\n                        table = $(\"#tableActiveSemesters\").DataTable(\n                            dataTable\n                        );\n                        $(\"#tableActiveSemesters\").append(\n                            $('<tfoot/>').append( $(\"#tableActiveSemesters thead tr\").clone().addClass('total_students') )//total students\n                        );\n                        /*Append a t foot with a clone of thead for the totals*/\n                        $(\"#tableActiveSemesters\").append(\n                            $('<tfoot/>').append( $(\"#tableActiveSemesters thead tr\").clone().addClass('total_nochange') ) //total 1 career\n                        );\n                        $(\"#tableActiveSemesters\").append(\n                            $('<tfoot/>').append( $(\"#tableActiveSemesters thead tr\").clone().addClass('total_change') ) //total multiple career\n                        );\n                        $(\"#tableActiveSemesters\").append(\n                            $('<tfoot/>').append( $(\"#tableActiveSemesters thead tr\").clone().addClass('total_active') ) //total active\n                        );\n                        $(\"#tableActiveSemesters\").append(\n                            $('<tfoot/>').append( $(\"#tableActiveSemesters thead tr\").clone().addClass('total_inactive') )//total inactive\n                        );\n                        $(\"#tableActiveSemesters\").append(\n                            $('<tfoot/>').append( $(\"#tableActiveSemesters thead tr\").clone().addClass('total_grads') )//total graduated_students\n                        );\n\n                        /* Init resume in tfoot*/\n                        init_tfoot_from_report(resume_report, semesters, cohort_id);\n                        if(!validate_known_columns(column_names, known_columns)) {\n                            console.error(' Las columnas dadas no coinciden con las columnas conocidas.',\n                                'columnas daads:', column_names,\n                                'columnas conocidas: ', known_columns);\n                        }\n\n                    }\n\n                ).fail(\n                    function(error) {\n                        loading_indicator.hide();\n                    }\n                );\n\n            }\n            /*After each cohort select change, the table should be updated*/\n            $('#cohorts').change(function() {\n                var cohort_id = $('#cohorts option:selected').val();\n                $('#tableActiveSemesters tfoot th')[0].textContent= tfoot_total_active_title_prefix + ' ' + cohort_id;\n                init_datatable(cohort_id);\n            });\n            /* First table init */\n            var cohort_id = $('#cohorts option:selected').val();\n            init_datatable(cohort_id);\n\n\n\n        },\n\n    };\n\n    /**\n     * @method displayProgram\n     * @desc Displays the names of the programs from the selected cell\n     * @return {void}\n     */\n/*    function displayProgram() {\n        $.ajax({\n            type: \"POST\",\n            data: {\n                codigo: codigo,\n                programa: programa,\n                type: \"check_loses\",\n                semestre: semestre,\n            },\n            url: \"../managers/historic_academic_reports/historic_academic_reports_processing.php\",\n            success: function (msg) {\n                console.log(msg);\n                swal({\n                    title: \"Materias Perdidas\",\n                    type: \"info\",\n                    text: msg,\n                    html: true,\n                    showCancelButton: false,\n                    customClass: 'swal-wide',\n                    confirmButtonColor: \"#DD6B55\",\n                    confirmButtonText: \"Cerrar\",\n                    closeOnConfirm: true\n                });\n                $(\".swal-wide\").css({ 'width': '600px', 'margin-left': '-300px' });\n            },\n            dataType: \"text\",\n            cache: \"false\",\n            error: function (msg) {\n                console.log(msg);\n            },\n        });\n    }*/\n\n});"],"file":"report_active_semesters.min.js"}